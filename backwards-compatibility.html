<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="search" title="Search" href="search.html" /><link rel="next" title="赞助" href="sponsor.html" /><link rel="prev" title="贡献" href="contributing.html" />
        <link rel="canonical" href="https://docs.pytest.org/en/stable/backwards-compatibility.html" />

    <link rel="shortcut icon" href="_static/favicon.png"/><!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>向后兼容政策 - pytest documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/pygments_pytest.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="_static/pytest-custom.css?v=eb7c59a4" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">pytest documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/pytest1.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">入门</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="how-to/index.html">操作指南</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 操作指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="how-to/usage.html">如何调用 pytest</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/assert.html">如何在测试中编写和报告断言</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/fixtures.html">如何使用 fixture</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/mark.html">如何用属性标记测试函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/parametrize.html">如何参数化fixtures和测试函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/tmp_path.html">如何在测试中使用临时目录和文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/monkeypatch.html">如何使用 猴子补丁/mock 模块和环境</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/doctest.html">如何运行文档测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/cache.html">如何重新运行失败的测试并在测试运行之间保持状态</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/failures.html">如何处理测试失败</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/output.html">管理 pytest 的输出</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/logging.html">如何管理日志记录</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/capture-stdout-stderr.html">如何捕获 stdout/stderr 输出</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/capture-warnings.html">如何捕获警告</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/skipping.html">如何使用 skip 和 xfail 处理无法成功的测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/plugins.html">如何安装和使用插件</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/writing_plugins.html">编写插件</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/writing_hook_functions.html">编写钩子函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/existingtestsuite.html">如何将 pytest 与现有测试套件结合使用</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/unittest.html">如何在 pytest 中使用基于 unittest 的测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/xunit_setup.html">如何实现 xunit 样式的设置</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to/bash-completion.html">如何设置 bash 补全</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="reference/index.html">参考指南</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 参考指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="reference/reference.html">API 参考</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/fixtures.html">Fixtures 参考</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/customize.html">配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/exit-codes.html">退出码</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/plugin_list.html">Pytest 插件列表</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="explanation/index.html">解答</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 解答</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="explanation/anatomy.html">测试剖析</a></li>
<li class="toctree-l2"><a class="reference internal" href="explanation/fixtures.html">关于 fixtures</a></li>
<li class="toctree-l2"><a class="reference internal" href="explanation/goodpractices.html">良好的集成实践</a></li>
<li class="toctree-l2"><a class="reference internal" href="explanation/pythonpath.html">pytest 导入机制和 <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> / <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="explanation/ci.html">CI Pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="explanation/flaky.html">不稳定的测试</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="example/index.html">示例和自定义技巧</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 示例和自定义技巧</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="example/reportingdemo.html">使用 pytest 的 Python 故障报告演示</a></li>
<li class="toctree-l2"><a class="reference internal" href="example/simple.html">基本模式和示例</a></li>
<li class="toctree-l2"><a class="reference internal" href="example/parametrize.html">参数化测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="example/markers.html">使用自定义标记</a></li>
<li class="toctree-l2"><a class="reference internal" href="example/special.html">可以查看所有收集到的测试的会话fixture</a></li>
<li class="toctree-l2"><a class="reference internal" href="example/pythoncollection.html">改变标准 (Python) 测试的发现机制</a></li>
<li class="toctree-l2"><a class="reference internal" href="example/nonpython.html">使用非 Python 测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="example/customdirectory.html">使用自定义目录收集器</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">关于项目</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="changelog.html">更改日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">贡献</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">向后兼容政策</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id2">历史</a></li>
<li class="toctree-l1"><a class="reference internal" href="#python">Python版本支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="sponsor.html">赞助</a></li>
<li class="toctree-l1"><a class="reference internal" href="tidelift.html">pytest 企业版</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">许可</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">联系渠道</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">游泳的链接</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/pytest/">pytest @ PyPI</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pytest-dev/pytest/">pytest @ GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues">Issue Tracker</a></li>
<li class="toctree-l1"><a class="reference external" href="https://media.readthedocs.org/pdf/pytest/latest/pytest.pdf">PDF Documentation</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="backwards-compatibility">
<span id="id1"></span><h1>向后兼容政策<a class="headerlink" href="#backwards-compatibility" title="Link to this heading">¶</a></h1>
<p><strong>Backwards Compatibility Policy</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p>Pytest 是一个正在积极发展的项目，经历了数十年的演变。我们不断学习新的、更好的结构，以表达与测试相关的不同细节。</p>
<p>在实施这些修改时，我们努力确保用户和社区/插件作者能够轻松过渡，并不想给他们带来不必要的困扰。</p>
<p>截至目前，pytest 考虑了多种类型的向后兼容性过渡：</p>
<ol class="loweralpha">
<li><p>微不足道：API 可以轻松转换为新机制，并且不会导致问题变化。</p>
<p>我们尝试无限期支持这些 API，同时通过文档鼓励用户切换到更新或更好的机制。</p>
</li>
<li><p>过渡性：旧 API 和新 API 不冲突，我们可以通过使用警告来帮助用户过渡，同时支持两者一段较长的时间。</p>
<p>我们只会在主要版本中开始删除弃用功能（例如，如果我们在 3.0 中弃用某个功能，我们将在 4.0 中开始删除它），并至少保留两个次要版本（例如，如果我们在 3.9 中弃用某个功能，而 4.0 是下一个版本，我们将在 5.0 中开始删除它，而不是在 4.0 中）。</p>
<p>计划在主要版本 X 中删除的弃用功能将使用警告类 <code class="docutils literal notranslate"><span class="pre">PytestRemovedInXWarning`（是</span> <span class="pre">:class:`~pytest.PytestDeprecationWarning</span></code> 的子类）。</p>
<p>当弃用期结束时（例如，4.0 发布），我们不会立即删除弃用的功能，而是会使用标准的警告过滤器将 <code class="docutils literal notranslate"><span class="pre">PytestRemovedInXWarning`（例如，`PytestRemovedIn4Warning</span></code>）默认转换为**错误**。这种方法明确表示删除即将发生，并仍然给您时间将弃用功能变为警告而不是错误，以便您可以在自己的时间内处理。在下一个次要版本（例如，4.1）中，该功能将被有效删除。</p>
</li>
<li><p>真正的破坏应仅在正常过渡不可持续且会导致重要开发或功能延误数年时考虑。此外，它们应限于实际用户数量非常少的 API（例如，仅影响某些插件），并且可以事先与社区进行协调。</p>
<p>此类即将更改的示例：</p>
<ul class="simple">
<li><p>删除 <code class="docutils literal notranslate"><span class="pre">pytest_runtest_protocol/nextitem</span></code> - <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/895">#895</a></p></li>
<li><p>调整节点树以包含 <code class="docutils literal notranslate"><span class="pre">FunctionDefinition</span></code></p></li>
<li><p>调整 <code class="docutils literal notranslate"><span class="pre">SetupState</span></code> <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/895">#895</a></p></li>
</ul>
<p>真正的破坏必须首先在一个问题中进行公告，该问题应包含：</p>
<ul class="simple">
<li><p>变更的详细描述</p></li>
<li><p>理由</p></li>
<li><p>对用户和插件作者的预期影响（例如在 <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/895">#895</a> 中）</p></li>
</ul>
<p>在问题上没有明确的 <em>-1</em> 后，应该跟进一个初步的概念验证拉取请求（POC）。</p>
<p>这个概念验证既作为评估影响的协调点，也可能为提出过渡解决方案提供灵感。</p>
<p>在合理的时间后，该拉取请求可以合并以为新的主要版本奠定基础。</p>
<p>为了使拉取请求从概念验证成熟为接受，它必须包含：
* 设置弃用错误/警告，帮助用户修复和迁移他们的代码。如果可以在当前系列下引入弃用期，以便在真正的破坏之前，应该在一个单独的拉取请求中引入，并成为当前发布流程的一部分。
* 对理由的详细描述以及如何在 <code class="docutils literal notranslate"><span class="pre">doc/en/deprecations.rst</span></code> 中迁移代码的示例。</p>
</li>
</ol>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p>Pytest is an actively evolving project that has been decades in the making.
We keep learning about new and better structures to express different details about testing.</p>
<p>While we implement those modifications, we try to ensure an easy transition and don’t want to impose unnecessary churn on our users and community/plugin authors.</p>
<p>As of now, pytest considers multiple types of backward compatibility transitions:</p>
<ol class="loweralpha">
<li><p>trivial: APIs that trivially translate to the new mechanism and do not cause problematic changes.</p>
<p>We try to support those indefinitely while encouraging users to switch to newer or better mechanisms through documentation.</p>
</li>
<li><p>transitional: the old and new APIs don’t conflict, and we can help users transition by using warnings while supporting both for a prolonged period of time.</p>
<p>We will only start the removal of deprecated functionality in major releases (e.g., if we deprecate something in 3.0, we will start to remove it in 4.0), and keep it around for at least two minor releases (e.g., if we deprecate something in 3.9 and 4.0 is the next release, we start to remove it in 5.0, not in 4.0).</p>
<p>A deprecated feature scheduled to be removed in major version X will use the warning class <code class="docutils literal notranslate"><span class="pre">PytestRemovedInXWarning</span></code> (a subclass of <a class="reference internal" href="reference/reference.html#pytest.PytestDeprecationWarning" title="pytest.PytestDeprecationWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestDeprecationWarning</span></code></a>).</p>
<p>When the deprecation expires (e.g., 4.0 is released), we won’t remove the deprecated functionality immediately but will use the standard warning filters to turn <code class="docutils literal notranslate"><span class="pre">PytestRemovedInXWarning</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">PytestRemovedIn4Warning</span></code>) into <strong>errors</strong> by default. This approach makes it explicit that removal is imminent and still gives you time to turn the deprecated feature into a warning instead of an error so it can be dealt with in your own time. In the next minor release (e.g., 4.1), the feature will be effectively removed.</p>
</li>
<li><p>True breakage should only be considered when a normal transition is unreasonably unsustainable and would offset important developments or features by years. In addition, they should be limited to APIs where the number of actual users is very small (for example, only impacting some plugins) and can be coordinated with the community in advance.</p>
<p>Examples for such upcoming changes:</p>
<ul class="simple">
<li><p>removal of <code class="docutils literal notranslate"><span class="pre">pytest_runtest_protocol/nextitem</span></code> - <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/895">#895</a></p></li>
<li><p>rearranging of the node tree to include <code class="docutils literal notranslate"><span class="pre">FunctionDefinition</span></code></p></li>
<li><p>rearranging of <code class="docutils literal notranslate"><span class="pre">SetupState</span></code> <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/895">#895</a></p></li>
</ul>
<p>True breakages must be announced first in an issue containing:</p>
<ul class="simple">
<li><p>Detailed description of the change</p></li>
<li><p>Rationale</p></li>
<li><p>Expected impact on users and plugin authors (example in <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/895">#895</a>)</p></li>
</ul>
<p>After there’s no hard <em>-1</em> on the issue it should be followed up by an initial proof-of-concept Pull Request.</p>
<p>This POC serves as both a coordination point to assess impact and potential inspiration to come up with a transitional solution after all.</p>
<p>After a reasonable amount of time the PR can be merged to base a new major release.</p>
<p>For the PR to mature from POC to acceptance, it must contain:
* Setup of deprecation errors/warnings that help users fix and port their code. If it is possible to introduce a deprecation period under the current series, before the true breakage, it should be introduced in a separate PR and be part of the current release stream.
* Detailed description of the rationale and examples on how to port code in <code class="docutils literal notranslate"><span class="pre">doc/en/deprecations.rst</span></code>.</p>
</li>
</ol>
</div></div>
</section>
<section id="id2">
<h1>历史<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h1>
<p><strong>History</strong></p>
<section id="id3">
<h2>主要关注平稳过渡 - 立场（6.0 之前）<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h2>
<p><strong>Focus primary on smooth transition - stance (pre 6.0)</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><p>保持向后兼容在 pytest 项目中具有非常高的优先级。虽然多年来我们已弃用了一些功能，但大多数仍然得到支持。pytest 中的所有弃用都是因为出现了更简单或更高效的方式来完成相同的任务，使得旧的做法变得不再必要。</p>
<p>在 pytest 3.0 版本中，我们引入了明确的沟通机制，以说明我们何时会真正移除旧的功能，并礼貌地请您使用新的方式，同时给您足够的时间来调整您的测试或在有合理理由保留弃用功能的情况下提出担忧。</p>
<p>为了传达这些变化，我们使用自定义警告层次结构发布弃用警告（参见 <a class="reference internal" href="how-to/capture-warnings.html#internal-warnings"><span class="std std-ref">内部 pytest 警告</span></a>）。这些警告可以通过标准手段抑制：<code class="docutils literal notranslate"><span class="pre">-W</span></code> 命令行标志或 <code class="docutils literal notranslate"><span class="pre">filterwarnings</span></code> ini 选项（参见 <a class="reference internal" href="how-to/capture-warnings.html#warnings"><span class="std std-ref">如何捕获警告</span></a>），但我们建议您谨慎且暂时地使用这些选项，并在可能的情况下遵循警告。</p>
<p>我们只会在主要版本中开始删除弃用功能（例如，如果我们在 3.0 中弃用某个功能，我们将在 4.0 中开始删除它），并至少保留两个次要版本（例如，如果我们在 3.9 中弃用某个功能，而 4.0 是下一个版本，我们将在 5.0 中开始删除它，而不是在 4.0 中）。</p>
<p>当弃用期结束时（例如，4.0 发布），我们不会立即删除弃用的功能，而是会使用标准的警告过滤器将其默认转换为**错误**。这种方法明确表明删除即将发生，并仍然给您时间将弃用功能转变为警告而不是错误，以便您可以在自己的时间内处理。在下一个次要版本（例如，4.1）中，该功能将被有效删除。</p>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><p>Keeping backwards compatibility has a very high priority in the pytest project. Although we have deprecated functionality over the years, most of it is still supported. All deprecations in pytest were done because simpler or more efficient ways of accomplishing the same tasks have emerged, making the old way of doing things unnecessary.</p>
<p>With the pytest 3.0 release, we introduced a clear communication scheme for when we will actually remove the old busted joint and politely ask you to use the new hotness instead, while giving you enough time to adjust your tests or raise concerns if there are valid reasons to keep deprecated functionality around.</p>
<p>To communicate changes, we issue deprecation warnings using a custom warning hierarchy (see <a class="reference internal" href="how-to/capture-warnings.html#internal-warnings"><span class="std std-ref">内部 pytest 警告</span></a>). These warnings may be suppressed using the standard means: <code class="docutils literal notranslate"><span class="pre">-W</span></code> command-line flag or <code class="docutils literal notranslate"><span class="pre">filterwarnings</span></code> ini options (see <a class="reference internal" href="how-to/capture-warnings.html#warnings"><span class="std std-ref">如何捕获警告</span></a>), but we suggest to use these sparingly and temporarily, and heed the warnings when possible.</p>
<p>We will only start the removal of deprecated functionality in major releases (e.g. if we deprecate something in 3.0, we will start to remove it in 4.0), and keep it around for at least two minor releases (e.g. if we deprecate something in 3.9 and 4.0 is the next release, we start to remove it in 5.0, not in 4.0).</p>
<p>When the deprecation expires (e.g. 4.0 is released), we won’t remove the deprecated functionality immediately, but will use the standard warning filters to turn them into <strong>errors</strong> by default. This approach makes it explicit that removal is imminent, and still gives you time to turn the deprecated feature into a warning instead of an error so it can be dealt with in your own time. In the next minor release (e.g. 4.1), the feature will be effectively removed.</p>
</div></div>
<section id="id4">
<h3>弃用路线图<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<p><strong>Deprecation Roadmap</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-2-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-2-2-0" name="2-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-2-2-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-1" name="2-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-2-2-0" class="sphinx-tabs-panel" id="panel-2-2-0" name="2-0" role="tabpanel" tabindex="0"><p>当前已弃用并在之前版本中移除的功能可以在 <a class="reference internal" href="deprecations.html#deprecations"><span class="std std-ref">Deprecations and Removals</span></a> 中找到。</p>
<p>我们通过里程碑和 GitHub 上的 <a class="reference external" href="https://github.com/pytest-dev/pytest/issues?q=label%3A%22type%3A+deprecation%22">deprecation</a> 及 <a class="reference external" href="https://github.com/pytest-dev/pytest/labels/type%3A%20removal">removal</a> 标签跟踪未来的弃用和移除功能。</p>
</div><div aria-labelledby="tab-2-2-1" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-1" name="2-1" role="tabpanel" tabindex="0"><p>Features currently deprecated and removed in previous releases can be found in <a class="reference internal" href="deprecations.html#deprecations"><span class="std std-ref">Deprecations and Removals</span></a>.</p>
<p>We track future deprecation and removal of features using milestones and the <a class="reference external" href="https://github.com/pytest-dev/pytest/issues?q=label%3A%22type%3A+deprecation%22">deprecation</a> and <a class="reference external" href="https://github.com/pytest-dev/pytest/labels/type%3A%20removal">removal</a> labels on GitHub.</p>
</div></div>
</section>
</section>
</section>
<section id="python">
<h1>Python版本支持<a class="headerlink" href="#python" title="Link to this heading">¶</a></h1>
<p><strong>Python version support</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-3-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-3-3-0" name="3-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-3-3-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-1" name="3-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-3-3-0" class="sphinx-tabs-panel" id="panel-3-3-0" name="3-0" role="tabpanel" tabindex="0"><p>已发布的 pytest 版本支持在发布时所有处于积极维护中的 Python 版本：</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>pytest 版本</p></th>
<th class="head"><p>最低 Python 版本</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>8.0+</p></td>
<td><p>3.8+</p></td>
</tr>
<tr class="row-odd"><td><p>7.1+</p></td>
<td><p>3.7+</p></td>
</tr>
<tr class="row-even"><td><p>6.2 - 7.0</p></td>
<td><p>3.6+</p></td>
</tr>
<tr class="row-odd"><td><p>5.0 - 6.1</p></td>
<td><p>3.5+</p></td>
</tr>
<tr class="row-even"><td><p>3.3 - 4.6</p></td>
<td><p>2.7, 3.4+</p></td>
</tr>
</tbody>
</table>
</div>
<p><a class="reference external" href="https://devguide.python.org/versions/">Python 版本状态</a>。</p>
</div><div aria-labelledby="tab-3-3-1" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-1" name="3-1" role="tabpanel" tabindex="0"><p>Released pytest versions support all Python versions that are actively maintained at the time of the release:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>pytest version</p></th>
<th class="head"><p>min. Python version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>8.0+</p></td>
<td><p>3.8+</p></td>
</tr>
<tr class="row-odd"><td><p>7.1+</p></td>
<td><p>3.7+</p></td>
</tr>
<tr class="row-even"><td><p>6.2 - 7.0</p></td>
<td><p>3.6+</p></td>
</tr>
<tr class="row-odd"><td><p>5.0 - 6.1</p></td>
<td><p>3.5+</p></td>
</tr>
<tr class="row-even"><td><p>3.3 - 4.6</p></td>
<td><p>2.7, 3.4+</p></td>
</tr>
</tbody>
</table>
</div>
<p><a class="reference external" href="https://devguide.python.org/versions/">Status of Python Versions</a>.</p>
</div></div>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="sponsor.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">赞助</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="contributing.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">贡献</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2015, holger krekel and pytest-dev team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=7c91f8fd"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/tabs.js?v=3030b3cb"></script>
    </body>
</html>