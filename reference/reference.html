<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="search" title="Search" href="../search.html" /><link rel="next" title="Fixtures 参考" href="fixtures.html" /><link rel="prev" title="参考指南" href="index.html" />
        <link rel="canonical" href="https://docs.pytest.org/en/stable/reference/reference.html" />

    <link rel="shortcut icon" href="../_static/favicon.png"/><!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>API 参考 - pytest documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/pygments_pytest.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../_static/pytest-custom.css?v=eb7c59a4" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">pytest documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/pytest1.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">入门</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../how-to/index.html">操作指南</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 操作指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../how-to/usage.html">如何调用 pytest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/assert.html">如何在测试中编写和报告断言</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/fixtures.html">如何使用 fixture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/mark.html">如何用属性标记测试函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/parametrize.html">如何参数化fixtures和测试函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/tmp_path.html">如何在测试中使用临时目录和文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/monkeypatch.html">如何使用 猴子补丁/mock 模块和环境</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/doctest.html">如何运行文档测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/cache.html">如何重新运行失败的测试并在测试运行之间保持状态</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/failures.html">如何处理测试失败</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/output.html">管理 pytest 的输出</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/logging.html">如何管理日志记录</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/capture-stdout-stderr.html">如何捕获 stdout/stderr 输出</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/capture-warnings.html">如何捕获警告</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/skipping.html">如何使用 skip 和 xfail 处理无法成功的测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/plugins.html">如何安装和使用插件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/writing_plugins.html">编写插件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/writing_hook_functions.html">编写钩子函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/existingtestsuite.html">如何将 pytest 与现有测试套件结合使用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/unittest.html">如何在 pytest 中使用基于 unittest 的测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/xunit_setup.html">如何实现 xunit 样式的设置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to/bash-completion.html">如何设置 bash 补全</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">参考指南</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 参考指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">API 参考</a></li>
<li class="toctree-l2"><a class="reference internal" href="fixtures.html">Fixtures 参考</a></li>
<li class="toctree-l2"><a class="reference internal" href="customize.html">配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="exit-codes.html">退出码</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin_list.html">Pytest 插件列表</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../explanation/index.html">解答</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 解答</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../explanation/anatomy.html">测试剖析</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/fixtures.html">关于 fixtures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/goodpractices.html">良好的集成实践</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/pythonpath.html">pytest 导入机制和 <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> / <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/ci.html">CI Pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/flaky.html">不稳定的测试</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../example/index.html">示例和自定义技巧</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 示例和自定义技巧</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../example/reportingdemo.html">使用 pytest 的 Python 故障报告演示</a></li>
<li class="toctree-l2"><a class="reference internal" href="../example/simple.html">基本模式和示例</a></li>
<li class="toctree-l2"><a class="reference internal" href="../example/parametrize.html">参数化测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="../example/markers.html">使用自定义标记</a></li>
<li class="toctree-l2"><a class="reference internal" href="../example/special.html">可以查看所有收集到的测试的会话fixture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../example/pythoncollection.html">改变标准 (Python) 测试的发现机制</a></li>
<li class="toctree-l2"><a class="reference internal" href="../example/nonpython.html">使用非 Python 测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="../example/customdirectory.html">使用自定义目录收集器</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">关于项目</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">更改日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../backwards-compatibility.html">向后兼容政策</a></li>
<li class="toctree-l1"><a class="reference internal" href="../backwards-compatibility.html#id2">历史</a></li>
<li class="toctree-l1"><a class="reference internal" href="../backwards-compatibility.html#python">Python版本支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sponsor.html">赞助</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tidelift.html">pytest 企业版</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">许可</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">联系渠道</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">游泳的链接</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/pytest/">pytest @ PyPI</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pytest-dev/pytest/">pytest @ GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pytest-dev/pytest/issues">Issue Tracker</a></li>
<li class="toctree-l1"><a class="reference external" href="https://media.readthedocs.org/pdf/pytest/latest/pytest.pdf">PDF Documentation</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="api">
<span id="api-reference"></span><h1>API 参考<a class="headerlink" href="#api" title="Link to this heading">¶</a></h1>
<p><strong>API Reference</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p>本页包含 pytest API 的完整参考。</p>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p>This page contains the full reference to pytest’s API.</p>
</div></div>
<section id="id1">
<h2>常量<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<p><strong>Constants</strong></p>
<section id="pytest-version">
<h3>pytest.__version__<a class="headerlink" href="#pytest-version" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><p>当前 pytest 版本，以字符串形式:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pytest</span><span class="o">.</span><span class="n">__version__</span>
<span class="go">&#39;7.0.0&#39;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><p>The current pytest version, as a string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pytest</span><span class="o">.</span><span class="n">__version__</span>
<span class="go">&#39;7.0.0&#39;</span>
</pre></div>
</div>
</div></div>
</section>
<section id="pytest-version-tuple">
<span id="version-tuple"></span><h3>pytest.version_tuple<a class="headerlink" href="#pytest-version-tuple" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-2-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-2-2-0" name="2-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-2-2-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-1" name="2-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-2-2-0" class="sphinx-tabs-panel" id="panel-2-2-0" name="2-0" role="tabpanel" tabindex="0"><div class="versionadded">
<p><span class="versionmodified added">Added in version 7.0.</span></p>
</div>
<p>当前的 pytest 版本，以元组形式表示:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pytest</span><span class="o">.</span><span class="n">version_tuple</span>
<span class="go">(7, 0, 0)</span>
</pre></div>
</div>
<p>对于预发行版本，最后一个组件将是一个字符串，表示预发行版本:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pytest</span><span class="o">.</span><span class="n">version_tuple</span>
<span class="go">(7, 0, &#39;0rc1&#39;)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-2-1" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-1" name="2-1" role="tabpanel" tabindex="0"><div class="versionadded">
<p><span class="versionmodified added">Added in version 7.0.</span></p>
</div>
<p>The current pytest version, as a tuple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pytest</span><span class="o">.</span><span class="n">version_tuple</span>
<span class="go">(7, 0, 0)</span>
</pre></div>
</div>
<p>For pre-releases, the last component will be a string with the prerelease version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pytest</span><span class="o">.</span><span class="n">version_tuple</span>
<span class="go">(7, 0, &#39;0rc1&#39;)</span>
</pre></div>
</div>
</div></div>
</section>
</section>
<section id="id2">
<h2>函数<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p><strong>Functions</strong></p>
<section id="pytest-approx">
<h3>pytest.approx<a class="headerlink" href="#pytest-approx" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.approx">
<span class="sig-name descname"><span class="pre">approx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_ok</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/python_api.html#approx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.approx" title="Link to this definition">¶</a></dt>
<dd><p>Assert that two numbers (or two ordered sequences of numbers) are equal to each other
within some tolerance.</p>
<p>Due to the <a class="reference external" href="https://docs.python.org/3/tutorial/floatingpoint.html" title="(in Python v3.13)"><span>Floating-Point Arithmetic:  Issues and Limitations</span></a>, numbers that we
would intuitively expect to be equal are not always so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span> <span class="o">==</span> <span class="mf">0.3</span>
<span class="go">False</span>
</pre></div>
</div>
<p>This problem is commonly encountered when writing tests, e.g. when making
sure that floating-point values are what you expect them to be.  One way to
deal with this problem is to assert that two floating-point numbers are
equal to within some appropriate tolerance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">((</span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.3</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-6</span>
<span class="go">True</span>
</pre></div>
</div>
<p>However, comparisons like this are tedious to write and difficult to
understand.  Furthermore, absolute comparisons like the one above are
usually discouraged because there’s no tolerance that works well for all
situations.  <code class="docutils literal notranslate"><span class="pre">1e-6</span></code> is good for numbers around <code class="docutils literal notranslate"><span class="pre">1</span></code>, but too small for
very big numbers and too big for very small ones.  It’s better to express
the tolerance as a fraction of the expected value, but relative comparisons
like that are even more difficult to write correctly and concisely.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">approx</span></code> class performs floating-point comparisons using a syntax
that’s as intuitive as possible:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pytest</span> <span class="kn">import</span> <span class="n">approx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The same syntax also works for ordered sequences of numbers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span> <span class="o">+</span> <span class="mf">0.4</span><span class="p">)</span> <span class="o">==</span> <span class="n">approx</span><span class="p">((</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">numpy</span></code> arrays:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>                                                          
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">])</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">])</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">]))</span> 
<span class="go">True</span>
</pre></div>
</div>
<p>And for a <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array against a scalar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>                                         
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">])</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">])</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span> 
<span class="go">True</span>
</pre></div>
</div>
<p>Only ordered sequences are supported, because <code class="docutils literal notranslate"><span class="pre">approx</span></code> needs
to infer the relative position of the sequences without ambiguity. This means
<code class="docutils literal notranslate"><span class="pre">sets</span></code> and other unordered sequences are not supported.</p>
<p>Finally, dictionary <em>values</em> can also be compared:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">0.2</span> <span class="o">+</span> <span class="mf">0.4</span><span class="p">}</span> <span class="o">==</span> <span class="n">approx</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">})</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The comparison will be true if both mappings have the same keys and their
respective values match the expected tolerances.</p>
<p><strong>Tolerances</strong></p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">approx</span></code> considers numbers within a relative tolerance of
<code class="docutils literal notranslate"><span class="pre">1e-6</span></code> (i.e. one part in a million) of its expected value to be equal.
This treatment would lead to surprising results if the expected value was
<code class="docutils literal notranslate"><span class="pre">0.0</span></code>, because nothing but <code class="docutils literal notranslate"><span class="pre">0.0</span></code> itself is relatively close to <code class="docutils literal notranslate"><span class="pre">0.0</span></code>.
To handle this case less surprisingly, <code class="docutils literal notranslate"><span class="pre">approx</span></code> also considers numbers
within an absolute tolerance of <code class="docutils literal notranslate"><span class="pre">1e-12</span></code> of its expected value to be
equal.  Infinity and NaN are special cases.  Infinity is only considered
equal to itself, regardless of the relative tolerance.  NaN is not
considered equal to anything by default, but you can make it be equal to
itself by setting the <code class="docutils literal notranslate"><span class="pre">nan_ok</span></code> argument to True.  (This is meant to
facilitate comparing arrays that use NaN to mean “no data”.)</p>
<p>Both the relative and absolute tolerances can be changed by passing
arguments to the <code class="docutils literal notranslate"><span class="pre">approx</span></code> constructor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mf">1.0001</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mf">1.0001</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rel</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mf">1.0001</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">abs</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If you specify <code class="docutils literal notranslate"><span class="pre">abs</span></code> but not <code class="docutils literal notranslate"><span class="pre">rel</span></code>, the comparison will not consider
the relative tolerance at all.  In other words, two numbers that are within
the default relative tolerance of <code class="docutils literal notranslate"><span class="pre">1e-6</span></code> will still be considered unequal
if they exceed the specified absolute tolerance.  If you specify both
<code class="docutils literal notranslate"><span class="pre">abs</span></code> and <code class="docutils literal notranslate"><span class="pre">rel</span></code>, the numbers will be considered equal if either
tolerance is met:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1e-8</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1e-8</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">abs</span><span class="o">=</span><span class="mf">1e-12</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1e-8</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rel</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="nb">abs</span><span class="o">=</span><span class="mf">1e-12</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">approx</span></code> to compare nonnumeric types, or dicts and
sequences containing nonnumeric types, in which case it falls back to
strict equality. This can be useful for comparing dicts and sequences that
can contain optional values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="mf">1.0000005</span><span class="p">,</span> <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span> <span class="o">==</span> <span class="n">approx</span><span class="p">({</span><span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="mf">1.0000005</span><span class="p">]</span> <span class="o">==</span> <span class="n">approx</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="mf">1.0000005</span><span class="p">]</span> <span class="o">==</span> <span class="n">approx</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="go">False</span>
</pre></div>
</div>
<p>If you’re thinking about using <code class="docutils literal notranslate"><span class="pre">approx</span></code>, then you might want to know how
it compares to other good ways of comparing floating-point numbers.  All of
these algorithms are based on relative and absolute tolerances and should
agree for the most part, but they do have meaningful differences:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">math.isclose(a,</span> <span class="pre">b,</span> <span class="pre">rel_tol=1e-9,</span> <span class="pre">abs_tol=0.0)</span></code>:  True if the relative
tolerance is met w.r.t. either <code class="docutils literal notranslate"><span class="pre">a</span></code> or <code class="docutils literal notranslate"><span class="pre">b</span></code> or if the absolute
tolerance is met.  Because the relative tolerance is calculated w.r.t.
both <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code>, this test is symmetric (i.e.  neither <code class="docutils literal notranslate"><span class="pre">a</span></code> nor
<code class="docutils literal notranslate"><span class="pre">b</span></code> is a “reference value”).  You have to specify an absolute tolerance
if you want to compare to <code class="docutils literal notranslate"><span class="pre">0.0</span></code> because there is no tolerance by
default.  More information: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.isclose" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.isclose()</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy.isclose(a,</span> <span class="pre">b,</span> <span class="pre">rtol=1e-5,</span> <span class="pre">atol=1e-8)</span></code>: True if the difference
between <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> is less that the sum of the relative tolerance
w.r.t. <code class="docutils literal notranslate"><span class="pre">b</span></code> and the absolute tolerance.  Because the relative tolerance
is only calculated w.r.t. <code class="docutils literal notranslate"><span class="pre">b</span></code>, this test is asymmetric and you can
think of <code class="docutils literal notranslate"><span class="pre">b</span></code> as the reference value.  Support for comparing sequences
is provided by <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.allclose.html#numpy.allclose" title="(in NumPy v2.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.allclose()</span></code></a>.  More information:
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.isclose.html" title="(in NumPy v2.1)"><span>numpy.isclose</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unittest.TestCase.assertAlmostEqual(a,</span> <span class="pre">b)</span></code>: True if <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code>
are within an absolute tolerance of <code class="docutils literal notranslate"><span class="pre">1e-7</span></code>.  No relative tolerance is
considered , so this function is not appropriate for very large or very
small numbers.  Also, it’s only available in subclasses of <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code>
and it’s ugly because it doesn’t follow PEP8.  More information:
<a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertAlmostEqual" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestCase.assertAlmostEqual()</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">==</span> <span class="pre">pytest.approx(b,</span> <span class="pre">rel=1e-6,</span> <span class="pre">abs=1e-12)</span></code>: True if the relative
tolerance is met w.r.t. <code class="docutils literal notranslate"><span class="pre">b</span></code> or if the absolute tolerance is met.
Because the relative tolerance is only calculated w.r.t. <code class="docutils literal notranslate"><span class="pre">b</span></code>, this test
is asymmetric and you can think of <code class="docutils literal notranslate"><span class="pre">b</span></code> as the reference value.  In the
special case that you explicitly specify an absolute tolerance but not a
relative tolerance, only the absolute tolerance is considered.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">approx</span></code> can handle numpy arrays, but we recommend the
specialised test helpers in <a class="reference external" href="https://numpy.org/doc/stable/reference/routines.testing.html" title="(in NumPy v2.1)"><span>Test support (numpy.testing)</span></a>
if you need support for comparisons, NaNs, or ULP-based tolerances.</p>
<p>To match strings using regex, you can use
<a class="reference external" href="https://github.com/asottile/re-assert#re_assertmatchespattern-str-args-kwargs">Matches</a>
from the
<a class="reference external" href="https://github.com/asottile/re-assert">re_assert package</a>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.2.</span></p>
</div>
<p>In order to avoid inconsistent behavior, <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.13)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> is
raised for <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> comparisons.
The example below illustrates the problem:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">approx</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">1e-10</span>  <span class="c1"># calls approx(0.1).__gt__(0.1 + 1e-10)</span>
<span class="k">assert</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">1e-10</span> <span class="o">&gt;</span> <span class="n">approx</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>  <span class="c1"># calls approx(0.1).__lt__(0.1 + 1e-10)</span>
</pre></div>
</div>
<p>In the second example one expects <code class="docutils literal notranslate"><span class="pre">approx(0.1).__le__(0.1</span> <span class="pre">+</span> <span class="pre">1e-10)</span></code>
to be called. But instead, <code class="docutils literal notranslate"><span class="pre">approx(0.1).__lt__(0.1</span> <span class="pre">+</span> <span class="pre">1e-10)</span></code> is used to
comparison. This is because the call hierarchy of rich comparisons
follows a fixed behavior. More information: <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__ge__" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">object.__ge__()</span></code></a></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.7.1: </span><code class="docutils literal notranslate"><span class="pre">approx</span></code> raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when it encounters a dict value or
sequence element of nonnumeric type.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 6.1.0: </span><code class="docutils literal notranslate"><span class="pre">approx</span></code> falls back to strict equality for nonnumeric types instead
of raising <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

</section>
<section id="pytest-fail">
<h3>pytest.fail<a class="headerlink" href="#pytest-fail" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/skipping.html#skipping"><span class="std std-ref">如何使用 skip 和 xfail 处理无法成功的测试</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.fail">
<span class="sig-name descname"><span class="pre">fail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reason</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">pytrace=True</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/outcomes.html#fail"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.fail" title="Link to this definition">¶</a></dt>
<dd><p>Explicitly fail an executing test with the given message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The message to show the user as reason for the failure.</p></li>
<li><p><strong>pytrace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If False, msg represents the full failure information and no
python traceback will be reported.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pytest.fail.Exception" title="pytest.fail.Exception"><strong>pytest.fail.Exception</strong></a> – The exception that is raised.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.fail.Exception">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pytest.fail.</span></span><span class="sig-name descname"><span class="pre">Exception</span></span><a class="headerlink" href="#pytest.fail.Exception" title="Link to this definition">¶</a></dt>
<dd><p>The exception raised by <a class="reference internal" href="#pytest.fail" title="pytest.fail"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.fail()</span></code></a>.</p>
</dd></dl>

</section>
<section id="pytest-skip">
<h3>pytest.skip<a class="headerlink" href="#pytest-skip" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.skip">
<span class="sig-name descname"><span class="pre">skip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reason</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">allow_module_level=False</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/outcomes.html#skip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.skip" title="Link to this definition">¶</a></dt>
<dd><p>Skip an executing test with the given message.</p>
<p>This function should be called only during testing (setup, call or teardown) or
during collection by using the <code class="docutils literal notranslate"><span class="pre">allow_module_level</span></code> flag.  This function can
be called in doctests as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The message to show the user as reason for the skip.</p></li>
<li><p><strong>allow_module_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – <p>Allows this function to be called at module level.
Raising the skip exception at module level will stop
the execution of the module and prevent the collection of all tests in the module,
even those defined before the <code class="docutils literal notranslate"><span class="pre">skip</span></code> call.</p>
<p>Defaults to False.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pytest.skip.Exception" title="pytest.skip.Exception"><strong>pytest.skip.Exception</strong></a> – The exception that is raised.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is better to use the <a class="reference internal" href="#pytest-mark-skipif-ref"><span class="std std-ref">pytest.mark.skipif</span></a> marker when
possible to declare a test to be skipped under certain conditions
like mismatching platforms or dependencies.
Similarly, use the <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">doctest:</span> <span class="pre">+SKIP</span></code> directive (see <a class="reference external" href="https://docs.python.org/3/library/doctest.html#doctest.SKIP" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">doctest.SKIP</span></code></a>)
to skip a doctest statically.</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.skip.Exception">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pytest.skip.</span></span><span class="sig-name descname"><span class="pre">Exception</span></span><a class="headerlink" href="#pytest.skip.Exception" title="Link to this definition">¶</a></dt>
<dd><p>The exception raised by <a class="reference internal" href="#pytest.skip" title="pytest.skip"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.skip()</span></code></a>.</p>
</dd></dl>

</section>
<section id="pytest-importorskip">
<span id="pytest-importorskip-ref"></span><h3>pytest.importorskip<a class="headerlink" href="#pytest-importorskip" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.importorskip">
<span class="sig-name descname"><span class="pre">importorskip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minversion</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/outcomes.html#importorskip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.importorskip" title="Link to this definition">¶</a></dt>
<dd><p>Import and return the requested module <code class="docutils literal notranslate"><span class="pre">modname</span></code>, or skip the
current test if the module cannot be imported.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>modname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name of the module to import.</p></li>
<li><p><strong>minversion</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – If given, the imported module’s <code class="docutils literal notranslate"><span class="pre">__version__</span></code> attribute must be at
least this minimal version, otherwise the test is still skipped.</p></li>
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – If given, this reason is shown as the message when the module cannot
be imported.</p></li>
<li><p><strong>exc_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><em>type</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ImportError" title="(in Python v3.13)"><em>ImportError</em></a><em>] </em><em>| </em><em>None</em>) – <p>The exception that should be captured in order to skip modules.
Must be <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ImportError" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImportError</span></code></a> or a subclass.</p>
<p>If the module can be imported but raises <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ImportError" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImportError</span></code></a>, pytest will
issue a warning to the user, as often users expect the module not to be
found (which would raise <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ModuleNotFoundError" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleNotFoundError</span></code></a> instead).</p>
<p>This warning can be suppressed by passing <code class="docutils literal notranslate"><span class="pre">exc_type=ImportError</span></code> explicitly.</p>
<p>See <a class="reference internal" href="../deprecations.html#import-or-skip-import-error"><span class="std std-ref">pytest.importorskip default behavior regarding ImportError</span></a> for details.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The imported module. This should be assigned to its canonical name.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.skip.Exception" title="pytest.skip.Exception"><strong>pytest.skip.Exception</strong></a> – If the module cannot be imported.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a></p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docutils</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">importorskip</span><span class="p">(</span><span class="s2">&quot;docutils&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 8.2: </span>The <code class="docutils literal notranslate"><span class="pre">exc_type</span></code> parameter.</p>
</div>
</dd></dl>

</section>
<section id="pytest-xfail">
<h3>pytest.xfail<a class="headerlink" href="#pytest-xfail" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.xfail">
<span class="sig-name descname"><span class="pre">xfail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/outcomes.html#xfail"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.xfail" title="Link to this definition">¶</a></dt>
<dd><p>Imperatively xfail an executing test or setup function with the given reason.</p>
<p>This function should be called only during testing (setup, call or teardown).</p>
<p>No other code is executed after using <code class="docutils literal notranslate"><span class="pre">xfail()</span></code> (it is implemented
internally by raising an exception).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The message to show the user as reason for the xfail.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is better to use the <a class="reference internal" href="#pytest-mark-xfail-ref"><span class="std std-ref">pytest.mark.xfail</span></a> marker when
possible to declare a test to be xfailed under certain conditions
like known bugs or missing features.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.xfail.Exception" title="pytest.xfail.Exception"><strong>pytest.xfail.Exception</strong></a> – The exception that is raised.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.xfail.Exception">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pytest.xfail.</span></span><span class="sig-name descname"><span class="pre">Exception</span></span><a class="headerlink" href="#pytest.xfail.Exception" title="Link to this definition">¶</a></dt>
<dd><p>The exception raised by <a class="reference internal" href="#pytest.xfail" title="pytest.xfail"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.xfail()</span></code></a>.</p>
</dd></dl>

</section>
<section id="pytest-exit">
<h3>pytest.exit<a class="headerlink" href="#pytest-exit" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.exit">
<span class="sig-name descname"><span class="pre">exit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reason</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">returncode=None</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/outcomes.html#exit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.exit" title="Link to this definition">¶</a></dt>
<dd><p>Exit testing process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The message to show as the reason for exiting pytest.  reason has a default value
only because <code class="docutils literal notranslate"><span class="pre">msg</span></code> is deprecated.</p></li>
<li><p><strong>returncode</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><em>None</em>) – Return code to be used when exiting pytest. None means the same as <code class="docutils literal notranslate"><span class="pre">0</span></code> (no error), same as <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.exit" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exit()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pytest.exit.Exception" title="pytest.exit.Exception"><strong>pytest.exit.Exception</strong></a> – The exception that is raised.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.exit.Exception">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pytest.exit.</span></span><span class="sig-name descname"><span class="pre">Exception</span></span><a class="headerlink" href="#pytest.exit.Exception" title="Link to this definition">¶</a></dt>
<dd><p>The exception raised by <a class="reference internal" href="#pytest.exit" title="pytest.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.exit()</span></code></a>.</p>
</dd></dl>

</section>
<section id="pytest-main">
<h3>pytest.main<a class="headerlink" href="#pytest-main" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/usage.html#pytest-main-usage"><span class="std std-ref">从 Python 代码调用 pytest</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.main">
<span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plugins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.main" title="Link to this definition">¶</a></dt>
<dd><p>Perform an in-process test run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>] </em><em>| </em><em>None</em>) – List of command line arguments. If <code class="docutils literal notranslate"><span class="pre">None</span></code> or not given, defaults to reading
arguments directly from the process command line (<a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.argv" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.argv</span></code></a>).</p></li>
<li><p><strong>plugins</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a><em>] </em><em>| </em><em>None</em>) – List of plugin objects to be auto-registered during initialization.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An exit code.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a> | <a class="reference internal" href="#pytest.ExitCode" title="_pytest.config.ExitCode"><em>ExitCode</em></a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="pytest-param">
<h3>pytest.param<a class="headerlink" href="#pytest-param" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.param">
<span class="sig-name descname"><span class="pre">param</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*values</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="optional">]</span><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">marks</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/mark.html#param"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.param" title="Link to this definition">¶</a></dt>
<dd><p>Specify a parameter in <a class="reference internal" href="#pytest-mark-parametrize">pytest.mark.parametrize</a> calls or
<a class="reference internal" href="../how-to/fixtures.html#fixture-parametrize-marks"><span class="std std-ref">parametrized fixtures</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">&quot;test_input,expected&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;3+5&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s2">&quot;6*9&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">test_eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – Variable args of the values of the parameter set, in order.</p></li>
<li><p><strong>marks</strong> (<a class="reference internal" href="#pytest.MarkDecorator" title="_pytest.mark.structures.MarkDecorator"><em>MarkDecorator</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Collection" title="(in Python v3.13)"><em>Collection</em></a><em>[</em><a class="reference internal" href="#pytest.MarkDecorator" title="_pytest.mark.structures.MarkDecorator"><em>MarkDecorator</em></a><em> | </em><a class="reference internal" href="#pytest.Mark" title="_pytest.mark.structures.Mark"><em>Mark</em></a><em>]</em>) – <p>A single mark or a list of marks to be applied to this parameter set.</p>
<p><a class="reference internal" href="#pytest-mark-usefixtures-ref"><span class="std std-ref">pytest.mark.usefixtures</span></a> cannot be added via this parameter.</p>
</p></li>
<li><p><strong>id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – The id to attribute to this parameter set.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="pytest-raises">
<h3>pytest.raises<a class="headerlink" href="#pytest-raises" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/assert.html#assertraises"><span class="std std-ref">关于预期异常的断言</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.raises">
<em class="property"><span class="pre">with</span> </em><span class="sig-name descname"><span class="pre">raises</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_exception</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><span class="pre">type</span></a><span class="p"><span class="pre">[</span></span><span class="pre">E</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><span class="pre">type</span></a><span class="p"><span class="pre">[</span></span><span class="pre">E</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Pattern" title="(in Python v3.13)"><span class="pre">Pattern</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">...</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RaisesContext</span><span class="p"><span class="pre">[</span></span><span class="pre">E</span><span class="p"><span class="pre">]</span></span></span></span><em class="property"><span class="pre"> as</span> <span class="pre">excinfo</span></em><a class="reference internal" href="../_modules/_pytest/python_api.html#raises"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.raises" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py">
<em class="property"><span class="pre">with</span> </em><span class="sig-name descname"><span class="pre">raises</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_exception</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><span class="pre">type</span></a><span class="p"><span class="pre">[</span></span><span class="pre">E</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><span class="pre">type</span></a><span class="p"><span class="pre">[</span></span><span class="pre">E</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pytest.ExceptionInfo" title="_pytest._code.code.ExceptionInfo"><span class="pre">ExceptionInfo</span></a><span class="p"><span class="pre">[</span></span><span class="pre">E</span><span class="p"><span class="pre">]</span></span></span></span><em class="property"><span class="pre"> as</span> <span class="pre">excinfo</span></em></dt>
<dd><p>Assert that a code block/function call raises an exception type, or one of its subclasses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expected_exception</strong> – The expected exception type, or a tuple if one of multiple possible
exception types are expected. Note that subclasses of the passed exceptions
will also match.</p></li>
<li><p><strong>match</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/re.html#re.Pattern" title="(in Python v3.13)"><em>re.Pattern</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>] </em><em>| </em><em>None</em>) – <p>If specified, a string containing a regular expression,
or a regular expression object, that is tested against the string
representation of the exception and its <span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0678/"><strong>PEP 678</strong></a> <code class="docutils literal notranslate"><span class="pre">__notes__</span></code>
using <a class="reference external" href="https://docs.python.org/3/library/re.html#re.search" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.search()</span></code></a>.</p>
<p>To match a literal string that may contain <a class="reference external" href="https://docs.python.org/3/library/re.html#re-syntax" title="(in Python v3.13)"><span class="xref std std-ref">special characters</span></a>, the pattern can first be escaped with <a class="reference external" href="https://docs.python.org/3/library/re.html#re.escape" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.escape()</span></code></a>.</p>
<p>(This is only used when <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> is used as a context manager,
and passed through to the function otherwise.
When using <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> as a function, you can use:
<code class="docutils literal notranslate"><span class="pre">pytest.raises(Exc,</span> <span class="pre">func,</span> <span class="pre">match=&quot;passed</span> <span class="pre">on&quot;).match(&quot;my</span> <span class="pre">pattern&quot;)</span></code>.)</p>
</p></li>
</ul>
</dd>
</dl>
<p>Use <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> as a context manager, which will capture the exception of the given
type, or any of its subclasses:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">):</span>
<span class="gp">... </span>   <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
</pre></div>
</div>
<p>If the code block does not raise the expected exception (<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ZeroDivisionError" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code></a> in the example
above), or no exception at all, the check will fail instead.</p>
<p>You can also use the keyword argument <code class="docutils literal notranslate"><span class="pre">match</span></code> to assert that the
exception matches a text or regex:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s1">&#39;must be 0 or None&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;value must be 0 or None&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;must be \d+$&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;value must be 42&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">match</span></code> argument searches the formatted exception string, which includes any
<a class="reference external" href="https://peps.python.org/pep-0678/">PEP-678</a> <code class="docutils literal notranslate"><span class="pre">__notes__</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;had a note added&quot;</span><span class="p">):</span>  
<span class="gp">... </span>    <span class="n">e</span> <span class="o">=</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;value must be 42&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">e</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="s2">&quot;had a note added&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="n">e</span>
</pre></div>
</div>
<p>The context manager produces an <a class="reference internal" href="#pytest.ExceptionInfo" title="pytest.ExceptionInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExceptionInfo</span></code></a> object which can be used to inspect the
details of the captured exception:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc_info</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;value must be 42&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">type</span> <span class="ow">is</span> <span class="ne">ValueError</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;value must be 42&quot;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Given that <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> matches subclasses, be wary of using it to match <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a> like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>  <span class="c1"># Careful, this will catch ANY exception raised.</span>
    <span class="n">some_function</span><span class="p">()</span>
</pre></div>
</div>
<p>Because <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a> is the base class of almost all exceptions, it is easy for this to hide
real bugs, where the user wrote this expecting a specific exception, but some other exception is being
raised due to a bug introduced during a refactoring.</p>
<p>Avoid using <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> to catch <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a> unless certain that you really want to catch
<strong>any</strong> exception raised.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> as a context manager, it’s worthwhile to
note that normal context manager rules apply and that the exception
raised <em>must</em> be the final line in the scope of the context manager.
Lines of code after that, within the scope of the context manager will
not be executed. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc_info</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;value must be &lt;= 10&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">type</span> <span class="ow">is</span> <span class="ne">ValueError</span>  <span class="c1"># This will not execute.</span>
</pre></div>
</div>
<p>Instead, the following approach must be taken (note the difference in
scope):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc_info</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;value must be &lt;= 10&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">type</span> <span class="ow">is</span> <span class="ne">ValueError</span>
</pre></div>
</div>
</div>
<p><strong>Using with</strong> <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code></p>
<p>When using <a class="reference internal" href="#pytest-mark-parametrize-ref"><span class="std std-ref">pytest.mark.parametrize</span></a>
it is possible to parametrize tests such that
some runs raise an exception and others do not.</p>
<p>See <a class="reference internal" href="../example/parametrize.html#parametrizing-conditional-raising"><span class="std std-ref">参数化条件提升</span></a> for an example.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../how-to/assert.html#assertraises"><span class="std std-ref">关于预期异常的断言</span></a> for more examples and detailed discussion.</p>
</div>
<p><strong>Legacy form</strong></p>
<p>It is possible to specify a callable by passing a to-be-called lambda:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;ExceptionInfo ...&gt;</span>
</pre></div>
</div>
<p>or you can specify an arbitrary callable with arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;ExceptionInfo ...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;ExceptionInfo ...&gt;</span>
</pre></div>
</div>
<p>The form above is fully supported but discouraged for new code because the
context manager form is regarded as more readable and less error-prone.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Similar to caught exception objects in Python, explicitly clearing
local references to returned <code class="docutils literal notranslate"><span class="pre">ExceptionInfo</span></code> objects can
help the Python interpreter speed up its garbage collection.</p>
<p>Clearing those references breaks a reference cycle
(<code class="docutils literal notranslate"><span class="pre">ExceptionInfo</span></code> –&gt; caught exception –&gt; frame stack raising
the exception –&gt; current frame stack –&gt; local variables –&gt;
<code class="docutils literal notranslate"><span class="pre">ExceptionInfo</span></code>) which makes Python keep all objects referenced
from that cycle (including all local variables in the current
frame) alive until the next cyclic garbage collection run.
More detailed information can be found in the official Python
documentation for <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#try" title="(in Python v3.13)"><span class="xref std std-ref">the try statement</span></a>.</p>
</div>
</dd></dl>

</section>
<section id="pytest-deprecated-call">
<h3>pytest.deprecated_call<a class="headerlink" href="#pytest-deprecated-call" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/capture-warnings.html#ensuring-function-triggers"><span class="std std-ref">确保代码触发弃用警告</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.deprecated_call">
<em class="property"><span class="pre">with</span> </em><span class="sig-name descname"><span class="pre">deprecated_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Pattern" title="(in Python v3.13)"><span class="pre">Pattern</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">...</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pytest.WarningsRecorder" title="_pytest.recwarn.WarningsRecorder"><span class="pre">WarningsRecorder</span></a></span></span><a class="reference internal" href="../_modules/_pytest/recwarn.html#deprecated_call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.deprecated_call" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py">
<em class="property"><span class="pre">with</span> </em><span class="sig-name descname"><span class="pre">deprecated_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span></dt>
<dd><p>Assert that code produces a <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> or <code class="docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code> or <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code>.</p>
<p>This function can be used as a context manager:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">api_call_v2</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;use v3 of this api&#39;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="mi">200</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">deprecated_call</span><span class="p">():</span>
<span class="gp">... </span>   <span class="k">assert</span> <span class="n">api_call_v2</span><span class="p">()</span> <span class="o">==</span> <span class="mi">200</span>
</pre></div>
</div>
<p>It can also be used by passing a function and <code class="docutils literal notranslate"><span class="pre">*args</span></code> and <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>,
in which case it will ensure calling <code class="docutils literal notranslate"><span class="pre">func(*args,</span> <span class="pre">**kwargs)</span></code> produces one of
the warnings types above. The return value is the return value of the function.</p>
<p>In the context manager form you may use the keyword argument <code class="docutils literal notranslate"><span class="pre">match</span></code> to assert
that the warning matches a text or regex.</p>
<p>The context manager produces a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">warnings.WarningMessage</span></code> objects,
one for each warning raised.</p>
</dd></dl>

</section>
<section id="pytest-register-assert-rewrite">
<h3>pytest.register_assert_rewrite<a class="headerlink" href="#pytest-register-assert-rewrite" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/writing_plugins.html#assertion-rewriting"><span class="std std-ref">断言重写</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.register_assert_rewrite">
<span class="sig-name descname"><span class="pre">register_assert_rewrite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/assertion.html#register_assert_rewrite"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.register_assert_rewrite" title="Link to this definition">¶</a></dt>
<dd><p>Register one or more module names to be rewritten on import.</p>
<p>This function will make sure that this module or all modules inside
the package will get their assert statements rewritten.
Thus you should make sure to call this before the module is
actually imported, usually in your __init__.py if you are a plugin
using a package.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>names</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The module names to register.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="pytest-warns">
<h3>pytest.warns<a class="headerlink" href="#pytest-warns" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/capture-warnings.html#assertwarnings"><span class="std std-ref">使用 warns 函数断言警告</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.warns">
<em class="property"><span class="pre">with</span> </em><span class="sig-name descname"><span class="pre">warns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">expected_warning:</span> <span class="pre">type[Warning]</span> <span class="pre">|</span> <span class="pre">tuple[type[Warning],</span> <span class="pre">...]</span> <span class="pre">=</span> <span class="pre">&lt;class</span> <span class="pre">'Warning'&gt;,</span> <span class="pre">*,</span> <span class="pre">match:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">~typing.Pattern[str]</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">WarningsChecker</span></span></span><a class="reference internal" href="../_modules/_pytest/recwarn.html#warns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.warns" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py">
<em class="property"><span class="pre">with</span> </em><span class="sig-name descname"><span class="pre">warns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_warning</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><span class="pre">type</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Warning" title="(in Python v3.13)"><span class="pre">Warning</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><span class="pre">type</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Warning" title="(in Python v3.13)"><span class="pre">Warning</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">T</span></span></span></dt>
<dd><p>Assert that code raises a particular class of warning.</p>
<p>Specifically, the parameter <code class="docutils literal notranslate"><span class="pre">expected_warning</span></code> can be a warning class or tuple
of warning classes, and the code inside the <code class="docutils literal notranslate"><span class="pre">with</span></code> block must issue at least one
warning of that class or classes.</p>
<p>This helper produces a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">warnings.WarningMessage</span></code> objects, one for
each warning emitted (regardless of whether it is an <code class="docutils literal notranslate"><span class="pre">expected_warning</span></code> or not).
Since pytest 8.0, unmatched warnings are also re-emitted when the context closes.</p>
<p>This function can be used as a context manager:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">RuntimeWarning</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;my warning&quot;</span><span class="p">,</span> <span class="ne">RuntimeWarning</span><span class="p">)</span>
</pre></div>
</div>
<p>In the context manager form you may use the keyword argument <code class="docutils literal notranslate"><span class="pre">match</span></code> to assert
that the warning matches a text or regex:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s1">&#39;must be 0 or None&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;value must be 0 or None&quot;</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;must be \d+$&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;value must be 42&quot;</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">):</span>  <span class="c1"># catch re-emitted warning</span>
<span class="gp">... </span>    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;must be \d+$&#39;</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;this is not here&quot;</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">  </span><span class="c">...</span>
<span class="gr">Failed</span>: <span class="n">DID NOT WARN. No warnings of type ...UserWarning... were emitted...</span>
</pre></div>
</div>
<p><strong>Using with</strong> <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code></p>
<p>When using <a class="reference internal" href="#pytest-mark-parametrize-ref"><span class="std std-ref">pytest.mark.parametrize</span></a> it is possible to parametrize tests
such that some runs raise a warning and others do not.</p>
<p>This could be achieved in the same way as with exceptions, see
<a class="reference internal" href="../example/parametrize.html#parametrizing-conditional-raising"><span class="std std-ref">参数化条件提升</span></a> for an example.</p>
</dd></dl>

</section>
<section id="pytest-freeze-includes">
<h3>pytest.freeze_includes<a class="headerlink" href="#pytest-freeze-includes" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../example/simple.html#freezing-pytest"><span class="std std-ref">冻结 pytest</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.freeze_includes">
<span class="sig-name descname"><span class="pre">freeze_includes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/freeze_support.html#freeze_includes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.freeze_includes" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of module names used by pytest that should be
included by cx_freeze.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</section>
</section>
<section id="marks">
<span id="marks-ref"></span><h2>Marks<a class="headerlink" href="#marks" title="Link to this heading">¶</a></h2>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-3-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-3-3-0" name="3-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-3-3-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-1" name="3-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-3-3-0" class="sphinx-tabs-panel" id="panel-3-3-0" name="3-0" role="tabpanel" tabindex="0"><p>标记可以用于为 <a href="#id3"><span class="problematic" id="id4">*</span></a>测试函数*（但不能用于 fixtures）应用元数据，这些元数据可以被 fixtures 或插件访问。</p>
</div><div aria-labelledby="tab-3-3-1" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-1" name="3-1" role="tabpanel" tabindex="0"><p>Marks can be used to apply metadata to <em>test functions</em> (but not fixtures), which can then be accessed by fixtures or plugins.</p>
</div></div>
<section id="pytest-mark-filterwarnings">
<span id="pytest-mark-filterwarnings-ref"></span><h3>pytest.mark.filterwarnings<a class="headerlink" href="#pytest-mark-filterwarnings" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-4-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-4-4-0" name="4-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-4-4-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-1" name="4-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-4-4-0" class="sphinx-tabs-panel" id="panel-4-4-0" name="4-0" role="tabpanel" tabindex="0"><p><strong>教程</strong>: <a class="reference internal" href="../how-to/capture-warnings.html#filterwarnings"><span class="std std-ref">&#64;pytest.mark.filterwarnings</span></a></p>
<p>为标记的测试项添加警告过滤器。</p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.mark.filterwarnings">
<span class="sig-prename descclassname"><span class="pre">pytest.mark.</span></span><span class="sig-name descname"><span class="pre">filterwarnings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.mark.filterwarnings" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – <p>一个 <em>警告规格字符串</em>，由元组 <code class="docutils literal notranslate"><span class="pre">(action,</span> <span class="pre">message,</span> <span class="pre">category,</span> <span class="pre">module,</span> <span class="pre">lineno)</span></code> 的内容组成，
这些内容在 Python 文档的 <a class="reference external" href="https://docs.python.org/3/library/warnings.html#warning-filter" title="(in Python v3.13)"><span>The Warnings Filter</span></a> 部分中有说明，用 <code class="docutils literal notranslate"><span class="pre">&quot;:&quot;</span></code> 分隔。可选字段可以省略。
传递用于过滤的模块名称不会进行正则表达式转义。</p>
<p>例如:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore:.*usage will be deprecated.*:DeprecationWarning&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">():</span> <span class="o">...</span>
</pre></div>
</div>
</p>
</dd>
</dl>
</dd></dl>

</div><div aria-labelledby="tab-4-4-1" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-1" name="4-1" role="tabpanel" tabindex="0"><p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/capture-warnings.html#filterwarnings"><span class="std std-ref">&#64;pytest.mark.filterwarnings</span></a></p>
<p>Add warning filters to marked test items.</p>
<dl class="py function">
<dt class="sig sig-object py" id="id0">
<span class="sig-prename descclassname"><span class="pre">pytest.mark.</span></span><span class="sig-name descname"><span class="pre">filterwarnings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id0" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – <p>A <em>warning specification string</em>, which is composed of contents of the tuple <code class="docutils literal notranslate"><span class="pre">(action,</span> <span class="pre">message,</span> <span class="pre">category,</span> <span class="pre">module,</span> <span class="pre">lineno)</span></code>
as specified in <a class="reference external" href="https://docs.python.org/3/library/warnings.html#warning-filter" title="(in Python v3.13)"><span>The Warnings Filter</span></a> section of
the Python documentation, separated by <code class="docutils literal notranslate"><span class="pre">&quot;:&quot;</span></code>. Optional fields can be omitted.
Module names passed for filtering are not regex-escaped.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore:.*usage will be deprecated.*:DeprecationWarning&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">():</span> <span class="o">...</span>
</pre></div>
</div>
</p>
</dd>
</dl>
</dd></dl>

</div></div>
</section>
<section id="pytest-mark-parametrize">
<span id="pytest-mark-parametrize-ref"></span><h3>pytest.mark.parametrize<a class="headerlink" href="#pytest-mark-parametrize" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-5-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-5-5-0" name="5-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-5-5-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-5-5-1" name="5-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-5-5-0" class="sphinx-tabs-panel" id="panel-5-5-0" name="5-0" role="tabpanel" tabindex="0"><p><strong>教程</strong>: <a class="reference internal" href="../how-to/parametrize.html#parametrize"><span class="std std-ref">如何参数化fixtures和测试函数</span></a></p>
<p>此标记与 <a class="reference internal" href="#pytest.Metafunc.parametrize" title="pytest.Metafunc.parametrize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pytest.Metafunc.parametrize()</span></code></a> 的签名相同；请参见该部分。</p>
</div><div aria-labelledby="tab-5-5-1" class="sphinx-tabs-panel" hidden="true" id="panel-5-5-1" name="5-1" role="tabpanel" tabindex="0"><p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/parametrize.html#parametrize"><span class="std std-ref">如何参数化fixtures和测试函数</span></a></p>
<p>This mark has the same signature as <a class="reference internal" href="#pytest.Metafunc.parametrize" title="pytest.Metafunc.parametrize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pytest.Metafunc.parametrize()</span></code></a>; see there.</p>
</div></div>
</section>
<section id="pytest-mark-skip">
<span id="pytest-mark-skip-ref"></span><h3>pytest.mark.skip<a class="headerlink" href="#pytest-mark-skip" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-6-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-6-6-0" name="6-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-6-6-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-6-6-1" name="6-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-6-6-0" class="sphinx-tabs-panel" id="panel-6-6-0" name="6-0" role="tabpanel" tabindex="0"><p><strong>教程</strong>: <a class="reference internal" href="../how-to/skipping.html#skip"><span class="std std-ref">跳过测试函数</span></a></p>
<p>无条件跳过测试函数。</p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.mark.skip">
<span class="sig-prename descclassname"><span class="pre">pytest.mark.</span></span><span class="sig-name descname"><span class="pre">skip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.mark.skip" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – 跳过测试函数的原因。</p>
</dd>
</dl>
</dd></dl>

</div><div aria-labelledby="tab-6-6-1" class="sphinx-tabs-panel" hidden="true" id="panel-6-6-1" name="6-1" role="tabpanel" tabindex="0"><p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/skipping.html#skip"><span class="std std-ref">跳过测试函数</span></a></p>
<p>Unconditionally skip a test function.</p>
<dl class="py function">
<dt class="sig sig-object py" id="id5">
<span class="sig-prename descclassname"><span class="pre">pytest.mark.</span></span><span class="sig-name descname"><span class="pre">skip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id5" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Reason why the test function is being skipped.</p>
</dd>
</dl>
</dd></dl>

</div></div>
</section>
<section id="pytest-mark-skipif">
<span id="pytest-mark-skipif-ref"></span><h3>pytest.mark.skipif<a class="headerlink" href="#pytest-mark-skipif" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-7-7-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-7-7-0" name="7-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-7-7-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-7-7-1" name="7-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-7-7-0" class="sphinx-tabs-panel" id="panel-7-7-0" name="7-0" role="tabpanel" tabindex="0"><p><strong>教程</strong>: <a class="reference internal" href="../how-to/skipping.html#skipif"><span class="std std-ref">跳过测试函数</span></a></p>
<p>如果条件为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，则跳过测试函数。</p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.mark.skipif">
<span class="sig-prename descclassname"><span class="pre">pytest.mark.</span></span><span class="sig-name descname"><span class="pre">skipif</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.mark.skipif" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>condition</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – 如果条件应该被跳过则为 <code class="docutils literal notranslate"><span class="pre">True/False</span></code>，或者是一个 <a class="reference internal" href="../historical-notes.html#string-conditions"><span class="std std-ref">条件字符串</span></a>。</p></li>
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – 跳过测试函数的原因。</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div><div aria-labelledby="tab-7-7-1" class="sphinx-tabs-panel" hidden="true" id="panel-7-7-1" name="7-1" role="tabpanel" tabindex="0"><p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/skipping.html#skipif"><span class="std std-ref">跳过测试函数</span></a></p>
<p>Skip a test function if a condition is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="id6">
<span class="sig-prename descclassname"><span class="pre">pytest.mark.</span></span><span class="sig-name descname"><span class="pre">skipif</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id6" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>condition</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – <code class="docutils literal notranslate"><span class="pre">True/False</span></code> if the condition should be skipped or a <a class="reference internal" href="../historical-notes.html#string-conditions"><span class="std std-ref">condition string</span></a>.</p></li>
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Reason why the test function is being skipped.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div></div>
</section>
<section id="pytest-mark-usefixtures">
<span id="pytest-mark-usefixtures-ref"></span><h3>pytest.mark.usefixtures<a class="headerlink" href="#pytest-mark-usefixtures" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-8-8-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-8-8-0" name="8-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-8-8-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-8-8-1" name="8-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-8-8-0" class="sphinx-tabs-panel" id="panel-8-8-0" name="8-0" role="tabpanel" tabindex="0"><p><strong>教程</strong>: <a class="reference internal" href="../how-to/fixtures.html#usefixtures"><span class="std std-ref">在类和模块中通过 usefixtures 使用 fixture</span></a></p>
<p>将测试函数标记为使用给定的 fixture 名称。</p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.mark.usefixtures">
<span class="sig-prename descclassname"><span class="pre">pytest.mark.</span></span><span class="sig-name descname"><span class="pre">usefixtures</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.mark.usefixtures" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> – 要使用的 fixture 名称，以字符串形式表示。</p>
</dd>
</dl>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>在钩子中使用 <code class="docutils literal notranslate"><span class="pre">usefixtures</span></code> 时，仅在测试设置之前应用于测试函数时可以加载 fixtures
（例如在 <code class="docutils literal notranslate"><span class="pre">pytest_collection_modifyitems</span></code> 钩子中）。</p>
<p>还要注意，此标记对 <strong>fixtures</strong> 的应用没有效果。</p>
</div>
</div><div aria-labelledby="tab-8-8-1" class="sphinx-tabs-panel" hidden="true" id="panel-8-8-1" name="8-1" role="tabpanel" tabindex="0"><p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/fixtures.html#usefixtures"><span class="std std-ref">在类和模块中通过 usefixtures 使用 fixture</span></a></p>
<p>Mark a test function as using the given fixture names.</p>
<dl class="py function">
<dt class="sig sig-object py" id="id7">
<span class="sig-prename descclassname"><span class="pre">pytest.mark.</span></span><span class="sig-name descname"><span class="pre">usefixtures</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id7" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> – The names of the fixture to use, as strings.</p>
</dd>
</dl>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">usefixtures</span></code> in hooks, it can only load fixtures when applied to a test function before test setup
(for example in the <code class="docutils literal notranslate"><span class="pre">pytest_collection_modifyitems</span></code> hook).</p>
<p>Also note that this mark has no effect when applied to <strong>fixtures</strong>.</p>
</div>
</div></div>
</section>
<section id="pytest-mark-xfail">
<span id="pytest-mark-xfail-ref"></span><h3>pytest.mark.xfail<a class="headerlink" href="#pytest-mark-xfail" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-9-9-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-9-9-0" name="9-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-9-9-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-9-9-1" name="9-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-9-9-0" class="sphinx-tabs-panel" id="panel-9-9-0" name="9-0" role="tabpanel" tabindex="0"><p><strong>教程</strong>: <a class="reference internal" href="../how-to/skipping.html#xfail"><span class="std std-ref">XFail：将测试函数标记为预期失败</span></a></p>
<p>将测试函数标记为 <em>预期失败</em>。</p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.mark.xfail">
<span class="sig-prename descclassname"><span class="pre">pytest.mark.</span></span><span class="sig-name descname"><span class="pre">xfail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raises</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">xfail_strict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.mark.xfail" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>condition</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – 标记测试函数为 xfail 的条件（<code class="docutils literal notranslate"><span class="pre">True/False</span></code> 或一个
<a class="reference internal" href="../historical-notes.html#string-conditions"><span class="std std-ref">条件字符串</span></a>）。如果是 <code class="docutils literal notranslate"><span class="pre">bool</span></code>，还必须指定 <code class="docutils literal notranslate"><span class="pre">reason</span></code> （见 <a class="reference internal" href="../historical-notes.html#string-conditions"><span class="std std-ref">条件字符串</span></a>）。</p></li>
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – 测试函数被标记为 xfail 的原因。</p></li>
<li><p><strong>raises</strong> (Type[<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.13)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Exception</span></code></a>]) – 预期由测试函数引发的异常类（或类元组）；其他异常将导致测试失败。
注意，传入类的子类也会匹配（类似于 <code class="docutils literal notranslate"><span class="pre">except</span></code> 语句的工作方式）。</p></li>
<li><p><strong>run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – 测试函数是否应该实际执行。如果为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，函数将始终 xfail，并且不会执行（如果函数发生段错误，这很有用）。</p></li>
<li><p><strong>strict</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – <ul>
<li><p>如果为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，则如果函数失败，将在终端输出中显示为 <code class="docutils literal notranslate"><span class="pre">xfailed</span></code>，如果函数通过，则显示为 <code class="docutils literal notranslate"><span class="pre">xpass</span></code>。在这两种情况下，这不会导致测试套件整体失败。这对于标记 <em>不稳定</em> 测试（随机失败的测试）特别有用，以便稍后处理。</p></li>
<li><p>如果为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，则如果函数失败，将在终端输出中显示为 <code class="docutils literal notranslate"><span class="pre">xfailed</span></code>，但如果意外通过，则将 <strong>导致</strong> 测试套件失败。这对于标记总是失败的函数特别有用，如果它们意外开始通过，应该有明确的指示（例如，库的新版本修复了已知的 bug）。</p></li>
</ul>
<p>默认为 <a class="reference internal" href="#confval-43"><code class="xref std std-confval docutils literal notranslate"><span class="pre">xfail_strict</span></code></a>，默认值为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div><div aria-labelledby="tab-9-9-1" class="sphinx-tabs-panel" hidden="true" id="panel-9-9-1" name="9-1" role="tabpanel" tabindex="0"><p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/skipping.html#xfail"><span class="std std-ref">XFail：将测试函数标记为预期失败</span></a></p>
<p>Marks a test function as <em>expected to fail</em>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="id8">
<span class="sig-prename descclassname"><span class="pre">pytest.mark.</span></span><span class="sig-name descname"><span class="pre">xfail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raises</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">xfail_strict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id8" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>condition</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – Condition for marking the test function as xfail (<code class="docutils literal notranslate"><span class="pre">True/False</span></code> or a
<a class="reference internal" href="../historical-notes.html#string-conditions"><span class="std std-ref">condition string</span></a>). If a <code class="docutils literal notranslate"><span class="pre">bool</span></code>, you also have
to specify <code class="docutils literal notranslate"><span class="pre">reason</span></code> (see <a class="reference internal" href="../historical-notes.html#string-conditions"><span class="std std-ref">condition string</span></a>).</p></li>
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Reason why the test function is marked as xfail.</p></li>
<li><p><strong>raises</strong> (Type[<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.13)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Exception</span></code></a>]) – Exception class (or tuple of classes) expected to be raised by the test function; other exceptions will fail the test.
Note that subclasses of the classes passed will also result in a match (similar to how the <code class="docutils literal notranslate"><span class="pre">except</span></code> statement works).</p></li>
<li><p><strong>run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether the test function should actually be executed. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, the function will always xfail and will
not be executed (useful if a function is segfaulting).</p></li>
<li><p><strong>strict</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – <ul>
<li><p>If <code class="docutils literal notranslate"><span class="pre">False</span></code> the function will be shown in the terminal output as <code class="docutils literal notranslate"><span class="pre">xfailed</span></code> if it fails
and as <code class="docutils literal notranslate"><span class="pre">xpass</span></code> if it passes. In both cases this will not cause the test suite to fail as a whole. This
is particularly useful to mark <em>flaky</em> tests (tests that fail at random) to be tackled later.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the function will be shown in the terminal output as <code class="docutils literal notranslate"><span class="pre">xfailed</span></code> if it fails, but if it
unexpectedly passes then it will <strong>fail</strong> the test suite. This is particularly useful to mark functions
that are always failing and there should be a clear indication if they unexpectedly start to pass (for example
a new release of a library fixes a known bug).</p></li>
</ul>
<p>Defaults to <a class="reference internal" href="#confval-43"><code class="xref std std-confval docutils literal notranslate"><span class="pre">xfail_strict</span></code></a>, which is <code class="docutils literal notranslate"><span class="pre">False</span></code> by default.</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div></div>
</section>
<section id="id9">
<h3>自定义marks<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h3>
<p><strong>Custom marks</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-10-10-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-10-10-0" name="10-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-10-10-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-10-10-1" name="10-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-10-10-0" class="sphinx-tabs-panel" id="panel-10-10-0" name="10-0" role="tabpanel" tabindex="0"><p>标记是使用工厂对象 <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code> 动态创建的，并作为装饰器应用。</p>
<p>例如:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">timeout</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;slow&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;thread&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span> <span class="o">...</span>
</pre></div>
</div>
<p>将创建并附加一个 <a class="reference internal" href="#pytest.Mark" title="pytest.Mark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mark</span></code></a> 对象到收集的
<a class="reference internal" href="#pytest.Item" title="pytest.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">Item</span></code></a>，然后可以通过 fixtures 或 hooks 使用
<a class="reference internal" href="#pytest.nodes.Node.iter_markers" title="_pytest.nodes.Node.iter_markers"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Node.iter_markers</span></code></a> 访问该对象。 <code class="docutils literal notranslate"><span class="pre">mark</span></code> 对象将具有以下属性：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mark</span><span class="o">.</span><span class="n">args</span> <span class="o">==</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;slow&quot;</span><span class="p">)</span>
<span class="n">mark</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;thread&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>使用多个自定义标记的示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">timeout</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;slow&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;thread&quot;</span><span class="p">)</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">slow</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span> <span class="o">...</span>
</pre></div>
</div>
<p>当使用 <a class="reference internal" href="#pytest.nodes.Node.iter_markers" title="_pytest.nodes.Node.iter_markers"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Node.iter_markers</span></code></a> 或
<a class="reference internal" href="#pytest.nodes.Node.iter_markers_with_node" title="_pytest.nodes.Node.iter_markers_with_node"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Node.iter_markers_with_node</span></code></a> 处理多个标记时，离函数最近的标记将优先被迭代。上述示例将导致 <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.slow</span></code> 紧接着 <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.timeout(...)</span></code>。</p>
</div><div aria-labelledby="tab-10-10-1" class="sphinx-tabs-panel" hidden="true" id="panel-10-10-1" name="10-1" role="tabpanel" tabindex="0"><p>Marks are created dynamically using the factory object <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code> and applied as a decorator.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">timeout</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;slow&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;thread&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span> <span class="o">...</span>
</pre></div>
</div>
<p>Will create and attach a <a class="reference internal" href="#pytest.Mark" title="pytest.Mark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mark</span></code></a> object to the collected
<a class="reference internal" href="#pytest.Item" title="pytest.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">Item</span></code></a>, which can then be accessed by fixtures or hooks with
<a class="reference internal" href="#pytest.nodes.Node.iter_markers" title="_pytest.nodes.Node.iter_markers"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Node.iter_markers</span></code></a>. The <code class="docutils literal notranslate"><span class="pre">mark</span></code> object will have the following attributes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mark</span><span class="o">.</span><span class="n">args</span> <span class="o">==</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;slow&quot;</span><span class="p">)</span>
<span class="n">mark</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;thread&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>Example for using multiple custom markers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">timeout</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;slow&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;thread&quot;</span><span class="p">)</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">slow</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span> <span class="o">...</span>
</pre></div>
</div>
<p>When <a class="reference internal" href="#pytest.nodes.Node.iter_markers" title="_pytest.nodes.Node.iter_markers"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Node.iter_markers</span></code></a> or <a class="reference internal" href="#pytest.nodes.Node.iter_markers_with_node" title="_pytest.nodes.Node.iter_markers_with_node"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Node.iter_markers_with_node</span></code></a> is used with multiple markers, the marker closest to the function will be iterated over first. The above example will result in <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.slow</span></code> followed by <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.timeout(...)</span></code>.</p>
</div></div>
</section>
</section>
<section id="fixtures">
<span id="fixtures-api"></span><h2>Fixtures<a class="headerlink" href="#fixtures" title="Link to this heading">¶</a></h2>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-11-11-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-11-11-0" name="11-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-11-11-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-11-11-1" name="11-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-11-11-0" class="sphinx-tabs-panel" id="panel-11-11-0" name="11-0" role="tabpanel" tabindex="0"><p><strong>教程</strong>: <a class="reference internal" href="fixtures.html#fixture"><span class="std std-ref">Fixtures 参考</span></a></p>
<p>Fixtures 通过将其声明为参数名，由测试函数或其他 fixtures 请求。</p>
<p>需要 fixture 的测试示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_output</span><span class="p">(</span><span class="n">capsys</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
    <span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">capsys</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">out</span> <span class="o">==</span> <span class="s2">&quot;hello</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>需要另一个 fixture 的 fixture 示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">db_session</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">tmp_path</span> <span class="o">/</span> <span class="s2">&quot;db.file&quot;</span>
    <span class="k">return</span> <span class="n">connect</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
</pre></div>
</div>
<p>有关更多详细信息，请参阅完整的 <a class="reference internal" href="fixtures.html#fixture"><span class="std std-ref">fixtures 文档</span></a>。</p>
</div><div aria-labelledby="tab-11-11-1" class="sphinx-tabs-panel" hidden="true" id="panel-11-11-1" name="11-1" role="tabpanel" tabindex="0"><p><strong>Tutorial</strong>: <a class="reference internal" href="fixtures.html#fixture"><span class="std std-ref">Fixtures 参考</span></a></p>
<p>Fixtures are requested by test functions or other fixtures by declaring them as argument names.</p>
<p>Example of a test requiring a fixture:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_output</span><span class="p">(</span><span class="n">capsys</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
    <span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">capsys</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">out</span> <span class="o">==</span> <span class="s2">&quot;hello</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Example of a fixture requiring another fixture:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">db_session</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">tmp_path</span> <span class="o">/</span> <span class="s2">&quot;db.file&quot;</span>
    <span class="k">return</span> <span class="n">connect</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
</pre></div>
</div>
<p>For more details, consult the full <a class="reference internal" href="fixtures.html#fixture"><span class="std std-ref">fixtures docs</span></a>.</p>
</div></div>
<section id="pytest-fixture">
<span id="pytest-fixture-api"></span><h3>&#64;pytest.fixture<a class="headerlink" href="#pytest-fixture" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.fixture">
<span class="sig-prename descclassname"><span class="pre">&#64;</span></span><span class="sig-name descname"><span class="pre">fixture</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixture_function</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FixtureFunction</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'session'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'package'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'module'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'class'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'function'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="_pytest.config.Config"><span class="pre">Config</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'session'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'package'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'module'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'class'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'function'</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'function'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><span class="pre">object</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autouse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><span class="pre">object</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><span class="pre">object</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FixtureFunction</span></span></span><a class="reference internal" href="../_modules/_pytest/fixtures.html#fixture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.fixture" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">&#64;</span></span><span class="sig-name descname"><span class="pre">fixture</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixture_function</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'session'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'package'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'module'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'class'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'function'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="_pytest.config.Config"><span class="pre">Config</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'session'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'package'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'module'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'class'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'function'</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'function'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><span class="pre">object</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autouse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><span class="pre">object</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><span class="pre">Callable</span></a><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><span class="pre">object</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FixtureFunctionMarker</span></span></span></dt>
<dd><p>Decorator to mark a fixture factory function.</p>
<p>This decorator can be used, with or without parameters, to define a
fixture function.</p>
<p>The name of the fixture function can later be referenced to cause its
invocation ahead of running tests: test modules or classes can use the
<code class="docutils literal notranslate"><span class="pre">pytest.mark.usefixtures(fixturename)</span></code> marker.</p>
<p>Test functions can directly use fixture names as input arguments in which
case the fixture instance returned from the fixture function will be
injected.</p>
<p>Fixtures can provide their values to test functions using <code class="docutils literal notranslate"><span class="pre">return</span></code> or
<code class="docutils literal notranslate"><span class="pre">yield</span></code> statements. When using <code class="docutils literal notranslate"><span class="pre">yield</span></code> the code block after the
<code class="docutils literal notranslate"><span class="pre">yield</span></code> statement is executed as teardown code regardless of the test
outcome, and must yield exactly once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scope</strong> – <p>The scope for which this fixture is shared; one of <code class="docutils literal notranslate"><span class="pre">&quot;function&quot;</span></code>
(default), <code class="docutils literal notranslate"><span class="pre">&quot;class&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;module&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;package&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;session&quot;</span></code>.</p>
<p>This parameter may also be a callable which receives <code class="docutils literal notranslate"><span class="pre">(fixture_name,</span> <span class="pre">config)</span></code>
as parameters, and must return a <code class="docutils literal notranslate"><span class="pre">str</span></code> with one of the values mentioned above.</p>
<p>See <a class="reference internal" href="../how-to/fixtures.html#dynamic-scope"><span class="std std-ref">动态 scope</span></a> in the docs for more information.</p>
</p></li>
<li><p><strong>params</strong> – An optional list of parameters which will cause multiple invocations
of the fixture function and all of the tests using it. The current
parameter is available in <code class="docutils literal notranslate"><span class="pre">request.param</span></code>.</p></li>
<li><p><strong>autouse</strong> – If True, the fixture func is activated for all tests that can see it.
If False (the default), an explicit reference is needed to activate
the fixture.</p></li>
<li><p><strong>ids</strong> – Sequence of ids each corresponding to the params so that they are
part of the test id. If no ids are provided they will be generated
automatically from the params.</p></li>
<li><p><strong>name</strong> – The name of the fixture. This defaults to the name of the decorated
function. If a fixture is used in the same module in which it is
defined, the function name of the fixture will be shadowed by the
function arg that requests the fixture; one way to resolve this is to
name the decorated function <code class="docutils literal notranslate"><span class="pre">fixture_&lt;fixturename&gt;</span></code> and then use
<code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture(name='&lt;fixturename&gt;')</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="capfd">
<span id="std-fixture-capfd"></span><h3>capfd<a class="headerlink" href="#capfd" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/capture-stdout-stderr.html#captures"><span class="std std-ref">如何捕获 stdout/stderr 输出</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.capture.capfd">
<span class="sig-name descname"><span class="pre">capfd</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/capture.html#capfd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.capture.capfd" title="Link to this definition">¶</a></dt>
<dd><p>Enable text capturing of writes to file descriptors <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
<p>The captured output is made available via <code class="docutils literal notranslate"><span class="pre">capfd.readouterr()</span></code> method
calls, which return a <code class="docutils literal notranslate"><span class="pre">(out,</span> <span class="pre">err)</span></code> namedtuple.
<code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">err</span></code> will be <code class="docutils literal notranslate"><span class="pre">text</span></code> objects.</p>
<p>Returns an instance of <a class="reference internal" href="#pytest.CaptureFixture" title="pytest.CaptureFixture"><code class="xref py py-class docutils literal notranslate"><span class="pre">CaptureFixture[str]</span></code></a>.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_system_echo</span><span class="p">(</span><span class="n">capfd</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;echo &quot;hello&quot;&#39;</span><span class="p">)</span>
    <span class="n">captured</span> <span class="o">=</span> <span class="n">capfd</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">captured</span><span class="o">.</span><span class="n">out</span> <span class="o">==</span> <span class="s2">&quot;hello</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

</section>
<section id="capfdbinary">
<span id="std-fixture-capfdbinary"></span><h3>capfdbinary<a class="headerlink" href="#capfdbinary" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/capture-stdout-stderr.html#captures"><span class="std std-ref">如何捕获 stdout/stderr 输出</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.capture.capfdbinary">
<span class="sig-name descname"><span class="pre">capfdbinary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/capture.html#capfdbinary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.capture.capfdbinary" title="Link to this definition">¶</a></dt>
<dd><p>Enable bytes capturing of writes to file descriptors <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
<p>The captured output is made available via <code class="docutils literal notranslate"><span class="pre">capfd.readouterr()</span></code> method
calls, which return a <code class="docutils literal notranslate"><span class="pre">(out,</span> <span class="pre">err)</span></code> namedtuple.
<code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">err</span></code> will be <code class="docutils literal notranslate"><span class="pre">byte</span></code> objects.</p>
<p>Returns an instance of <a class="reference internal" href="#pytest.CaptureFixture" title="pytest.CaptureFixture"><code class="xref py py-class docutils literal notranslate"><span class="pre">CaptureFixture[bytes]</span></code></a>.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_system_echo</span><span class="p">(</span><span class="n">capfdbinary</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;echo &quot;hello&quot;&#39;</span><span class="p">)</span>
    <span class="n">captured</span> <span class="o">=</span> <span class="n">capfdbinary</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">captured</span><span class="o">.</span><span class="n">out</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;hello</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

</section>
<section id="caplog">
<span id="std-fixture-caplog"></span><h3>caplog<a class="headerlink" href="#caplog" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.logging.caplog">
<span class="sig-name descname"><span class="pre">caplog</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/logging.html#caplog"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.logging.caplog" title="Link to this definition">¶</a></dt>
<dd><p>Access and control log capturing.</p>
<p>Captured logs are available through the following properties/methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="n">caplog</span><span class="o">.</span><span class="n">messages</span>        <span class="o">-&gt;</span> <span class="nb">list</span> <span class="n">of</span> <span class="nb">format</span><span class="o">-</span><span class="n">interpolated</span> <span class="n">log</span> <span class="n">messages</span>
<span class="o">*</span> <span class="n">caplog</span><span class="o">.</span><span class="n">text</span>            <span class="o">-&gt;</span> <span class="n">string</span> <span class="n">containing</span> <span class="n">formatted</span> <span class="n">log</span> <span class="n">output</span>
<span class="o">*</span> <span class="n">caplog</span><span class="o">.</span><span class="n">records</span>         <span class="o">-&gt;</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">logging</span><span class="o">.</span><span class="n">LogRecord</span> <span class="n">instances</span>
<span class="o">*</span> <span class="n">caplog</span><span class="o">.</span><span class="n">record_tuples</span>   <span class="o">-&gt;</span> <span class="nb">list</span> <span class="n">of</span> <span class="p">(</span><span class="n">logger_name</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> <span class="n">tuples</span>
<span class="o">*</span> <span class="n">caplog</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>         <span class="o">-&gt;</span> <span class="n">clear</span> <span class="n">captured</span> <span class="n">records</span> <span class="ow">and</span> <span class="n">formatted</span> <span class="n">log</span> <span class="n">output</span> <span class="n">string</span>
</pre></div>
</div>
<p>Returns a <a class="reference internal" href="#pytest.LogCaptureFixture" title="pytest.LogCaptureFixture"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.LogCaptureFixture</span></code></a> instance.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.LogCaptureFixture">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">LogCaptureFixture</span></span><a class="reference internal" href="../_modules/_pytest/logging.html#LogCaptureFixture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LogCaptureFixture" title="Link to this definition">¶</a></dt>
<dd><p>Provides access and control of log capturing.</p>
<dl class="field-list simple">
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="pytest.LogCaptureFixture.handler">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">handler</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LogCaptureHandler</span></em><a class="headerlink" href="#pytest.LogCaptureFixture.handler" title="Link to this definition">¶</a></dt>
<dd><p>Get the logging handler used by the fixture.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.LogCaptureFixture.get_records">
<span class="sig-name descname"><span class="pre">get_records</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">when</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/logging.html#LogCaptureFixture.get_records"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LogCaptureFixture.get_records" title="Link to this definition">¶</a></dt>
<dd><p>Get the logging records for one of the possible test phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>when</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><em>Literal</em></a><em>[</em><em>'setup'</em><em>, </em><em>'call'</em><em>, </em><em>'teardown'</em><em>]</em>) – Which test phase to obtain the records from.
Valid values are: “setup”, “call” and “teardown”.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of captured records at the given stage.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.LogRecord" title="(in Python v3.13)"><em>LogRecord</em></a>]</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.4.</span></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.LogCaptureFixture.text">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">text</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.LogCaptureFixture.text" title="Link to this definition">¶</a></dt>
<dd><p>The formatted log text.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.LogCaptureFixture.records">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">records</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.LogRecord" title="(in Python v3.13)"><span class="pre">LogRecord</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.LogCaptureFixture.records" title="Link to this definition">¶</a></dt>
<dd><p>The list of log records.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.LogCaptureFixture.record_tuples">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">record_tuples</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.LogCaptureFixture.record_tuples" title="Link to this definition">¶</a></dt>
<dd><p>A list of a stripped down version of log records intended
for use in assertion comparison.</p>
<p>The format of the tuple is:</p>
<blockquote>
<div><p>(logger_name, log_level, message)</p>
</div></blockquote>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.LogCaptureFixture.messages">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">messages</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.LogCaptureFixture.messages" title="Link to this definition">¶</a></dt>
<dd><p>A list of format-interpolated log messages.</p>
<p>Unlike ‘records’, which contains the format string and parameters for
interpolation, log messages in this list are all interpolated.</p>
<p>Unlike ‘text’, which contains the output from the handler, log
messages in this list are unadorned with levels, timestamps, etc,
making exact comparisons more reliable.</p>
<p>Note that traceback or stack info (from <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.exception" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.exception()</span></code></a> or
the <code class="docutils literal notranslate"><span class="pre">exc_info</span></code> or <code class="docutils literal notranslate"><span class="pre">stack_info</span></code> arguments to the logging functions) is
not included, as this is added by the formatter in the handler.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.7.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.LogCaptureFixture.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/logging.html#LogCaptureFixture.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LogCaptureFixture.clear" title="Link to this definition">¶</a></dt>
<dd><p>Reset the list of log records and the captured log text.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.LogCaptureFixture.set_level">
<span class="sig-name descname"><span class="pre">set_level</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/logging.html#LogCaptureFixture.set_level"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LogCaptureFixture.set_level" title="Link to this definition">¶</a></dt>
<dd><p>Set the threshold level of a logger for the duration of a test.</p>
<p>Logging messages which are less severe than this level will not be captured.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.4: </span>The levels of the loggers changed by this function will be
restored to their initial values at the end of the test.</p>
</div>
<p>Will enable the requested logging level if it was disabled via <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.disable" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.disable()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The level.</p></li>
<li><p><strong>logger</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – The logger to update. If not given, the root logger.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.LogCaptureFixture.at_level">
<em class="property"><span class="pre">with</span> </em><span class="sig-name descname"><span class="pre">at_level</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/logging.html#LogCaptureFixture.at_level"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LogCaptureFixture.at_level" title="Link to this definition">¶</a></dt>
<dd><p>Context manager that sets the level for capturing of logs. After
the end of the ‘with’ statement the level is restored to its original
value.</p>
<p>Will enable the requested logging level if it was disabled via <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.disable" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.disable()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The level.</p></li>
<li><p><strong>logger</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – The logger to update. If not given, the root logger.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.LogCaptureFixture.filtering">
<em class="property"><span class="pre">with</span> </em><span class="sig-name descname"><span class="pre">filtering</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/logging.html#LogCaptureFixture.filtering"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LogCaptureFixture.filtering" title="Link to this definition">¶</a></dt>
<dd><p>Context manager that temporarily adds the given filter to the caplog’s
<a class="reference internal" href="#pytest.LogCaptureFixture.handler" title="pytest.LogCaptureFixture.handler"><code class="xref py py-meth docutils literal notranslate"><span class="pre">handler()</span></code></a> for the ‘with’ statement block, and removes that filter at the
end of the block.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filter</strong> – A custom <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Filter" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Filter</span></code></a> object.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 7.5.</span></p>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="capsys">
<span id="std-fixture-capsys"></span><h3>capsys<a class="headerlink" href="#capsys" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/capture-stdout-stderr.html#captures"><span class="std std-ref">如何捕获 stdout/stderr 输出</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.capture.capsys">
<span class="sig-name descname"><span class="pre">capsys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/capture.html#capsys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.capture.capsys" title="Link to this definition">¶</a></dt>
<dd><p>Enable text capturing of writes to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>.</p>
<p>The captured output is made available via <code class="docutils literal notranslate"><span class="pre">capsys.readouterr()</span></code> method
calls, which return a <code class="docutils literal notranslate"><span class="pre">(out,</span> <span class="pre">err)</span></code> namedtuple.
<code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">err</span></code> will be <code class="docutils literal notranslate"><span class="pre">text</span></code> objects.</p>
<p>Returns an instance of <a class="reference internal" href="#pytest.CaptureFixture" title="pytest.CaptureFixture"><code class="xref py py-class docutils literal notranslate"><span class="pre">CaptureFixture[str]</span></code></a>.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_output</span><span class="p">(</span><span class="n">capsys</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
    <span class="n">captured</span> <span class="o">=</span> <span class="n">capsys</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">captured</span><span class="o">.</span><span class="n">out</span> <span class="o">==</span> <span class="s2">&quot;hello</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.CaptureFixture">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CaptureFixture</span></span><a class="reference internal" href="../_modules/_pytest/capture.html#CaptureFixture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.CaptureFixture" title="Link to this definition">¶</a></dt>
<dd><p>Object returned by the <a class="reference internal" href="#std-fixture-capsys"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capsys</span></code></a>, <a class="reference internal" href="#std-fixture-capsysbinary"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capsysbinary</span></code></a>,
<a class="reference internal" href="#std-fixture-capfd"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capfd</span></code></a> and <a class="reference internal" href="#std-fixture-capfdbinary"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capfdbinary</span></code></a> fixtures.</p>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.CaptureFixture.readouterr">
<span class="sig-name descname"><span class="pre">readouterr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/capture.html#CaptureFixture.readouterr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.CaptureFixture.readouterr" title="Link to this definition">¶</a></dt>
<dd><p>Read and return the captured output so far, resetting the internal
buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The captured content as a namedtuple with <code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">err</span></code>
string attributes.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>CaptureResult</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.CaptureFixture.disabled">
<em class="property"><span class="pre">with</span> </em><span class="sig-name descname"><span class="pre">disabled</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/capture.html#CaptureFixture.disabled"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.CaptureFixture.disabled" title="Link to this definition">¶</a></dt>
<dd><p>Temporarily disable capturing while inside the <code class="docutils literal notranslate"><span class="pre">with</span></code> block.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="capsysbinary">
<span id="std-fixture-capsysbinary"></span><h3>capsysbinary<a class="headerlink" href="#capsysbinary" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/capture-stdout-stderr.html#captures"><span class="std std-ref">如何捕获 stdout/stderr 输出</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.capture.capsysbinary">
<span class="sig-name descname"><span class="pre">capsysbinary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/capture.html#capsysbinary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.capture.capsysbinary" title="Link to this definition">¶</a></dt>
<dd><p>Enable bytes capturing of writes to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>.</p>
<p>The captured output is made available via <code class="docutils literal notranslate"><span class="pre">capsysbinary.readouterr()</span></code>
method calls, which return a <code class="docutils literal notranslate"><span class="pre">(out,</span> <span class="pre">err)</span></code> namedtuple.
<code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">err</span></code> will be <code class="docutils literal notranslate"><span class="pre">bytes</span></code> objects.</p>
<p>Returns an instance of <a class="reference internal" href="#pytest.CaptureFixture" title="pytest.CaptureFixture"><code class="xref py py-class docutils literal notranslate"><span class="pre">CaptureFixture[bytes]</span></code></a>.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_output</span><span class="p">(</span><span class="n">capsysbinary</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
    <span class="n">captured</span> <span class="o">=</span> <span class="n">capsysbinary</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">captured</span><span class="o">.</span><span class="n">out</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;hello</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

</section>
<section id="config-cache">
<span id="std-fixture-cache"></span><h3>config.cache<a class="headerlink" href="#config-cache" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-12-12-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-12-12-0" name="12-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-12-12-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-12-12-1" name="12-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-12-12-0" class="sphinx-tabs-panel" id="panel-12-12-0" name="12-0" role="tabpanel" tabindex="0"><p><strong>教程</strong>: <a class="reference internal" href="../how-to/cache.html#cache"><span class="std std-ref">如何重新运行失败的测试并在测试运行之间保持状态</span></a></p>
<p><code class="docutils literal notranslate"><span class="pre">config.cache</span></code> 对象允许其他插件和 fixtures 在测试运行之间存储和检索值。要从 fixtures 中访问它，请将 <code class="docutils literal notranslate"><span class="pre">pytestconfig</span></code> 请求到您的 fixture 中，并通过 <code class="docutils literal notranslate"><span class="pre">pytestconfig.cache</span></code> 获取。</p>
<p>在底层, cache 插件使用 <a class="reference external" href="https://docs.python.org/3/library/json.html#module-json" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code></a> 标准库模块的简单 <code class="docutils literal notranslate"><span class="pre">dumps</span></code>/<code class="docutils literal notranslate"><span class="pre">loads</span></code> API。</p>
<p><code class="docutils literal notranslate"><span class="pre">config.cache</span></code> 是 <a class="reference internal" href="#id10" title="pytest.Cache"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Cache</span></code></a> 的一个实例：</p>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Cache">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Cache</span></span><a class="reference internal" href="../_modules/_pytest/cacheprovider.html#Cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Cache" title="Link to this definition">¶</a></dt>
<dd><p>Instance of the <code class="docutils literal notranslate"><span class="pre">cache</span></code> fixture.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">members<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
</div><div aria-labelledby="tab-12-12-1" class="sphinx-tabs-panel" hidden="true" id="panel-12-12-1" name="12-1" role="tabpanel" tabindex="0">
<span id="std-fixture-doctest_namespace"></span><p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/cache.html#cache"><span class="std std-ref">如何重新运行失败的测试并在测试运行之间保持状态</span></a></p>
<p>The <code class="docutils literal notranslate"><span class="pre">config.cache</span></code> object allows other plugins and fixtures
to store and retrieve values across test runs. To access it from fixtures
request <code class="docutils literal notranslate"><span class="pre">pytestconfig</span></code> into your fixture and get it with <code class="docutils literal notranslate"><span class="pre">pytestconfig.cache</span></code>.</p>
<p>Under the hood, the cache plugin uses the simple
<code class="docutils literal notranslate"><span class="pre">dumps</span></code>/<code class="docutils literal notranslate"><span class="pre">loads</span></code> API of the <a class="reference external" href="https://docs.python.org/3/library/json.html#module-json" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code></a> stdlib module.</p>
<p><code class="docutils literal notranslate"><span class="pre">config.cache</span></code> is an instance of <a class="reference internal" href="#id10" title="pytest.Cache"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Cache</span></code></a>:</p>
<dl class="py class">
<dt class="sig sig-object py" id="id10">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Cache</span></span><a class="reference internal" href="../_modules/_pytest/cacheprovider.html#Cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id10" title="Link to this definition">¶</a></dt>
<dd><p>Instance of the <code class="docutils literal notranslate"><span class="pre">cache</span></code> fixture.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">members<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
</div></div>
</section>
<section id="doctest-namespace">
<span id="std:fixture-0"></span><h3>doctest_namespace<a class="headerlink" href="#doctest-namespace" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/doctest.html#doctest"><span class="std std-ref">如何运行文档测试</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.doctest.doctest_namespace">
<span class="sig-name descname"><span class="pre">doctest_namespace</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/doctest.html#doctest_namespace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.doctest.doctest_namespace" title="Link to this definition">¶</a></dt>
<dd><p>Fixture that returns a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> that will be injected into the
namespace of doctests.</p>
<p>Usually this fixture is used in conjunction with another <code class="docutils literal notranslate"><span class="pre">autouse</span></code> fixture:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add_np</span><span class="p">(</span><span class="n">doctest_namespace</span><span class="p">):</span>
    <span class="n">doctest_namespace</span><span class="p">[</span><span class="s2">&quot;np&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span>
</pre></div>
</div>
<p>For more details: <a class="reference internal" href="../how-to/doctest.html#doctest-namespace"><span class="std std-ref">‘doctest_namespace’ fixture</span></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</section>
<section id="monkeypatch">
<span id="std-fixture-monkeypatch"></span><h3>monkeypatch<a class="headerlink" href="#monkeypatch" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/monkeypatch.html#monkeypatching"><span class="std std-ref">如何使用 猴子补丁/mock 模块和环境</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.monkeypatch.monkeypatch">
<span class="sig-name descname"><span class="pre">monkeypatch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/monkeypatch.html#monkeypatch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.monkeypatch.monkeypatch" title="Link to this definition">¶</a></dt>
<dd><p>A convenient fixture for monkey-patching.</p>
<p>The fixture provides these methods to modify objects, dictionaries, or
<a class="reference external" href="https://docs.python.org/3/library/os.html#os.environ" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.setattr" title="pytest.MonkeyPatch.setattr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setattr(obj,</span> <span class="pre">name,</span> <span class="pre">value,</span> <span class="pre">raising=True)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.delattr" title="pytest.MonkeyPatch.delattr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.delattr(obj,</span> <span class="pre">name,</span> <span class="pre">raising=True)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.setitem" title="pytest.MonkeyPatch.setitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setitem(mapping,</span> <span class="pre">name,</span> <span class="pre">value)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.delitem" title="pytest.MonkeyPatch.delitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.delitem(obj,</span> <span class="pre">name,</span> <span class="pre">raising=True)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.setenv" title="pytest.MonkeyPatch.setenv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setenv(name,</span> <span class="pre">value,</span> <span class="pre">prepend=None)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.delenv" title="pytest.MonkeyPatch.delenv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.delenv(name,</span> <span class="pre">raising=True)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.syspath_prepend" title="pytest.MonkeyPatch.syspath_prepend"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.syspath_prepend(path)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.chdir" title="pytest.MonkeyPatch.chdir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.chdir(path)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.context" title="pytest.MonkeyPatch.context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.context()</span></code></a></p></li>
</ul>
<p>All modifications will be undone after the requesting test function or
fixture has finished. The <code class="docutils literal notranslate"><span class="pre">raising</span></code> parameter determines if a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">KeyError</span></code></a>
or <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeError</span></code></a> will be raised if the set/deletion operation does not have the
specified target.</p>
<p>To undo modifications done by the fixture in a contained scope,
use <a class="reference internal" href="#pytest.MonkeyPatch.context" title="pytest.MonkeyPatch.context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">context()</span></code></a>.</p>
<p>Returns a <a class="reference internal" href="#pytest.MonkeyPatch" title="pytest.MonkeyPatch"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonkeyPatch</span></code></a> instance.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.MonkeyPatch">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MonkeyPatch</span></span><a class="reference internal" href="../_modules/_pytest/monkeypatch.html#MonkeyPatch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch" title="Link to this definition">¶</a></dt>
<dd><p>Helper to conveniently monkeypatch attributes/items/environment
variables/syspath.</p>
<p>Returned by the <a class="reference internal" href="#std-fixture-monkeypatch"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">monkeypatch</span></code></a> fixture.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 6.2: </span>Can now also be used directly as <code class="docutils literal notranslate"><span class="pre">pytest.MonkeyPatch()</span></code>, for when
the fixture is not available. In this case, use
<a class="reference internal" href="#pytest.MonkeyPatch.context" title="pytest.MonkeyPatch.context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">with</span> <span class="pre">MonkeyPatch.context()</span> <span class="pre">as</span> <span class="pre">mp:</span></code></a> or remember to call
<a class="reference internal" href="#pytest.MonkeyPatch.undo" title="pytest.MonkeyPatch.undo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">undo()</span></code></a> explicitly.</p>
</div>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.MonkeyPatch.context">
<em class="property"><span class="pre">classmethod</span> <span class="pre">with</span> </em><span class="sig-name descname"><span class="pre">context</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/monkeypatch.html#MonkeyPatch.context"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.context" title="Link to this definition">¶</a></dt>
<dd><p>Context manager that returns a new <a class="reference internal" href="#pytest.MonkeyPatch" title="pytest.MonkeyPatch"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonkeyPatch</span></code></a> object
which undoes any patching done inside the <code class="docutils literal notranslate"><span class="pre">with</span></code> block upon exit.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>


<span class="k">def</span> <span class="nf">test_partial</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">monkeypatch</span><span class="o">.</span><span class="n">context</span><span class="p">()</span> <span class="k">as</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">m</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">functools</span><span class="p">,</span> <span class="s2">&quot;partial&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Useful in situations where it is desired to undo some patches before the test ends,
such as mocking <code class="docutils literal notranslate"><span class="pre">stdlib</span></code> functions that might break pytest itself if mocked (for examples
of this see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3290">#3290</a>).</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.MonkeyPatch.setattr">
<span class="sig-name descname"><span class="pre">setattr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name:</span> <span class="pre">object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value:</span> <span class="pre">~_pytest.monkeypatch.Notset</span> <span class="pre">=</span> <span class="pre">&lt;notset&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raising:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/_pytest/monkeypatch.html#MonkeyPatch.setattr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.setattr" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">setattr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><span class="pre">object</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><span class="pre">object</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">raising</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span></dt>
<dd><p>Set attribute value on target, memorizing the old value.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s2">&quot;getcwd&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The code above replaces the <a class="reference external" href="https://docs.python.org/3/library/os.html#os.getcwd" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.getcwd()</span></code></a> function by a <code class="docutils literal notranslate"><span class="pre">lambda</span></code> which
always returns <code class="docutils literal notranslate"><span class="pre">&quot;/&quot;</span></code>.</p>
<p>For convenience, you can specify a string as <code class="docutils literal notranslate"><span class="pre">target</span></code> which
will be interpreted as a dotted import path, with the last part
being the attribute name:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="s2">&quot;os.getcwd&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Raises <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeError</span></code></a> if the attribute does not exist, unless
<code class="docutils literal notranslate"><span class="pre">raising</span></code> is set to False.</p>
<p><strong>Where to patch</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">monkeypatch.setattr</span></code> works by (temporarily) changing the object that a name points to with another one.
There can be many names pointing to any individual object, so for patching to work you must ensure
that you patch the name used by the system under test.</p>
<p>See the section <a class="reference external" href="https://docs.python.org/3/library/unittest.mock.html#where-to-patch" title="(in Python v3.13)"><span class="xref std std-ref">Where to patch</span></a> in the <a class="reference external" href="https://docs.python.org/3/library/unittest.mock.html#module-unittest.mock" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest.mock</span></code></a>
docs for a complete explanation, which is meant for <a class="reference external" href="https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.mock.patch()</span></code></a> but
applies to <code class="docutils literal notranslate"><span class="pre">monkeypatch.setattr</span></code> as well.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.MonkeyPatch.delattr">
<span class="sig-name descname"><span class="pre">delattr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name=&lt;notset&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raising=True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/monkeypatch.html#MonkeyPatch.delattr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.delattr" title="Link to this definition">¶</a></dt>
<dd><p>Delete attribute <code class="docutils literal notranslate"><span class="pre">name</span></code> from <code class="docutils literal notranslate"><span class="pre">target</span></code>.</p>
<p>If no <code class="docutils literal notranslate"><span class="pre">name</span></code> is specified and <code class="docutils literal notranslate"><span class="pre">target</span></code> is a string
it will be interpreted as a dotted import path with the
last part being the attribute name.</p>
<p>Raises AttributeError it the attribute does not exist, unless
<code class="docutils literal notranslate"><span class="pre">raising</span></code> is set to False.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.MonkeyPatch.setitem">
<span class="sig-name descname"><span class="pre">setitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/monkeypatch.html#MonkeyPatch.setitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.setitem" title="Link to this definition">¶</a></dt>
<dd><p>Set dictionary entry <code class="docutils literal notranslate"><span class="pre">name</span></code> to value.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.MonkeyPatch.delitem">
<span class="sig-name descname"><span class="pre">delitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raising</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/monkeypatch.html#MonkeyPatch.delitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.delitem" title="Link to this definition">¶</a></dt>
<dd><p>Delete <code class="docutils literal notranslate"><span class="pre">name</span></code> from dict.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if it doesn’t exist, unless <code class="docutils literal notranslate"><span class="pre">raising</span></code> is set to
False.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.MonkeyPatch.setenv">
<span class="sig-name descname"><span class="pre">setenv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/monkeypatch.html#MonkeyPatch.setenv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.setenv" title="Link to this definition">¶</a></dt>
<dd><p>Set environment variable <code class="docutils literal notranslate"><span class="pre">name</span></code> to <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">prepend</span></code> is a character, read the current environment variable
value and prepend the <code class="docutils literal notranslate"><span class="pre">value</span></code> adjoined with the <code class="docutils literal notranslate"><span class="pre">prepend</span></code>
character.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.MonkeyPatch.delenv">
<span class="sig-name descname"><span class="pre">delenv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raising</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/monkeypatch.html#MonkeyPatch.delenv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.delenv" title="Link to this definition">¶</a></dt>
<dd><p>Delete <code class="docutils literal notranslate"><span class="pre">name</span></code> from the environment.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if it does not exist, unless <code class="docutils literal notranslate"><span class="pre">raising</span></code> is set to
False.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.MonkeyPatch.syspath_prepend">
<span class="sig-name descname"><span class="pre">syspath_prepend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/monkeypatch.html#MonkeyPatch.syspath_prepend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.syspath_prepend" title="Link to this definition">¶</a></dt>
<dd><p>Prepend <code class="docutils literal notranslate"><span class="pre">path</span></code> to <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> list of import locations.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.MonkeyPatch.chdir">
<span class="sig-name descname"><span class="pre">chdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/monkeypatch.html#MonkeyPatch.chdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.chdir" title="Link to this definition">¶</a></dt>
<dd><p>Change the current working directory to the specified path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – The path to change into.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.MonkeyPatch.undo">
<span class="sig-name descname"><span class="pre">undo</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/monkeypatch.html#MonkeyPatch.undo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.undo" title="Link to this definition">¶</a></dt>
<dd><p>Undo previous changes.</p>
<p>This call consumes the undo stack. Calling it a second time has no
effect unless you do more monkeypatching after the undo call.</p>
<p>There is generally no need to call <code class="docutils literal notranslate"><span class="pre">undo()</span></code>, since it is
called automatically during tear-down.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The same <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> fixture is used across a
single test function invocation. If <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> is used both by
the test function itself and one of the test fixtures,
calling <code class="docutils literal notranslate"><span class="pre">undo()</span></code> will undo all of the changes made in
both functions.</p>
<p>Prefer to use <a class="reference internal" href="#pytest.MonkeyPatch.context" title="pytest.MonkeyPatch.context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">context()</span></code></a> instead.</p>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="pytestconfig">
<span id="std-fixture-pytestconfig"></span><h3>pytestconfig<a class="headerlink" href="#pytestconfig" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.fixtures.pytestconfig">
<span class="sig-name descname"><span class="pre">pytestconfig</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/fixtures.html#pytestconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.fixtures.pytestconfig" title="Link to this definition">¶</a></dt>
<dd><p>Session-scoped fixture that returns the session’s <a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Config</span></code></a>
object.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">pytestconfig</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">pytestconfig</span><span class="o">.</span><span class="n">get_verbosity</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="o">...</span>
</pre></div>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

</section>
<section id="pytester">
<span id="std-fixture-pytester"></span><h3>pytester<a class="headerlink" href="#pytester" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-13-13-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-13-13-0" name="13-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-13-13-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-13-13-1" name="13-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-13-13-0" class="sphinx-tabs-panel" id="panel-13-13-0" name="13-0" role="tabpanel" tabindex="0"><div class="versionadded">
<p><span class="versionmodified added">Added in version 6.2.</span></p>
</div>
<p>提供一个 <a class="reference internal" href="#id11" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a> 实例，可以用来运行和测试 pytest 本身。</p>
<p>它提供了一个空目录，pytest 可以在隔离环境中执行，并包含编写测试、配置文件以及与预期输出匹配的工具。</p>
<p>要使用它，请在您的最上层 <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> 文件中包含：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_plugins</span> <span class="o">=</span> <span class="s2">&quot;pytester&quot;</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Pytester">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Pytester</span></span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester" title="Link to this definition">¶</a></dt>
<dd><p>Facilities to write tests/configuration files, execute pytest in isolation, and match
against expected output, perfect for black-box testing of pytest plugins.</p>
<p>It attempts to isolate the test run from external factors as much as possible, modifying
the current working directory to <a class="reference internal" href="#id14" title="pytest.Pytester.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a> and environment variables during initialization.</p>
<dl class="field-list simple">
</dl>
<dl class="py exception">
<dt class="sig sig-object py" id="pytest.Pytester.TimeoutExpired">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TimeoutExpired</span></span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.TimeoutExpired"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.TimeoutExpired" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Pytester.plugins">
<span class="sig-name descname"><span class="pre">plugins</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><span class="pre">object</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.Pytester.plugins" title="Link to this definition">¶</a></dt>
<dd><p>A list of plugins to use with <a class="reference internal" href="#id37" title="pytest.Pytester.parseconfig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfig()</span></code></a> and
<a class="reference internal" href="#id36" title="pytest.Pytester.runpytest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">runpytest()</span></code></a>.  Initially this is an empty list but plugins can
be added to the list.  The type of items to add to the list depends on
the method using them so refer to them for details.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.Pytester.path">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></em><a class="headerlink" href="#pytest.Pytester.path" title="Link to this definition">¶</a></dt>
<dd><p>Temporary directory path used to create files/run tests from, etc.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.make_hook_recorder">
<span class="sig-name descname"><span class="pre">make_hook_recorder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.make_hook_recorder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.make_hook_recorder" title="Link to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#id70" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a> for a <a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestPluginManager</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.chdir">
<span class="sig-name descname"><span class="pre">chdir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.chdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.chdir" title="Link to this definition">¶</a></dt>
<dd><p>Cd into the temporary directory.</p>
<p>This is done automatically upon instantiation.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.makefile">
<span class="sig-name descname"><span class="pre">makefile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.makefile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.makefile" title="Link to this definition">¶</a></dt>
<dd><p>Create new text file(s) in the test directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ext</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The extension the file(s) should use, including the dot, e.g. <code class="docutils literal notranslate"><span class="pre">.py</span></code>.</p></li>
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – All args are treated as strings and joined using newlines.
The result is written as contents to the file.  The name of the
file is based on the test function requesting this fixture.</p></li>
<li><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Each keyword is the name of a file, while the value of it will
be written as contents of the file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The first created file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>Path</em></a></p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytester</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="s2">&quot;.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;line1&quot;</span><span class="p">,</span> <span class="s2">&quot;line2&quot;</span><span class="p">)</span>

<span class="n">pytester</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="s2">&quot;.ini&quot;</span><span class="p">,</span> <span class="n">pytest</span><span class="o">=</span><span class="s2">&quot;[pytest]</span><span class="se">\n</span><span class="s2">addopts=-rs</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To create binary files, use <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.write_bytes" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.write_bytes()</span></code></a> directly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">pytester</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;foo.bin&quot;</span><span class="p">)</span>
<span class="n">filename</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.makeconftest">
<span class="sig-name descname"><span class="pre">makeconftest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.makeconftest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.makeconftest" title="Link to this definition">¶</a></dt>
<dd><p>Write a conftest.py file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The contents.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The conftest.py file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>Path</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.makeini">
<span class="sig-name descname"><span class="pre">makeini</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.makeini"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.makeini" title="Link to this definition">¶</a></dt>
<dd><p>Write a tox.ini file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The contents.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The tox.ini file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>Path</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.getinicfg">
<span class="sig-name descname"><span class="pre">getinicfg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.getinicfg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.getinicfg" title="Link to this definition">¶</a></dt>
<dd><p>Return the pytest section from the tox.ini config file.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.makepyprojecttoml">
<span class="sig-name descname"><span class="pre">makepyprojecttoml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.makepyprojecttoml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.makepyprojecttoml" title="Link to this definition">¶</a></dt>
<dd><p>Write a pyproject.toml file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The contents.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The pyproject.ini file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>Path</em></a></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.makepyfile">
<span class="sig-name descname"><span class="pre">makepyfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.makepyfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.makepyfile" title="Link to this definition">¶</a></dt>
<dd><p>Shortcut for .makefile() with a .py extension.</p>
<p>Defaults to the test name with a ‘.py’ extension, e.g test_foobar.py, overwriting
existing files.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_something</span><span class="p">(</span><span class="n">pytester</span><span class="p">):</span>
    <span class="c1"># Initial file is created test_something.py.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># To create multiple files, pass kwargs accordingly.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="n">custom</span><span class="o">=</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># At this point, both &#39;test_something.py&#39; &amp; &#39;custom.py&#39; exist in the test directory.</span>
</pre></div>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.maketxtfile">
<span class="sig-name descname"><span class="pre">maketxtfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.maketxtfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.maketxtfile" title="Link to this definition">¶</a></dt>
<dd><p>Shortcut for .makefile() with a .txt extension.</p>
<p>Defaults to the test name with a ‘.txt’ extension, e.g test_foobar.txt, overwriting
existing files.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_something</span><span class="p">(</span><span class="n">pytester</span><span class="p">):</span>
    <span class="c1"># Initial file is created test_something.txt.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">maketxtfile</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># To create multiple files, pass kwargs accordingly.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">maketxtfile</span><span class="p">(</span><span class="n">custom</span><span class="o">=</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># At this point, both &#39;test_something.txt&#39; &amp; &#39;custom.txt&#39; exist in the test directory.</span>
</pre></div>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.syspathinsert">
<span class="sig-name descname"><span class="pre">syspathinsert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.syspathinsert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.syspathinsert" title="Link to this definition">¶</a></dt>
<dd><p>Prepend a directory to sys.path, defaults to <a class="reference internal" href="#id14" title="pytest.Pytester.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a>.</p>
<p>This is undone automatically when this object dies at the end of each
test.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>] </em><em>| </em><em>None</em>) – The path.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.mkdir">
<span class="sig-name descname"><span class="pre">mkdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.mkdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.mkdir" title="Link to this definition">¶</a></dt>
<dd><p>Create a new (sub)directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – The name of the directory, relative to the pytester path.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The created directory.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.mkpydir">
<span class="sig-name descname"><span class="pre">mkpydir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.mkpydir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.mkpydir" title="Link to this definition">¶</a></dt>
<dd><p>Create a new python package.</p>
<p>This creates a (sub)directory with an empty <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file so it
gets recognised as a Python package.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.copy_example">
<span class="sig-name descname"><span class="pre">copy_example</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.copy_example"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.copy_example" title="Link to this definition">¶</a></dt>
<dd><p>Copy file from project’s directory into the testdir.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – The name of the file to copy.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Path to the copied directory (inside <code class="docutils literal notranslate"><span class="pre">self.path</span></code>).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.getnode">
<span class="sig-name descname"><span class="pre">getnode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.getnode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.getnode" title="Link to this definition">¶</a></dt>
<dd><p>Get the collection node of a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="_pytest.config.Config"><em>Config</em></a>) – A pytest config.
See <a class="reference internal" href="#id37" title="pytest.Pytester.parseconfig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfig()</span></code></a> and <a class="reference internal" href="#id38" title="pytest.Pytester.parseconfigure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfigure()</span></code></a> for creating it.</p></li>
<li><p><strong>arg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – Path to the file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The node.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.Collector" title="_pytest.nodes.Collector"><em>Collector</em></a> | <a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><em>Item</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.getpathnode">
<span class="sig-name descname"><span class="pre">getpathnode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.getpathnode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.getpathnode" title="Link to this definition">¶</a></dt>
<dd><p>Return the collection node of a file.</p>
<p>This is like <a class="reference internal" href="#id28" title="pytest.Pytester.getnode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getnode()</span></code></a> but uses <a class="reference internal" href="#id38" title="pytest.Pytester.parseconfigure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfigure()</span></code></a> to
create the (configured) pytest Config instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – Path to the file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The node.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.Collector" title="_pytest.nodes.Collector"><em>Collector</em></a> | <a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><em>Item</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.genitems">
<span class="sig-name descname"><span class="pre">genitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">colitems</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.genitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.genitems" title="Link to this definition">¶</a></dt>
<dd><p>Generate all test items from a collection node.</p>
<p>This recurses into the collection node and returns a list of all the
test items contained within.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>colitems</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><em>Item</em></a><em> | </em><a class="reference internal" href="#pytest.Collector" title="_pytest.nodes.Collector"><em>Collector</em></a><em>]</em>) – The collection nodes.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The collected items.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><em>Item</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.runitem">
<span class="sig-name descname"><span class="pre">runitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.runitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.runitem" title="Link to this definition">¶</a></dt>
<dd><p>Run the “test_func” Item.</p>
<p>The calling test instance (class containing the test method) must
provide a <code class="docutils literal notranslate"><span class="pre">.getrunner()</span></code> method which should return a runner which
can run the test protocol for a single item, e.g.
<code class="docutils literal notranslate"><span class="pre">_pytest.runner.runtestprotocol</span></code>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.inline_runsource">
<span class="sig-name descname"><span class="pre">inline_runsource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cmdlineargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.inline_runsource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.inline_runsource" title="Link to this definition">¶</a></dt>
<dd><p>Run a test module in process using <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code>.</p>
<p>This run writes “source” into a temporary file and runs
<code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> on it, returning a <a class="reference internal" href="#id70" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a> instance
for the result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The source code of the test module.</p></li>
<li><p><strong>cmdlineargs</strong> – Any extra command line arguments to use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.inline_genitems">
<span class="sig-name descname"><span class="pre">inline_genitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.inline_genitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.inline_genitems" title="Link to this definition">¶</a></dt>
<dd><p>Run <code class="docutils literal notranslate"><span class="pre">pytest.main(['--collect-only'])</span></code> in-process.</p>
<p>Runs the <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a> function to run all of pytest inside
the test process itself like <a class="reference internal" href="#id34" title="pytest.Pytester.inline_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">inline_run()</span></code></a>, but returns a
tuple of the collected items and a <a class="reference internal" href="#id70" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a> instance.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.inline_run">
<span class="sig-name descname"><span class="pre">inline_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plugins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_reraise_ctrlc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.inline_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.inline_run" title="Link to this definition">¶</a></dt>
<dd><p>Run <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> in-process, returning a HookRecorder.</p>
<p>Runs the <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a> function to run all of pytest inside
the test process itself.  This means it can return a
<a class="reference internal" href="#id70" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a> instance which gives more detailed results
from that run than can be done by matching stdout/stderr from
<a class="reference internal" href="#id36" title="pytest.Pytester.runpytest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">runpytest()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – Command line arguments to pass to <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a>.</p></li>
<li><p><strong>plugins</strong> – Extra plugin instances the <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> instance should use.</p></li>
<li><p><strong>no_reraise_ctrlc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Typically we reraise keyboard interrupts from the child run. If
True, the KeyboardInterrupt exception is captured.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.runpytest_inprocess">
<span class="sig-name descname"><span class="pre">runpytest_inprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.runpytest_inprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.runpytest_inprocess" title="Link to this definition">¶</a></dt>
<dd><p>Return result of running pytest in-process, providing a similar
interface to what self.runpytest() provides.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.runpytest">
<span class="sig-name descname"><span class="pre">runpytest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.runpytest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.runpytest" title="Link to this definition">¶</a></dt>
<dd><p>Run pytest inline or in a subprocess, depending on the command line
option “–runpytest” and return a <a class="reference internal" href="#id50" title="pytest.RunResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunResult</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.parseconfig">
<span class="sig-name descname"><span class="pre">parseconfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.parseconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.parseconfig" title="Link to this definition">¶</a></dt>
<dd><p>Return a new pytest <a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Config</span></code></a> instance from given
commandline args.</p>
<p>This invokes the pytest bootstrapping code in _pytest.config to create a
new <a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.PytestPluginManager</span></code></a> and call the
<a class="reference internal" href="#std:hook-1"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_cmdline_parse</span></code></a> hook to create a new <a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Config</span></code></a>
instance.</p>
<p>If <a class="reference internal" href="#id13" title="pytest.Pytester.plugins"><code class="xref py py-attr docutils literal notranslate"><span class="pre">plugins</span></code></a> has been populated they should be plugin modules
to be registered with the plugin manager.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.parseconfigure">
<span class="sig-name descname"><span class="pre">parseconfigure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.parseconfigure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.parseconfigure" title="Link to this definition">¶</a></dt>
<dd><p>Return a new pytest configured Config instance.</p>
<p>Returns a new <a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Config</span></code></a> instance like
<a class="reference internal" href="#id37" title="pytest.Pytester.parseconfig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfig()</span></code></a>, but also calls the <a class="reference internal" href="#std:hook-5"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_configure</span></code></a>
hook.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.getitem">
<span class="sig-name descname"><span class="pre">getitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funcname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'test_func'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.getitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.getitem" title="Link to this definition">¶</a></dt>
<dd><p>Return the test item for a test function.</p>
<p>Writes the source to a python file and runs pytest’s collection on
the resulting module, returning the test item for the requested
function name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – The module source.</p></li>
<li><p><strong>funcname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name of the test function for which to return a test item.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The test item.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><em>Item</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.getitems">
<span class="sig-name descname"><span class="pre">getitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.getitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.getitems" title="Link to this definition">¶</a></dt>
<dd><p>Return all test items collected from the module.</p>
<p>Writes the source to a Python file and runs pytest’s collection on
the resulting module, returning all test items contained within.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.getmodulecol">
<span class="sig-name descname"><span class="pre">getmodulecol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">withinit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.getmodulecol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.getmodulecol" title="Link to this definition">¶</a></dt>
<dd><p>Return the module collection node for <code class="docutils literal notranslate"><span class="pre">source</span></code>.</p>
<p>Writes <code class="docutils literal notranslate"><span class="pre">source</span></code> to a file using <a class="reference internal" href="#id22" title="pytest.Pytester.makepyfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">makepyfile()</span></code></a> and then
runs the pytest collection on it, returning the collection node for the
test module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – The source code of the module to collect.</p></li>
<li><p><strong>configargs</strong> – Any extra arguments to pass to <a class="reference internal" href="#id38" title="pytest.Pytester.parseconfigure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfigure()</span></code></a>.</p></li>
<li><p><strong>withinit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to also write an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file to the same
directory to ensure it is a package.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.collect_by_name">
<span class="sig-name descname"><span class="pre">collect_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modcol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.collect_by_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.collect_by_name" title="Link to this definition">¶</a></dt>
<dd><p>Return the collection node for name from the module collection.</p>
<p>Searches a module collection node for a collection node matching the
given name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>modcol</strong> (<a class="reference internal" href="#pytest.Collector" title="_pytest.nodes.Collector"><em>Collector</em></a>) – A module collection node; see <a class="reference internal" href="#id41" title="pytest.Pytester.getmodulecol"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getmodulecol()</span></code></a>.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name of the node to return.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.popen">
<span class="sig-name descname"><span class="pre">popen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmdargs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stderr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">NotSetType.token</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.popen"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.popen" title="Link to this definition">¶</a></dt>
<dd><p>Invoke <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>.</p>
<p>Calls <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> making sure the current working
directory is in <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>.</p>
<p>You probably want to use <a class="reference internal" href="#id44" title="pytest.Pytester.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> instead.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cmdargs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">NotSetType.token</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.run" title="Link to this definition">¶</a></dt>
<dd><p>Run a command with arguments.</p>
<p>Run a process using <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> saving the stdout and
stderr.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmdargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – The sequence of arguments to pass to <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>,
with path-like objects being converted to <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>
automatically.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em> | </em><em>None</em>) – The period in seconds after which to timeout and raise
<a class="reference internal" href="#id12" title="pytest.Pytester.TimeoutExpired"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester.TimeoutExpired</span></code></a>.</p></li>
<li><p><strong>stdin</strong> (<em>_pytest.compat.NotSetType</em><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a><em> | </em><em>IO</em><em>[</em><em>Any</em><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – <p>Optional standard input.</p>
<ul>
<li><p>If it is <code class="docutils literal notranslate"><span class="pre">CLOSE_STDIN</span></code> (Default), then this method calls
<a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> with <code class="docutils literal notranslate"><span class="pre">stdin=subprocess.PIPE</span></code>, and
the standard input is closed immediately after the new command is
started.</p></li>
<li><p>If it is of type <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, these bytes are sent to the
standard input of the command.</p></li>
<li><p>Otherwise, it is passed through to <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>.
For further information in this case, consult the document of the
<code class="docutils literal notranslate"><span class="pre">stdin</span></code> parameter in <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The result.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#id50" title="_pytest.pytester.RunResult"><em>RunResult</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.runpython">
<span class="sig-name descname"><span class="pre">runpython</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">script</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.runpython"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.runpython" title="Link to this definition">¶</a></dt>
<dd><p>Run a python script using sys.executable as interpreter.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.runpython_c">
<span class="sig-name descname"><span class="pre">runpython_c</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.runpython_c"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.runpython_c" title="Link to this definition">¶</a></dt>
<dd><p>Run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-c</span> <span class="pre">&quot;command&quot;</span></code>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.runpytest_subprocess">
<span class="sig-name descname"><span class="pre">runpytest_subprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.runpytest_subprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.runpytest_subprocess" title="Link to this definition">¶</a></dt>
<dd><p>Run pytest as a subprocess with given arguments.</p>
<p>Any plugins added to the <a class="reference internal" href="#id13" title="pytest.Pytester.plugins"><code class="xref py py-attr docutils literal notranslate"><span class="pre">plugins</span></code></a> list will be added using the
<code class="docutils literal notranslate"><span class="pre">-p</span></code> command line option.  Additionally <code class="docutils literal notranslate"><span class="pre">--basetemp</span></code> is used to put
any temporary files and directories in a numbered directory prefixed
with “runpytest-” to not conflict with the normal numbered pytest
location for temporary files and directories.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – The sequence of arguments to pass to the pytest subprocess.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em> | </em><em>None</em>) – The period in seconds after which to timeout and raise
<a class="reference internal" href="#id12" title="pytest.Pytester.TimeoutExpired"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester.TimeoutExpired</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The result.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#id50" title="_pytest.pytester.RunResult"><em>RunResult</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.spawn_pytest">
<span class="sig-name descname"><span class="pre">spawn_pytest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.spawn_pytest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.spawn_pytest" title="Link to this definition">¶</a></dt>
<dd><p>Run pytest using pexpect.</p>
<p>This makes sure to use the right pytest and sets up the temporary
directory locations.</p>
<p>The pexpect child is returned.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Pytester.spawn">
<span class="sig-name descname"><span class="pre">spawn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.spawn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.spawn" title="Link to this definition">¶</a></dt>
<dd><p>Run a command using pexpect.</p>
<p>The pexpect child is returned.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.RunResult">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RunResult</span></span><a class="reference internal" href="../_modules/_pytest/pytester.html#RunResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.RunResult" title="Link to this definition">¶</a></dt>
<dd><p>The result of running a command from <a class="reference internal" href="#id11" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a>.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.RunResult.ret">
<span class="sig-name descname"><span class="pre">ret</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#pytest.ExitCode" title="_pytest.config.ExitCode"><span class="pre">ExitCode</span></a></em><a class="headerlink" href="#pytest.RunResult.ret" title="Link to this definition">¶</a></dt>
<dd><p>The return value.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.RunResult.outlines">
<span class="sig-name descname"><span class="pre">outlines</span></span><a class="headerlink" href="#pytest.RunResult.outlines" title="Link to this definition">¶</a></dt>
<dd><p>List of lines captured from stdout.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.RunResult.errlines">
<span class="sig-name descname"><span class="pre">errlines</span></span><a class="headerlink" href="#pytest.RunResult.errlines" title="Link to this definition">¶</a></dt>
<dd><p>List of lines captured from stderr.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.RunResult.stdout">
<span class="sig-name descname"><span class="pre">stdout</span></span><a class="headerlink" href="#pytest.RunResult.stdout" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#id60" title="pytest.LineMatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">LineMatcher</span></code></a> of stdout.</p>
<p>Use e.g. <a class="reference internal" href="#id61" title="pytest.LineMatcher.__str__"><code class="xref py py-func docutils literal notranslate"><span class="pre">str(stdout)</span></code></a> to reconstruct stdout, or the commonly used
<a class="reference internal" href="#id65" title="pytest.LineMatcher.fnmatch_lines"><code class="xref py py-func docutils literal notranslate"><span class="pre">stdout.fnmatch_lines()</span></code></a> method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.RunResult.stderr">
<span class="sig-name descname"><span class="pre">stderr</span></span><a class="headerlink" href="#pytest.RunResult.stderr" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#id60" title="pytest.LineMatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">LineMatcher</span></code></a> of stderr.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.RunResult.duration">
<span class="sig-name descname"><span class="pre">duration</span></span><a class="headerlink" href="#pytest.RunResult.duration" title="Link to this definition">¶</a></dt>
<dd><p>Duration in seconds.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.RunResult.parseoutcomes">
<span class="sig-name descname"><span class="pre">parseoutcomes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#RunResult.parseoutcomes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.RunResult.parseoutcomes" title="Link to this definition">¶</a></dt>
<dd><p>Return a dictionary of outcome noun -&gt; count from parsing the terminal
output that the test process produced.</p>
<p>The returned nouns will always be in plural form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">=======</span> <span class="mi">1</span> <span class="n">failed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">passed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span><span class="p">,</span> <span class="mi">1</span> <span class="n">error</span> <span class="ow">in</span> <span class="mf">0.13</span><span class="n">s</span> <span class="o">====</span>
</pre></div>
</div>
<p>Will return <code class="docutils literal notranslate"><span class="pre">{&quot;failed&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;passed&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;warnings&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;errors&quot;:</span> <span class="pre">1}</span></code>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.RunResult.parse_summary_nouns">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">parse_summary_nouns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#RunResult.parse_summary_nouns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.RunResult.parse_summary_nouns" title="Link to this definition">¶</a></dt>
<dd><p>Extract the nouns from a pytest terminal summary line.</p>
<p>It always returns the plural noun for consistency:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">=======</span> <span class="mi">1</span> <span class="n">failed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">passed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span><span class="p">,</span> <span class="mi">1</span> <span class="n">error</span> <span class="ow">in</span> <span class="mf">0.13</span><span class="n">s</span> <span class="o">====</span>
</pre></div>
</div>
<p>Will return <code class="docutils literal notranslate"><span class="pre">{&quot;failed&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;passed&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;warnings&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;errors&quot;:</span> <span class="pre">1}</span></code>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.RunResult.assert_outcomes">
<span class="sig-name descname"><span class="pre">assert_outcomes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipped</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">failed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xpassed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xfailed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warnings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deselected</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#RunResult.assert_outcomes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.RunResult.assert_outcomes" title="Link to this definition">¶</a></dt>
<dd><p>Assert that the specified outcomes appear with the respective
numbers (0 means it didn’t occur) in the text output from a test run.</p>
<p><code class="docutils literal notranslate"><span class="pre">warnings</span></code> and <code class="docutils literal notranslate"><span class="pre">deselected</span></code> are only checked if not None.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.LineMatcher">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">LineMatcher</span></span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher" title="Link to this definition">¶</a></dt>
<dd><p>Flexible matching of text.</p>
<p>This is a convenience class to test large texts like the output of
commands.</p>
<p>The constructor takes a list of lines without their trailing newlines, i.e.
<code class="docutils literal notranslate"><span class="pre">text.splitlines()</span></code>.</p>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.LineMatcher.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.__str__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.__str__" title="Link to this definition">¶</a></dt>
<dd><p>Return the entire original text.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 6.2: </span>You can use <a class="reference internal" href="#id69" title="pytest.LineMatcher.str"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str()</span></code></a> in older versions.</p>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.LineMatcher.fnmatch_lines_random">
<span class="sig-name descname"><span class="pre">fnmatch_lines_random</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.fnmatch_lines_random"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.fnmatch_lines_random" title="Link to this definition">¶</a></dt>
<dd><p>Check lines exist in the output in any order (using <a class="reference external" href="https://docs.python.org/3/library/fnmatch.html#fnmatch.fnmatch" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">fnmatch.fnmatch()</span></code></a>).</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.LineMatcher.re_match_lines_random">
<span class="sig-name descname"><span class="pre">re_match_lines_random</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.re_match_lines_random"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.re_match_lines_random" title="Link to this definition">¶</a></dt>
<dd><p>Check lines exist in the output in any order (using <a class="reference external" href="https://docs.python.org/3/library/re.html#re.match" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">re.match()</span></code></a>).</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.LineMatcher.get_lines_after">
<span class="sig-name descname"><span class="pre">get_lines_after</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fnline</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.get_lines_after"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.get_lines_after" title="Link to this definition">¶</a></dt>
<dd><p>Return all lines following the given line in the text.</p>
<p>The given line can contain glob wildcards.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.LineMatcher.fnmatch_lines">
<span class="sig-name descname"><span class="pre">fnmatch_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consecutive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.fnmatch_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.fnmatch_lines" title="Link to this definition">¶</a></dt>
<dd><p>Check lines exist in the output (using <a class="reference external" href="https://docs.python.org/3/library/fnmatch.html#fnmatch.fnmatch" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">fnmatch.fnmatch()</span></code></a>).</p>
<p>The argument is a list of lines which have to match and can use glob
wildcards.  If they do not match a pytest.fail() is called.  The
matches and non-matches are also shown as part of the error message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines2</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – String patterns to match.</p></li>
<li><p><strong>consecutive</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Match lines consecutively?</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.LineMatcher.re_match_lines">
<span class="sig-name descname"><span class="pre">re_match_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consecutive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.re_match_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.re_match_lines" title="Link to this definition">¶</a></dt>
<dd><p>Check lines exist in the output (using <a class="reference external" href="https://docs.python.org/3/library/re.html#re.match" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">re.match()</span></code></a>).</p>
<p>The argument is a list of lines which have to match using <code class="docutils literal notranslate"><span class="pre">re.match</span></code>.
If they do not match a pytest.fail() is called.</p>
<p>The matches and non-matches are also shown as part of the error message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines2</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – string patterns to match.</p></li>
<li><p><strong>consecutive</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – match lines consecutively?</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.LineMatcher.no_fnmatch_line">
<span class="sig-name descname"><span class="pre">no_fnmatch_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.no_fnmatch_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.no_fnmatch_line" title="Link to this definition">¶</a></dt>
<dd><p>Ensure captured lines do not match the given pattern, using <code class="docutils literal notranslate"><span class="pre">fnmatch.fnmatch</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pat</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The pattern to match lines.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.LineMatcher.no_re_match_line">
<span class="sig-name descname"><span class="pre">no_re_match_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.no_re_match_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.no_re_match_line" title="Link to this definition">¶</a></dt>
<dd><p>Ensure captured lines do not match the given pattern, using <code class="docutils literal notranslate"><span class="pre">re.match</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pat</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The regular expression to match lines.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.LineMatcher.str">
<span class="sig-name descname"><span class="pre">str</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.str" title="Link to this definition">¶</a></dt>
<dd><p>Return the entire original text.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.HookRecorder">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">HookRecorder</span></span><a class="reference internal" href="../_modules/_pytest/pytester.html#HookRecorder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.HookRecorder" title="Link to this definition">¶</a></dt>
<dd><p>Record all hooks called in a plugin manager.</p>
<p>Hook recorders are created by <a class="reference internal" href="#id11" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a>.</p>
<p>This wraps all the hook calls in the plugin manager, recording each call
before propagating the normal calls.</p>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.HookRecorder.getcalls">
<span class="sig-name descname"><span class="pre">getcalls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#HookRecorder.getcalls"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.HookRecorder.getcalls" title="Link to this definition">¶</a></dt>
<dd><p>Get all recorded calls to hooks with the given names (or name).</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.HookRecorder.matchreport">
<span class="sig-name descname"><span class="pre">matchreport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inamepart</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">('pytest_runtest_logreport',</span> <span class="pre">'pytest_collectreport')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">when</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#HookRecorder.matchreport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.HookRecorder.matchreport" title="Link to this definition">¶</a></dt>
<dd><p>Return a testreport whose dotted import path matches.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.RecordedHookCall">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RecordedHookCall</span></span><a class="reference internal" href="../_modules/_pytest/pytester.html#RecordedHookCall"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.RecordedHookCall" title="Link to this definition">¶</a></dt>
<dd><p>A recorded call to a hook.</p>
<p>The arguments to the hook call are set as attributes.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">calls</span> <span class="o">=</span> <span class="n">hook_recorder</span><span class="o">.</span><span class="n">getcalls</span><span class="p">(</span><span class="s2">&quot;pytest_runtest_setup&quot;</span><span class="p">)</span>
<span class="c1"># Suppose pytest_runtest_setup was called once with `item=an_item`.</span>
<span class="k">assert</span> <span class="n">calls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">item</span> <span class="ow">is</span> <span class="n">an_item</span>
</pre></div>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

</div><div aria-labelledby="tab-13-13-1" class="sphinx-tabs-panel" hidden="true" id="panel-13-13-1" name="13-1" role="tabpanel" tabindex="0">
<span id="std-fixture-record_property"></span><div class="versionadded">
<p><span class="versionmodified added">Added in version 6.2.</span></p>
</div>
<p>Provides a <a class="reference internal" href="#id11" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a> instance that can be used to run and test pytest itself.</p>
<p>It provides an empty directory where pytest can be executed in isolation, and contains facilities
to write tests, configuration files, and match against expected output.</p>
<p>To use it, include in your topmost <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_plugins</span> <span class="o">=</span> <span class="s2">&quot;pytester&quot;</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="id11">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Pytester</span></span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id11" title="Link to this definition">¶</a></dt>
<dd><p>Facilities to write tests/configuration files, execute pytest in isolation, and match
against expected output, perfect for black-box testing of pytest plugins.</p>
<p>It attempts to isolate the test run from external factors as much as possible, modifying
the current working directory to <a class="reference internal" href="#id14" title="pytest.Pytester.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a> and environment variables during initialization.</p>
<dl class="field-list simple">
</dl>
<dl class="py exception">
<dt class="sig sig-object py" id="id12">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TimeoutExpired</span></span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.TimeoutExpired"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id12" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id13">
<span class="sig-name descname"><span class="pre">plugins</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><span class="pre">object</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id13" title="Link to this definition">¶</a></dt>
<dd><p>A list of plugins to use with <a class="reference internal" href="#id37" title="pytest.Pytester.parseconfig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfig()</span></code></a> and
<a class="reference internal" href="#id36" title="pytest.Pytester.runpytest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">runpytest()</span></code></a>.  Initially this is an empty list but plugins can
be added to the list.  The type of items to add to the list depends on
the method using them so refer to them for details.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id14">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></em><a class="headerlink" href="#id14" title="Link to this definition">¶</a></dt>
<dd><p>Temporary directory path used to create files/run tests from, etc.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id15">
<span class="sig-name descname"><span class="pre">make_hook_recorder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.make_hook_recorder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id15" title="Link to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#id70" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a> for a <a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestPluginManager</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id16">
<span class="sig-name descname"><span class="pre">chdir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.chdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id16" title="Link to this definition">¶</a></dt>
<dd><p>Cd into the temporary directory.</p>
<p>This is done automatically upon instantiation.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id17">
<span class="sig-name descname"><span class="pre">makefile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.makefile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id17" title="Link to this definition">¶</a></dt>
<dd><p>Create new text file(s) in the test directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ext</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The extension the file(s) should use, including the dot, e.g. <code class="docutils literal notranslate"><span class="pre">.py</span></code>.</p></li>
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – All args are treated as strings and joined using newlines.
The result is written as contents to the file.  The name of the
file is based on the test function requesting this fixture.</p></li>
<li><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Each keyword is the name of a file, while the value of it will
be written as contents of the file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The first created file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>Path</em></a></p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytester</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="s2">&quot;.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;line1&quot;</span><span class="p">,</span> <span class="s2">&quot;line2&quot;</span><span class="p">)</span>

<span class="n">pytester</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="s2">&quot;.ini&quot;</span><span class="p">,</span> <span class="n">pytest</span><span class="o">=</span><span class="s2">&quot;[pytest]</span><span class="se">\n</span><span class="s2">addopts=-rs</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To create binary files, use <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.write_bytes" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.write_bytes()</span></code></a> directly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">pytester</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;foo.bin&quot;</span><span class="p">)</span>
<span class="n">filename</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id18">
<span class="sig-name descname"><span class="pre">makeconftest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.makeconftest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id18" title="Link to this definition">¶</a></dt>
<dd><p>Write a conftest.py file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The contents.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The conftest.py file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>Path</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id19">
<span class="sig-name descname"><span class="pre">makeini</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.makeini"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id19" title="Link to this definition">¶</a></dt>
<dd><p>Write a tox.ini file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The contents.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The tox.ini file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>Path</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id20">
<span class="sig-name descname"><span class="pre">getinicfg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.getinicfg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id20" title="Link to this definition">¶</a></dt>
<dd><p>Return the pytest section from the tox.ini config file.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id21">
<span class="sig-name descname"><span class="pre">makepyprojecttoml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.makepyprojecttoml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id21" title="Link to this definition">¶</a></dt>
<dd><p>Write a pyproject.toml file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The contents.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The pyproject.ini file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>Path</em></a></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id22">
<span class="sig-name descname"><span class="pre">makepyfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.makepyfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id22" title="Link to this definition">¶</a></dt>
<dd><p>Shortcut for .makefile() with a .py extension.</p>
<p>Defaults to the test name with a ‘.py’ extension, e.g test_foobar.py, overwriting
existing files.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_something</span><span class="p">(</span><span class="n">pytester</span><span class="p">):</span>
    <span class="c1"># Initial file is created test_something.py.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># To create multiple files, pass kwargs accordingly.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="n">custom</span><span class="o">=</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># At this point, both &#39;test_something.py&#39; &amp; &#39;custom.py&#39; exist in the test directory.</span>
</pre></div>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id23">
<span class="sig-name descname"><span class="pre">maketxtfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.maketxtfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id23" title="Link to this definition">¶</a></dt>
<dd><p>Shortcut for .makefile() with a .txt extension.</p>
<p>Defaults to the test name with a ‘.txt’ extension, e.g test_foobar.txt, overwriting
existing files.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_something</span><span class="p">(</span><span class="n">pytester</span><span class="p">):</span>
    <span class="c1"># Initial file is created test_something.txt.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">maketxtfile</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># To create multiple files, pass kwargs accordingly.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">maketxtfile</span><span class="p">(</span><span class="n">custom</span><span class="o">=</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># At this point, both &#39;test_something.txt&#39; &amp; &#39;custom.txt&#39; exist in the test directory.</span>
</pre></div>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id24">
<span class="sig-name descname"><span class="pre">syspathinsert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.syspathinsert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id24" title="Link to this definition">¶</a></dt>
<dd><p>Prepend a directory to sys.path, defaults to <a class="reference internal" href="#id14" title="pytest.Pytester.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a>.</p>
<p>This is undone automatically when this object dies at the end of each
test.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>] </em><em>| </em><em>None</em>) – The path.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id25">
<span class="sig-name descname"><span class="pre">mkdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.mkdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id25" title="Link to this definition">¶</a></dt>
<dd><p>Create a new (sub)directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – The name of the directory, relative to the pytester path.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The created directory.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id26">
<span class="sig-name descname"><span class="pre">mkpydir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.mkpydir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id26" title="Link to this definition">¶</a></dt>
<dd><p>Create a new python package.</p>
<p>This creates a (sub)directory with an empty <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file so it
gets recognised as a Python package.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id27">
<span class="sig-name descname"><span class="pre">copy_example</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.copy_example"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id27" title="Link to this definition">¶</a></dt>
<dd><p>Copy file from project’s directory into the testdir.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – The name of the file to copy.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Path to the copied directory (inside <code class="docutils literal notranslate"><span class="pre">self.path</span></code>).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id28">
<span class="sig-name descname"><span class="pre">getnode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.getnode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id28" title="Link to this definition">¶</a></dt>
<dd><p>Get the collection node of a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="_pytest.config.Config"><em>Config</em></a>) – A pytest config.
See <a class="reference internal" href="#id37" title="pytest.Pytester.parseconfig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfig()</span></code></a> and <a class="reference internal" href="#id38" title="pytest.Pytester.parseconfigure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfigure()</span></code></a> for creating it.</p></li>
<li><p><strong>arg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – Path to the file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The node.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.Collector" title="_pytest.nodes.Collector"><em>Collector</em></a> | <a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><em>Item</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id29">
<span class="sig-name descname"><span class="pre">getpathnode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.getpathnode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id29" title="Link to this definition">¶</a></dt>
<dd><p>Return the collection node of a file.</p>
<p>This is like <a class="reference internal" href="#id28" title="pytest.Pytester.getnode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getnode()</span></code></a> but uses <a class="reference internal" href="#id38" title="pytest.Pytester.parseconfigure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfigure()</span></code></a> to
create the (configured) pytest Config instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – Path to the file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The node.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.Collector" title="_pytest.nodes.Collector"><em>Collector</em></a> | <a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><em>Item</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id30">
<span class="sig-name descname"><span class="pre">genitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">colitems</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.genitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id30" title="Link to this definition">¶</a></dt>
<dd><p>Generate all test items from a collection node.</p>
<p>This recurses into the collection node and returns a list of all the
test items contained within.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>colitems</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><em>Item</em></a><em> | </em><a class="reference internal" href="#pytest.Collector" title="_pytest.nodes.Collector"><em>Collector</em></a><em>]</em>) – The collection nodes.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The collected items.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><em>Item</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id31">
<span class="sig-name descname"><span class="pre">runitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.runitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id31" title="Link to this definition">¶</a></dt>
<dd><p>Run the “test_func” Item.</p>
<p>The calling test instance (class containing the test method) must
provide a <code class="docutils literal notranslate"><span class="pre">.getrunner()</span></code> method which should return a runner which
can run the test protocol for a single item, e.g.
<code class="docutils literal notranslate"><span class="pre">_pytest.runner.runtestprotocol</span></code>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id32">
<span class="sig-name descname"><span class="pre">inline_runsource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cmdlineargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.inline_runsource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id32" title="Link to this definition">¶</a></dt>
<dd><p>Run a test module in process using <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code>.</p>
<p>This run writes “source” into a temporary file and runs
<code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> on it, returning a <a class="reference internal" href="#id70" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a> instance
for the result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The source code of the test module.</p></li>
<li><p><strong>cmdlineargs</strong> – Any extra command line arguments to use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id33">
<span class="sig-name descname"><span class="pre">inline_genitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.inline_genitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id33" title="Link to this definition">¶</a></dt>
<dd><p>Run <code class="docutils literal notranslate"><span class="pre">pytest.main(['--collect-only'])</span></code> in-process.</p>
<p>Runs the <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a> function to run all of pytest inside
the test process itself like <a class="reference internal" href="#id34" title="pytest.Pytester.inline_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">inline_run()</span></code></a>, but returns a
tuple of the collected items and a <a class="reference internal" href="#id70" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a> instance.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id34">
<span class="sig-name descname"><span class="pre">inline_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plugins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_reraise_ctrlc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.inline_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id34" title="Link to this definition">¶</a></dt>
<dd><p>Run <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> in-process, returning a HookRecorder.</p>
<p>Runs the <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a> function to run all of pytest inside
the test process itself.  This means it can return a
<a class="reference internal" href="#id70" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a> instance which gives more detailed results
from that run than can be done by matching stdout/stderr from
<a class="reference internal" href="#id36" title="pytest.Pytester.runpytest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">runpytest()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – Command line arguments to pass to <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a>.</p></li>
<li><p><strong>plugins</strong> – Extra plugin instances the <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> instance should use.</p></li>
<li><p><strong>no_reraise_ctrlc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Typically we reraise keyboard interrupts from the child run. If
True, the KeyboardInterrupt exception is captured.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id35">
<span class="sig-name descname"><span class="pre">runpytest_inprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.runpytest_inprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id35" title="Link to this definition">¶</a></dt>
<dd><p>Return result of running pytest in-process, providing a similar
interface to what self.runpytest() provides.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id36">
<span class="sig-name descname"><span class="pre">runpytest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.runpytest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id36" title="Link to this definition">¶</a></dt>
<dd><p>Run pytest inline or in a subprocess, depending on the command line
option “–runpytest” and return a <a class="reference internal" href="#id50" title="pytest.RunResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunResult</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id37">
<span class="sig-name descname"><span class="pre">parseconfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.parseconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id37" title="Link to this definition">¶</a></dt>
<dd><p>Return a new pytest <a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Config</span></code></a> instance from given
commandline args.</p>
<p>This invokes the pytest bootstrapping code in _pytest.config to create a
new <a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.PytestPluginManager</span></code></a> and call the
<a class="reference internal" href="#std:hook-1"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_cmdline_parse</span></code></a> hook to create a new <a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Config</span></code></a>
instance.</p>
<p>If <a class="reference internal" href="#id13" title="pytest.Pytester.plugins"><code class="xref py py-attr docutils literal notranslate"><span class="pre">plugins</span></code></a> has been populated they should be plugin modules
to be registered with the plugin manager.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id38">
<span class="sig-name descname"><span class="pre">parseconfigure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.parseconfigure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id38" title="Link to this definition">¶</a></dt>
<dd><p>Return a new pytest configured Config instance.</p>
<p>Returns a new <a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Config</span></code></a> instance like
<a class="reference internal" href="#id37" title="pytest.Pytester.parseconfig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfig()</span></code></a>, but also calls the <a class="reference internal" href="#std:hook-5"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_configure</span></code></a>
hook.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id39">
<span class="sig-name descname"><span class="pre">getitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funcname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'test_func'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.getitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id39" title="Link to this definition">¶</a></dt>
<dd><p>Return the test item for a test function.</p>
<p>Writes the source to a python file and runs pytest’s collection on
the resulting module, returning the test item for the requested
function name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – The module source.</p></li>
<li><p><strong>funcname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name of the test function for which to return a test item.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The test item.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><em>Item</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id40">
<span class="sig-name descname"><span class="pre">getitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.getitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id40" title="Link to this definition">¶</a></dt>
<dd><p>Return all test items collected from the module.</p>
<p>Writes the source to a Python file and runs pytest’s collection on
the resulting module, returning all test items contained within.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id41">
<span class="sig-name descname"><span class="pre">getmodulecol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">withinit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.getmodulecol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id41" title="Link to this definition">¶</a></dt>
<dd><p>Return the module collection node for <code class="docutils literal notranslate"><span class="pre">source</span></code>.</p>
<p>Writes <code class="docutils literal notranslate"><span class="pre">source</span></code> to a file using <a class="reference internal" href="#id22" title="pytest.Pytester.makepyfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">makepyfile()</span></code></a> and then
runs the pytest collection on it, returning the collection node for the
test module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – The source code of the module to collect.</p></li>
<li><p><strong>configargs</strong> – Any extra arguments to pass to <a class="reference internal" href="#id38" title="pytest.Pytester.parseconfigure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfigure()</span></code></a>.</p></li>
<li><p><strong>withinit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to also write an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file to the same
directory to ensure it is a package.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id42">
<span class="sig-name descname"><span class="pre">collect_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modcol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.collect_by_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id42" title="Link to this definition">¶</a></dt>
<dd><p>Return the collection node for name from the module collection.</p>
<p>Searches a module collection node for a collection node matching the
given name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>modcol</strong> (<a class="reference internal" href="#pytest.Collector" title="_pytest.nodes.Collector"><em>Collector</em></a>) – A module collection node; see <a class="reference internal" href="#id41" title="pytest.Pytester.getmodulecol"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getmodulecol()</span></code></a>.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name of the node to return.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id43">
<span class="sig-name descname"><span class="pre">popen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmdargs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stderr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">NotSetType.token</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.popen"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id43" title="Link to this definition">¶</a></dt>
<dd><p>Invoke <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>.</p>
<p>Calls <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> making sure the current working
directory is in <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>.</p>
<p>You probably want to use <a class="reference internal" href="#id44" title="pytest.Pytester.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> instead.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id44">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cmdargs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">NotSetType.token</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id44" title="Link to this definition">¶</a></dt>
<dd><p>Run a command with arguments.</p>
<p>Run a process using <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> saving the stdout and
stderr.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmdargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – The sequence of arguments to pass to <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>,
with path-like objects being converted to <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>
automatically.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em> | </em><em>None</em>) – The period in seconds after which to timeout and raise
<a class="reference internal" href="#id12" title="pytest.Pytester.TimeoutExpired"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester.TimeoutExpired</span></code></a>.</p></li>
<li><p><strong>stdin</strong> (<em>_pytest.compat.NotSetType</em><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><em>bytes</em></a><em> | </em><em>IO</em><em>[</em><em>Any</em><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – <p>Optional standard input.</p>
<ul>
<li><p>If it is <code class="docutils literal notranslate"><span class="pre">CLOSE_STDIN</span></code> (Default), then this method calls
<a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> with <code class="docutils literal notranslate"><span class="pre">stdin=subprocess.PIPE</span></code>, and
the standard input is closed immediately after the new command is
started.</p></li>
<li><p>If it is of type <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, these bytes are sent to the
standard input of the command.</p></li>
<li><p>Otherwise, it is passed through to <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>.
For further information in this case, consult the document of the
<code class="docutils literal notranslate"><span class="pre">stdin</span></code> parameter in <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The result.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#id50" title="_pytest.pytester.RunResult"><em>RunResult</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id45">
<span class="sig-name descname"><span class="pre">runpython</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">script</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.runpython"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id45" title="Link to this definition">¶</a></dt>
<dd><p>Run a python script using sys.executable as interpreter.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id46">
<span class="sig-name descname"><span class="pre">runpython_c</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.runpython_c"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id46" title="Link to this definition">¶</a></dt>
<dd><p>Run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-c</span> <span class="pre">&quot;command&quot;</span></code>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id47">
<span class="sig-name descname"><span class="pre">runpytest_subprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.runpytest_subprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id47" title="Link to this definition">¶</a></dt>
<dd><p>Run pytest as a subprocess with given arguments.</p>
<p>Any plugins added to the <a class="reference internal" href="#id13" title="pytest.Pytester.plugins"><code class="xref py py-attr docutils literal notranslate"><span class="pre">plugins</span></code></a> list will be added using the
<code class="docutils literal notranslate"><span class="pre">-p</span></code> command line option.  Additionally <code class="docutils literal notranslate"><span class="pre">--basetemp</span></code> is used to put
any temporary files and directories in a numbered directory prefixed
with “runpytest-” to not conflict with the normal numbered pytest
location for temporary files and directories.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><em>PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – The sequence of arguments to pass to the pytest subprocess.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em> | </em><em>None</em>) – The period in seconds after which to timeout and raise
<a class="reference internal" href="#id12" title="pytest.Pytester.TimeoutExpired"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester.TimeoutExpired</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The result.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#id50" title="_pytest.pytester.RunResult"><em>RunResult</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id48">
<span class="sig-name descname"><span class="pre">spawn_pytest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.spawn_pytest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id48" title="Link to this definition">¶</a></dt>
<dd><p>Run pytest using pexpect.</p>
<p>This makes sure to use the right pytest and sets up the temporary
directory locations.</p>
<p>The pexpect child is returned.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id49">
<span class="sig-name descname"><span class="pre">spawn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#Pytester.spawn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id49" title="Link to this definition">¶</a></dt>
<dd><p>Run a command using pexpect.</p>
<p>The pexpect child is returned.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="id50">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RunResult</span></span><a class="reference internal" href="../_modules/_pytest/pytester.html#RunResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id50" title="Link to this definition">¶</a></dt>
<dd><p>The result of running a command from <a class="reference internal" href="#id11" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a>.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="id51">
<span class="sig-name descname"><span class="pre">ret</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#pytest.ExitCode" title="_pytest.config.ExitCode"><span class="pre">ExitCode</span></a></em><a class="headerlink" href="#id51" title="Link to this definition">¶</a></dt>
<dd><p>The return value.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id52">
<span class="sig-name descname"><span class="pre">outlines</span></span><a class="headerlink" href="#id52" title="Link to this definition">¶</a></dt>
<dd><p>List of lines captured from stdout.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id53">
<span class="sig-name descname"><span class="pre">errlines</span></span><a class="headerlink" href="#id53" title="Link to this definition">¶</a></dt>
<dd><p>List of lines captured from stderr.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id54">
<span class="sig-name descname"><span class="pre">stdout</span></span><a class="headerlink" href="#id54" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#id60" title="pytest.LineMatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">LineMatcher</span></code></a> of stdout.</p>
<p>Use e.g. <a class="reference internal" href="#id61" title="pytest.LineMatcher.__str__"><code class="xref py py-func docutils literal notranslate"><span class="pre">str(stdout)</span></code></a> to reconstruct stdout, or the commonly used
<a class="reference internal" href="#id65" title="pytest.LineMatcher.fnmatch_lines"><code class="xref py py-func docutils literal notranslate"><span class="pre">stdout.fnmatch_lines()</span></code></a> method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id55">
<span class="sig-name descname"><span class="pre">stderr</span></span><a class="headerlink" href="#id55" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#id60" title="pytest.LineMatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">LineMatcher</span></code></a> of stderr.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id56">
<span class="sig-name descname"><span class="pre">duration</span></span><a class="headerlink" href="#id56" title="Link to this definition">¶</a></dt>
<dd><p>Duration in seconds.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id57">
<span class="sig-name descname"><span class="pre">parseoutcomes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#RunResult.parseoutcomes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id57" title="Link to this definition">¶</a></dt>
<dd><p>Return a dictionary of outcome noun -&gt; count from parsing the terminal
output that the test process produced.</p>
<p>The returned nouns will always be in plural form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">=======</span> <span class="mi">1</span> <span class="n">failed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">passed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span><span class="p">,</span> <span class="mi">1</span> <span class="n">error</span> <span class="ow">in</span> <span class="mf">0.13</span><span class="n">s</span> <span class="o">====</span>
</pre></div>
</div>
<p>Will return <code class="docutils literal notranslate"><span class="pre">{&quot;failed&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;passed&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;warnings&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;errors&quot;:</span> <span class="pre">1}</span></code>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id58">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">parse_summary_nouns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#RunResult.parse_summary_nouns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id58" title="Link to this definition">¶</a></dt>
<dd><p>Extract the nouns from a pytest terminal summary line.</p>
<p>It always returns the plural noun for consistency:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">=======</span> <span class="mi">1</span> <span class="n">failed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">passed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span><span class="p">,</span> <span class="mi">1</span> <span class="n">error</span> <span class="ow">in</span> <span class="mf">0.13</span><span class="n">s</span> <span class="o">====</span>
</pre></div>
</div>
<p>Will return <code class="docutils literal notranslate"><span class="pre">{&quot;failed&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;passed&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;warnings&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;errors&quot;:</span> <span class="pre">1}</span></code>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id59">
<span class="sig-name descname"><span class="pre">assert_outcomes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipped</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">failed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xpassed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xfailed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warnings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deselected</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#RunResult.assert_outcomes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id59" title="Link to this definition">¶</a></dt>
<dd><p>Assert that the specified outcomes appear with the respective
numbers (0 means it didn’t occur) in the text output from a test run.</p>
<p><code class="docutils literal notranslate"><span class="pre">warnings</span></code> and <code class="docutils literal notranslate"><span class="pre">deselected</span></code> are only checked if not None.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="id60">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">LineMatcher</span></span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id60" title="Link to this definition">¶</a></dt>
<dd><p>Flexible matching of text.</p>
<p>This is a convenience class to test large texts like the output of
commands.</p>
<p>The constructor takes a list of lines without their trailing newlines, i.e.
<code class="docutils literal notranslate"><span class="pre">text.splitlines()</span></code>.</p>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="id61">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.__str__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id61" title="Link to this definition">¶</a></dt>
<dd><p>Return the entire original text.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 6.2: </span>You can use <a class="reference internal" href="#id69" title="pytest.LineMatcher.str"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str()</span></code></a> in older versions.</p>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id62">
<span class="sig-name descname"><span class="pre">fnmatch_lines_random</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.fnmatch_lines_random"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id62" title="Link to this definition">¶</a></dt>
<dd><p>Check lines exist in the output in any order (using <a class="reference external" href="https://docs.python.org/3/library/fnmatch.html#fnmatch.fnmatch" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">fnmatch.fnmatch()</span></code></a>).</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id63">
<span class="sig-name descname"><span class="pre">re_match_lines_random</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.re_match_lines_random"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id63" title="Link to this definition">¶</a></dt>
<dd><p>Check lines exist in the output in any order (using <a class="reference external" href="https://docs.python.org/3/library/re.html#re.match" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">re.match()</span></code></a>).</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id64">
<span class="sig-name descname"><span class="pre">get_lines_after</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fnline</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.get_lines_after"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id64" title="Link to this definition">¶</a></dt>
<dd><p>Return all lines following the given line in the text.</p>
<p>The given line can contain glob wildcards.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id65">
<span class="sig-name descname"><span class="pre">fnmatch_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consecutive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.fnmatch_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id65" title="Link to this definition">¶</a></dt>
<dd><p>Check lines exist in the output (using <a class="reference external" href="https://docs.python.org/3/library/fnmatch.html#fnmatch.fnmatch" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">fnmatch.fnmatch()</span></code></a>).</p>
<p>The argument is a list of lines which have to match and can use glob
wildcards.  If they do not match a pytest.fail() is called.  The
matches and non-matches are also shown as part of the error message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines2</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – String patterns to match.</p></li>
<li><p><strong>consecutive</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Match lines consecutively?</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id66">
<span class="sig-name descname"><span class="pre">re_match_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consecutive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.re_match_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id66" title="Link to this definition">¶</a></dt>
<dd><p>Check lines exist in the output (using <a class="reference external" href="https://docs.python.org/3/library/re.html#re.match" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">re.match()</span></code></a>).</p>
<p>The argument is a list of lines which have to match using <code class="docutils literal notranslate"><span class="pre">re.match</span></code>.
If they do not match a pytest.fail() is called.</p>
<p>The matches and non-matches are also shown as part of the error message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines2</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – string patterns to match.</p></li>
<li><p><strong>consecutive</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – match lines consecutively?</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id67">
<span class="sig-name descname"><span class="pre">no_fnmatch_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.no_fnmatch_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id67" title="Link to this definition">¶</a></dt>
<dd><p>Ensure captured lines do not match the given pattern, using <code class="docutils literal notranslate"><span class="pre">fnmatch.fnmatch</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pat</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The pattern to match lines.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id68">
<span class="sig-name descname"><span class="pre">no_re_match_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.no_re_match_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id68" title="Link to this definition">¶</a></dt>
<dd><p>Ensure captured lines do not match the given pattern, using <code class="docutils literal notranslate"><span class="pre">re.match</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pat</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The regular expression to match lines.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id69">
<span class="sig-name descname"><span class="pre">str</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#LineMatcher.str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id69" title="Link to this definition">¶</a></dt>
<dd><p>Return the entire original text.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="id70">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">HookRecorder</span></span><a class="reference internal" href="../_modules/_pytest/pytester.html#HookRecorder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id70" title="Link to this definition">¶</a></dt>
<dd><p>Record all hooks called in a plugin manager.</p>
<p>Hook recorders are created by <a class="reference internal" href="#id11" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a>.</p>
<p>This wraps all the hook calls in the plugin manager, recording each call
before propagating the normal calls.</p>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="id71">
<span class="sig-name descname"><span class="pre">getcalls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#HookRecorder.getcalls"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id71" title="Link to this definition">¶</a></dt>
<dd><p>Get all recorded calls to hooks with the given names (or name).</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id72">
<span class="sig-name descname"><span class="pre">matchreport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inamepart</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">('pytest_runtest_logreport',</span> <span class="pre">'pytest_collectreport')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">when</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/pytester.html#HookRecorder.matchreport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id72" title="Link to this definition">¶</a></dt>
<dd><p>Return a testreport whose dotted import path matches.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="id73">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RecordedHookCall</span></span><a class="reference internal" href="../_modules/_pytest/pytester.html#RecordedHookCall"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id73" title="Link to this definition">¶</a></dt>
<dd><p>A recorded call to a hook.</p>
<p>The arguments to the hook call are set as attributes.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">calls</span> <span class="o">=</span> <span class="n">hook_recorder</span><span class="o">.</span><span class="n">getcalls</span><span class="p">(</span><span class="s2">&quot;pytest_runtest_setup&quot;</span><span class="p">)</span>
<span class="c1"># Suppose pytest_runtest_setup was called once with `item=an_item`.</span>
<span class="k">assert</span> <span class="n">calls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">item</span> <span class="ow">is</span> <span class="n">an_item</span>
</pre></div>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

</div></div>
</section>
<section id="record-property">
<span id="std:fixture-1"></span><h3>record_property<a class="headerlink" href="#record-property" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/output.html#record-property-example"><span class="std std-ref">record_property fixture</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.junitxml.record_property">
<span class="sig-name descname"><span class="pre">record_property</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/junitxml.html#record_property"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.junitxml.record_property" title="Link to this definition">¶</a></dt>
<dd><p>Add extra properties to the calling test.</p>
<p>User properties become part of the test report and are available to the
configured reporters, like JUnit XML.</p>
<p>The fixture is callable with <code class="docutils literal notranslate"><span class="pre">name,</span> <span class="pre">value</span></code>. The value is automatically
XML-encoded.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_function</span><span class="p">(</span><span class="n">record_property</span><span class="p">):</span>
    <span class="n">record_property</span><span class="p">(</span><span class="s2">&quot;example_key&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

</section>
<section id="record-testsuite-property">
<span id="std-fixture-record_testsuite_property"></span><h3>record_testsuite_property<a class="headerlink" href="#record-testsuite-property" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/output.html#record-testsuite-property-example"><span class="std std-ref">record_testsuite_property fixture</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.junitxml.record_testsuite_property">
<span class="sig-name descname"><span class="pre">record_testsuite_property</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/junitxml.html#record_testsuite_property"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.junitxml.record_testsuite_property" title="Link to this definition">¶</a></dt>
<dd><p>Record a new <code class="docutils literal notranslate"><span class="pre">&lt;property&gt;</span></code> tag as child of the root <code class="docutils literal notranslate"><span class="pre">&lt;testsuite&gt;</span></code>.</p>
<p>This is suitable to writing global information regarding the entire test
suite, and is compatible with <code class="docutils literal notranslate"><span class="pre">xunit2</span></code> JUnit family.</p>
<p>This is a <code class="docutils literal notranslate"><span class="pre">session</span></code>-scoped fixture which is called with <code class="docutils literal notranslate"><span class="pre">(name,</span> <span class="pre">value)</span></code>. Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">record_testsuite_property</span><span class="p">):</span>
    <span class="n">record_testsuite_property</span><span class="p">(</span><span class="s2">&quot;ARCH&quot;</span><span class="p">,</span> <span class="s2">&quot;PPC&quot;</span><span class="p">)</span>
    <span class="n">record_testsuite_property</span><span class="p">(</span><span class="s2">&quot;STORAGE_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;CEPH&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The property name.</p></li>
<li><p><strong>value</strong> – The property value. Will be converted to a string.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently this fixture <strong>does not work</strong> with the
<a class="reference external" href="https://github.com/pytest-dev/pytest-xdist">pytest-xdist</a> plugin. See
<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7767">#7767</a> for details.</p>
</div>
</dd></dl>

</section>
<section id="recwarn">
<span id="std-fixture-recwarn"></span><h3>recwarn<a class="headerlink" href="#recwarn" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/capture-warnings.html#recwarn"><span class="std std-ref">记录警告</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.recwarn.recwarn">
<span class="sig-name descname"><span class="pre">recwarn</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/recwarn.html#recwarn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.recwarn.recwarn" title="Link to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#pytest.WarningsRecorder" title="_pytest.recwarn.WarningsRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">WarningsRecorder</span></code></a> instance that records all warnings emitted by test functions.</p>
<p>See <a class="reference internal" href="../how-to/capture-warnings.html#warnings"><span class="std std-ref">如何捕获警告</span></a> for information on warning categories.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.WarningsRecorder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">WarningsRecorder</span></span><a class="reference internal" href="../_modules/_pytest/recwarn.html#WarningsRecorder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.WarningsRecorder" title="Link to this definition">¶</a></dt>
<dd><p>A context manager to record raised warnings.</p>
<p>Each recorded warning is an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">warnings.WarningMessage</span></code>.</p>
<p>Adapted from <code class="docutils literal notranslate"><span class="pre">warnings.catch_warnings</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> and <code class="docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code> are treated
differently; see <a class="reference internal" href="../how-to/capture-warnings.html#ensuring-function-triggers"><span class="std std-ref">确保代码触发弃用警告</span></a>.</p>
</div>
<dl class="field-list simple">
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="pytest.WarningsRecorder.list">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">list</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><span class="pre">WarningMessage</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.WarningsRecorder.list" title="Link to this definition">¶</a></dt>
<dd><p>The list of recorded warnings.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.WarningsRecorder.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/recwarn.html#WarningsRecorder.__getitem__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.WarningsRecorder.__getitem__" title="Link to this definition">¶</a></dt>
<dd><p>Get a recorded warning by index.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.WarningsRecorder.__iter__">
<span class="sig-name descname"><span class="pre">__iter__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/recwarn.html#WarningsRecorder.__iter__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.WarningsRecorder.__iter__" title="Link to this definition">¶</a></dt>
<dd><p>Iterate through the recorded warnings.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.WarningsRecorder.__len__">
<span class="sig-name descname"><span class="pre">__len__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/recwarn.html#WarningsRecorder.__len__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.WarningsRecorder.__len__" title="Link to this definition">¶</a></dt>
<dd><p>The number of recorded warnings.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.WarningsRecorder.pop">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls=&lt;class</span> <span class="pre">'Warning'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/recwarn.html#WarningsRecorder.pop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.WarningsRecorder.pop" title="Link to this definition">¶</a></dt>
<dd><p>Pop the first recorded warning which is an instance of <code class="docutils literal notranslate"><span class="pre">cls</span></code>,
but not an instance of a child class of any other match.
Raises <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> if there is no match.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.WarningsRecorder.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/recwarn.html#WarningsRecorder.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.WarningsRecorder.clear" title="Link to this definition">¶</a></dt>
<dd><p>Clear the list of recorded warnings.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="request">
<span id="std-fixture-request"></span><h3>request<a class="headerlink" href="#request" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-14-14-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-14-14-0" name="14-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-14-14-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-14-14-1" name="14-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-14-14-0" class="sphinx-tabs-panel" id="panel-14-14-0" name="14-0" role="tabpanel" tabindex="0"><p><strong>示例</strong>: <a class="reference internal" href="../example/simple.html#request-example"><span class="std std-ref">根据命令行选项将不同的值传递给测试函数</span></a></p>
<p><code class="docutils literal notranslate"><span class="pre">request</span></code> 固件是一个特殊的固件，提供请求测试函数的信息。</p>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.FixtureRequest">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FixtureRequest</span></span><a class="reference internal" href="../_modules/_pytest/fixtures.html#FixtureRequest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.FixtureRequest" title="Link to this definition">¶</a></dt>
<dd><p>The type of the <code class="docutils literal notranslate"><span class="pre">request</span></code> fixture.</p>
<p>A request object gives access to the requesting test context and has a
<code class="docutils literal notranslate"><span class="pre">param</span></code> attribute in case the fixture is parametrized.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.FixtureRequest.fixturename">
<span class="sig-name descname"><span class="pre">fixturename</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Final" title="(in Python v3.13)"><span class="pre">Final</span></a></em><a class="headerlink" href="#pytest.FixtureRequest.fixturename" title="Link to this definition">¶</a></dt>
<dd><p>Fixture for which this request is being performed.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.FixtureRequest.scope">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scope</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'session'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'package'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'module'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'class'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'function'</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.FixtureRequest.scope" title="Link to this definition">¶</a></dt>
<dd><p>Scope string, one of “function”, “class”, “module”, “package”, “session”.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.FixtureRequest.fixturenames">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fixturenames</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.FixtureRequest.fixturenames" title="Link to this definition">¶</a></dt>
<dd><p>Names of all active fixtures in this request.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.FixtureRequest.node">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">node</span></span><a class="headerlink" href="#pytest.FixtureRequest.node" title="Link to this definition">¶</a></dt>
<dd><p>Underlying collection node (depends on current request scope).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.FixtureRequest.config">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="_pytest.config.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.FixtureRequest.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object associated with this request.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.FixtureRequest.function">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">function</span></span><a class="headerlink" href="#pytest.FixtureRequest.function" title="Link to this definition">¶</a></dt>
<dd><p>Test function object if the request has a per-function scope.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.FixtureRequest.cls">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cls</span></span><a class="headerlink" href="#pytest.FixtureRequest.cls" title="Link to this definition">¶</a></dt>
<dd><p>Class (can be None) where the test function was collected.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.FixtureRequest.instance">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">instance</span></span><a class="headerlink" href="#pytest.FixtureRequest.instance" title="Link to this definition">¶</a></dt>
<dd><p>Instance (can be None) on which test function was collected.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.FixtureRequest.module">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">module</span></span><a class="headerlink" href="#pytest.FixtureRequest.module" title="Link to this definition">¶</a></dt>
<dd><p>Python module object where the test function was collected.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.FixtureRequest.path">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></em><a class="headerlink" href="#pytest.FixtureRequest.path" title="Link to this definition">¶</a></dt>
<dd><p>Path where the test function was collected.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.FixtureRequest.keywords">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">keywords</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableMapping" title="(in Python v3.13)"><span class="pre">MutableMapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.FixtureRequest.keywords" title="Link to this definition">¶</a></dt>
<dd><p>Keywords/markers dictionary for the underlying node.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.FixtureRequest.session">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="_pytest.main.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.FixtureRequest.session" title="Link to this definition">¶</a></dt>
<dd><p>Pytest session object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.FixtureRequest.addfinalizer">
<em class="property"><span class="pre">abstractmethod</span> </em><span class="sig-name descname"><span class="pre">addfinalizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">finalizer</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/fixtures.html#FixtureRequest.addfinalizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.FixtureRequest.addfinalizer" title="Link to this definition">¶</a></dt>
<dd><p>Add finalizer/teardown function to be called without arguments after
the last test within the requesting test context finished execution.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.FixtureRequest.applymarker">
<span class="sig-name descname"><span class="pre">applymarker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">marker</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/fixtures.html#FixtureRequest.applymarker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.FixtureRequest.applymarker" title="Link to this definition">¶</a></dt>
<dd><p>Apply a marker to a single test function invocation.</p>
<p>This method is useful if you don’t want to have a keyword/marker
on all function invocations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>marker</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference internal" href="#pytest.MarkDecorator" title="_pytest.mark.structures.MarkDecorator"><em>MarkDecorator</em></a>) – An object created by a call to <code class="docutils literal notranslate"><span class="pre">pytest.mark.NAME(...)</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.FixtureRequest.raiseerror">
<span class="sig-name descname"><span class="pre">raiseerror</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/fixtures.html#FixtureRequest.raiseerror"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.FixtureRequest.raiseerror" title="Link to this definition">¶</a></dt>
<dd><p>Raise a FixtureLookupError exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>msg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – An optional custom error message.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.FixtureRequest.getfixturevalue">
<span class="sig-name descname"><span class="pre">getfixturevalue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/fixtures.html#FixtureRequest.getfixturevalue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.FixtureRequest.getfixturevalue" title="Link to this definition">¶</a></dt>
<dd><p>Dynamically run a named fixture function.</p>
<p>Declaring fixtures via function argument is recommended where possible.
But if you can only decide whether to use another fixture at test
setup time, you may use this function to retrieve it inside a fixture
or test function body.</p>
<p>This method can be used during the test setup phase or the test run
phase, but during the test teardown phase a fixture’s value may not
be available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>argname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The fixture name.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pytest.FixtureLookupError" title="pytest.FixtureLookupError"><strong>pytest.FixtureLookupError</strong></a> – If the given fixture could not be found.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div><div aria-labelledby="tab-14-14-1" class="sphinx-tabs-panel" hidden="true" id="panel-14-14-1" name="14-1" role="tabpanel" tabindex="0">
<span id="std-fixture-testdir"></span><p><strong>Example</strong>: <a class="reference internal" href="../example/simple.html#request-example"><span class="std std-ref">根据命令行选项将不同的值传递给测试函数</span></a></p>
<p>The <code class="docutils literal notranslate"><span class="pre">request</span></code> fixture is a special fixture providing information of the requesting test function.</p>
<dl class="py class">
<dt class="sig sig-object py" id="id74">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FixtureRequest</span></span><a class="reference internal" href="../_modules/_pytest/fixtures.html#FixtureRequest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id74" title="Link to this definition">¶</a></dt>
<dd><p>The type of the <code class="docutils literal notranslate"><span class="pre">request</span></code> fixture.</p>
<p>A request object gives access to the requesting test context and has a
<code class="docutils literal notranslate"><span class="pre">param</span></code> attribute in case the fixture is parametrized.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="id75">
<span class="sig-name descname"><span class="pre">fixturename</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Final" title="(in Python v3.13)"><span class="pre">Final</span></a></em><a class="headerlink" href="#id75" title="Link to this definition">¶</a></dt>
<dd><p>Fixture for which this request is being performed.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id76">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scope</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'session'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'package'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'module'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'class'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'function'</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id76" title="Link to this definition">¶</a></dt>
<dd><p>Scope string, one of “function”, “class”, “module”, “package”, “session”.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id77">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fixturenames</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id77" title="Link to this definition">¶</a></dt>
<dd><p>Names of all active fixtures in this request.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id78">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">node</span></span><a class="headerlink" href="#id78" title="Link to this definition">¶</a></dt>
<dd><p>Underlying collection node (depends on current request scope).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id79">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="_pytest.config.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#id79" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object associated with this request.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id80">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">function</span></span><a class="headerlink" href="#id80" title="Link to this definition">¶</a></dt>
<dd><p>Test function object if the request has a per-function scope.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id81">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cls</span></span><a class="headerlink" href="#id81" title="Link to this definition">¶</a></dt>
<dd><p>Class (can be None) where the test function was collected.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id82">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">instance</span></span><a class="headerlink" href="#id82" title="Link to this definition">¶</a></dt>
<dd><p>Instance (can be None) on which test function was collected.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id83">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">module</span></span><a class="headerlink" href="#id83" title="Link to this definition">¶</a></dt>
<dd><p>Python module object where the test function was collected.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id84">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></em><a class="headerlink" href="#id84" title="Link to this definition">¶</a></dt>
<dd><p>Path where the test function was collected.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id85">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">keywords</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableMapping" title="(in Python v3.13)"><span class="pre">MutableMapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id85" title="Link to this definition">¶</a></dt>
<dd><p>Keywords/markers dictionary for the underlying node.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id86">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="_pytest.main.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#id86" title="Link to this definition">¶</a></dt>
<dd><p>Pytest session object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id87">
<em class="property"><span class="pre">abstractmethod</span> </em><span class="sig-name descname"><span class="pre">addfinalizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">finalizer</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/fixtures.html#FixtureRequest.addfinalizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id87" title="Link to this definition">¶</a></dt>
<dd><p>Add finalizer/teardown function to be called without arguments after
the last test within the requesting test context finished execution.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id88">
<span class="sig-name descname"><span class="pre">applymarker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">marker</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/fixtures.html#FixtureRequest.applymarker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id88" title="Link to this definition">¶</a></dt>
<dd><p>Apply a marker to a single test function invocation.</p>
<p>This method is useful if you don’t want to have a keyword/marker
on all function invocations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>marker</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference internal" href="#pytest.MarkDecorator" title="_pytest.mark.structures.MarkDecorator"><em>MarkDecorator</em></a>) – An object created by a call to <code class="docutils literal notranslate"><span class="pre">pytest.mark.NAME(...)</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id89">
<span class="sig-name descname"><span class="pre">raiseerror</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/fixtures.html#FixtureRequest.raiseerror"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id89" title="Link to this definition">¶</a></dt>
<dd><p>Raise a FixtureLookupError exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>msg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – An optional custom error message.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id90">
<span class="sig-name descname"><span class="pre">getfixturevalue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/fixtures.html#FixtureRequest.getfixturevalue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id90" title="Link to this definition">¶</a></dt>
<dd><p>Dynamically run a named fixture function.</p>
<p>Declaring fixtures via function argument is recommended where possible.
But if you can only decide whether to use another fixture at test
setup time, you may use this function to retrieve it inside a fixture
or test function body.</p>
<p>This method can be used during the test setup phase or the test run
phase, but during the test teardown phase a fixture’s value may not
be available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>argname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The fixture name.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pytest.FixtureLookupError" title="pytest.FixtureLookupError"><strong>pytest.FixtureLookupError</strong></a> – If the given fixture could not be found.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div></div>
</section>
<section id="testdir">
<span id="std:fixture-2"></span><h3>testdir<a class="headerlink" href="#testdir" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-15-15-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-15-15-0" name="15-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-15-15-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-15-15-1" name="15-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-15-15-0" class="sphinx-tabs-panel" id="panel-15-15-0" name="15-0" role="tabpanel" tabindex="0"><p>与 <a class="reference internal" href="#std-fixture-pytester"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">pytester</span></code></a> 相同，但在适用时提供返回传统的 <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> 对象的实例方法。</p>
<p>新代码应避免使用 <a class="reference internal" href="#std:fixture-2"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">testdir</span></code></a>，而应使用 <a class="reference internal" href="#std-fixture-pytester"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">pytester</span></code></a>。</p>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Testdir</span></span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Similar to <a class="reference internal" href="#id11" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a>, but this class works with legacy legacy_path objects instead.</p>
<p>All methods just forward to an internal <a class="reference internal" href="#id11" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a> instance, converting results
to <code class="docutils literal notranslate"><span class="pre">legacy_path</span></code> objects as necessary.</p>
<dl class="field-list simple">
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TimeoutExpired</span></span></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tmpdir</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LocalPath</span></em></dt>
<dd><p>Temporary directory where tests are executed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">make_hook_recorder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.make_hook_recorder"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id15" title="pytest.Pytester.make_hook_recorder"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.make_hook_recorder()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">chdir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.chdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id16" title="pytest.Pytester.chdir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.chdir()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">makefile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.makefile"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id17" title="pytest.Pytester.makefile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makefile()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">makeconftest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.makeconftest"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id18" title="pytest.Pytester.makeconftest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makeconftest()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">makeini</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.makeini"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id19" title="pytest.Pytester.makeini"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makeini()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">getinicfg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.getinicfg"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id20" title="pytest.Pytester.getinicfg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getinicfg()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">makepyprojecttoml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.makepyprojecttoml"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id21" title="pytest.Pytester.makepyprojecttoml"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makepyprojecttoml()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">makepyfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.makepyfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id22" title="pytest.Pytester.makepyfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makepyfile()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">maketxtfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.maketxtfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id23" title="pytest.Pytester.maketxtfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.maketxtfile()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">syspathinsert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.syspathinsert"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id24" title="pytest.Pytester.syspathinsert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.syspathinsert()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">mkdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.mkdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id25" title="pytest.Pytester.mkdir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.mkdir()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">mkpydir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.mkpydir"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id26" title="pytest.Pytester.mkpydir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.mkpydir()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">copy_example</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.copy_example"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id27" title="pytest.Pytester.copy_example"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.copy_example()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">getnode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.getnode"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id28" title="pytest.Pytester.getnode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getnode()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">getpathnode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.getpathnode"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id29" title="pytest.Pytester.getpathnode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getpathnode()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">genitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">colitems</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.genitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id30" title="pytest.Pytester.genitems"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.genitems()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">runitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.runitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id31" title="pytest.Pytester.runitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runitem()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">inline_runsource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cmdlineargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.inline_runsource"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id32" title="pytest.Pytester.inline_runsource"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.inline_runsource()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">inline_genitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.inline_genitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id33" title="pytest.Pytester.inline_genitems"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.inline_genitems()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">inline_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plugins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_reraise_ctrlc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.inline_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id34" title="pytest.Pytester.inline_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.inline_run()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">runpytest_inprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.runpytest_inprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id35" title="pytest.Pytester.runpytest_inprocess"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpytest_inprocess()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">runpytest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.runpytest"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id36" title="pytest.Pytester.runpytest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpytest()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">parseconfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.parseconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id37" title="pytest.Pytester.parseconfig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.parseconfig()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">parseconfigure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.parseconfigure"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id38" title="pytest.Pytester.parseconfigure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.parseconfigure()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">getitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funcname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'test_func'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.getitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id39" title="pytest.Pytester.getitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getitem()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">getitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.getitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id40" title="pytest.Pytester.getitems"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getitems()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">getmodulecol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">withinit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.getmodulecol"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id41" title="pytest.Pytester.getmodulecol"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getmodulecol()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">collect_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modcol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.collect_by_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id42" title="pytest.Pytester.collect_by_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.collect_by_name()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">popen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmdargs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stderr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">NotSetType.token</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.popen"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id43" title="pytest.Pytester.popen"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.popen()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cmdargs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">NotSetType.token</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id44" title="pytest.Pytester.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.run()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">runpython</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">script</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.runpython"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id45" title="pytest.Pytester.runpython"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpython()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">runpython_c</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.runpython_c"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id46" title="pytest.Pytester.runpython_c"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpython_c()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">runpytest_subprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.runpytest_subprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id47" title="pytest.Pytester.runpytest_subprocess"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpytest_subprocess()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">spawn_pytest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.spawn_pytest"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id48" title="pytest.Pytester.spawn_pytest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.spawn_pytest()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">spawn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.spawn"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id49" title="pytest.Pytester.spawn"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.spawn()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

</div><div aria-labelledby="tab-15-15-1" class="sphinx-tabs-panel" hidden="true" id="panel-15-15-1" name="15-1" role="tabpanel" tabindex="0">
<span id="std-fixture-tmp_path"></span><p>Identical to <a class="reference internal" href="#std-fixture-pytester"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">pytester</span></code></a>, but provides an instance whose methods return
legacy <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> objects instead when applicable.</p>
<p>New code should avoid using <a class="reference internal" href="#std:fixture-2"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">testdir</span></code></a> in favor of <a class="reference internal" href="#std-fixture-pytester"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">pytester</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Testdir</span></span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Similar to <a class="reference internal" href="#id11" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a>, but this class works with legacy legacy_path objects instead.</p>
<p>All methods just forward to an internal <a class="reference internal" href="#id11" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a> instance, converting results
to <code class="docutils literal notranslate"><span class="pre">legacy_path</span></code> objects as necessary.</p>
<dl class="field-list simple">
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TimeoutExpired</span></span></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tmpdir</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LocalPath</span></em></dt>
<dd><p>Temporary directory where tests are executed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">make_hook_recorder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.make_hook_recorder"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id15" title="pytest.Pytester.make_hook_recorder"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.make_hook_recorder()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">chdir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.chdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id16" title="pytest.Pytester.chdir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.chdir()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">makefile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.makefile"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id17" title="pytest.Pytester.makefile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makefile()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">makeconftest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.makeconftest"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id18" title="pytest.Pytester.makeconftest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makeconftest()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">makeini</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.makeini"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id19" title="pytest.Pytester.makeini"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makeini()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">getinicfg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.getinicfg"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id20" title="pytest.Pytester.getinicfg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getinicfg()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">makepyprojecttoml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.makepyprojecttoml"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id21" title="pytest.Pytester.makepyprojecttoml"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makepyprojecttoml()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">makepyfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.makepyfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id22" title="pytest.Pytester.makepyfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makepyfile()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">maketxtfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.maketxtfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id23" title="pytest.Pytester.maketxtfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.maketxtfile()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">syspathinsert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.syspathinsert"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id24" title="pytest.Pytester.syspathinsert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.syspathinsert()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">mkdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.mkdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id25" title="pytest.Pytester.mkdir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.mkdir()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">mkpydir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.mkpydir"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id26" title="pytest.Pytester.mkpydir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.mkpydir()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">copy_example</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.copy_example"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id27" title="pytest.Pytester.copy_example"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.copy_example()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">getnode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.getnode"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id28" title="pytest.Pytester.getnode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getnode()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">getpathnode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.getpathnode"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id29" title="pytest.Pytester.getpathnode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getpathnode()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">genitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">colitems</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.genitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id30" title="pytest.Pytester.genitems"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.genitems()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">runitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.runitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id31" title="pytest.Pytester.runitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runitem()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">inline_runsource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cmdlineargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.inline_runsource"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id32" title="pytest.Pytester.inline_runsource"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.inline_runsource()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">inline_genitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.inline_genitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id33" title="pytest.Pytester.inline_genitems"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.inline_genitems()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">inline_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plugins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_reraise_ctrlc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.inline_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id34" title="pytest.Pytester.inline_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.inline_run()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">runpytest_inprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.runpytest_inprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id35" title="pytest.Pytester.runpytest_inprocess"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpytest_inprocess()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">runpytest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.runpytest"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id36" title="pytest.Pytester.runpytest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpytest()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">parseconfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.parseconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id37" title="pytest.Pytester.parseconfig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.parseconfig()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">parseconfigure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.parseconfigure"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id38" title="pytest.Pytester.parseconfigure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.parseconfigure()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">getitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funcname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'test_func'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.getitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id39" title="pytest.Pytester.getitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getitem()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">getitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.getitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id40" title="pytest.Pytester.getitems"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getitems()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">getmodulecol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">withinit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.getmodulecol"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id41" title="pytest.Pytester.getmodulecol"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getmodulecol()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">collect_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modcol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.collect_by_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id42" title="pytest.Pytester.collect_by_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.collect_by_name()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">popen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmdargs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stderr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">NotSetType.token</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.popen"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id43" title="pytest.Pytester.popen"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.popen()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cmdargs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">NotSetType.token</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id44" title="pytest.Pytester.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.run()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">runpython</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">script</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.runpython"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id45" title="pytest.Pytester.runpython"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpython()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">runpython_c</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.runpython_c"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id46" title="pytest.Pytester.runpython_c"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpython_c()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">runpytest_subprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.runpytest_subprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id47" title="pytest.Pytester.runpytest_subprocess"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpytest_subprocess()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">spawn_pytest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.spawn_pytest"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id48" title="pytest.Pytester.spawn_pytest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.spawn_pytest()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">spawn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#Testdir.spawn"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>See <a class="reference internal" href="#id49" title="pytest.Pytester.spawn"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.spawn()</span></code></a>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

</div></div>
</section>
<section id="tmp-path">
<span id="std:fixture-3"></span><h3>tmp_path<a class="headerlink" href="#tmp-path" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/tmp_path.html#tmp-path"><span class="std std-ref">如何在测试中使用临时目录和文件</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.tmpdir.tmp_path">
<span class="sig-name descname"><span class="pre">tmp_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/tmpdir.html#tmp_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.tmpdir.tmp_path" title="Link to this definition">¶</a></dt>
<dd><p>Return a temporary directory path object which is unique to each test
function invocation, created as a sub directory of the base temporary
directory.</p>
<p>By default, a new base temporary directory is created each test session,
and old bases are removed after 3 sessions, to aid in debugging.
This behavior can be configured with <a class="reference internal" href="#confval-36"><code class="xref std std-confval docutils literal notranslate"><span class="pre">tmp_path_retention_count</span></code></a> and
<a class="reference internal" href="#confval-37"><code class="xref std std-confval docutils literal notranslate"><span class="pre">tmp_path_retention_policy</span></code></a>.
If <code class="docutils literal notranslate"><span class="pre">--basetemp</span></code> is used then it is cleared each session. See
<a class="reference internal" href="../how-to/tmp_path.html#temporary-directory-location-and-retention"><span class="std std-ref">临时目录位置和保留</span></a>.</p>
<p>The returned object is a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> object.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</section>
<section id="tmp-path-factory">
<span id="std-fixture-tmp_path_factory"></span><h3>tmp_path_factory<a class="headerlink" href="#tmp-path-factory" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/tmp_path.html#tmp-path-factory-example"><span class="std std-ref">tmp_path_factory fixture</span></a></p>
<p id="tmp-path-factory-factory-api"><code class="docutils literal notranslate"><span class="pre">tmp_path_factory</span></code> is an instance of <a class="reference internal" href="#pytest.TempPathFactory" title="pytest.TempPathFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">TempPathFactory</span></code></a>:</p>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.TempPathFactory">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TempPathFactory</span></span><a class="reference internal" href="../_modules/_pytest/tmpdir.html#TempPathFactory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TempPathFactory" title="Link to this definition">¶</a></dt>
<dd><p>Factory for temporary directories under the common base temp directory.</p>
<p>The base directory can be configured using the <code class="docutils literal notranslate"><span class="pre">--basetemp</span></code> option.</p>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.TempPathFactory.mktemp">
<span class="sig-name descname"><span class="pre">mktemp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numbered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/tmpdir.html#TempPathFactory.mktemp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TempPathFactory.mktemp" title="Link to this definition">¶</a></dt>
<dd><p>Create a new temporary directory managed by the factory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>basename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Directory base name, must be a relative path.</p></li>
<li><p><strong>numbered</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, ensure the directory is unique by adding a numbered
suffix greater than any existing one: <code class="docutils literal notranslate"><span class="pre">basename=&quot;foo-&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">numbered=True</span></code>
means that this function will create directories named <code class="docutils literal notranslate"><span class="pre">&quot;foo-0&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;foo-1&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;foo-2&quot;</span></code> and so on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The path to the new directory.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>Path</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.TempPathFactory.getbasetemp">
<span class="sig-name descname"><span class="pre">getbasetemp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/tmpdir.html#TempPathFactory.getbasetemp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TempPathFactory.getbasetemp" title="Link to this definition">¶</a></dt>
<dd><p>Return the base temporary directory, creating it if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The base temporary directory.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>Path</em></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="tmpdir">
<span id="std-fixture-tmpdir"></span><h3>tmpdir<a class="headerlink" href="#tmpdir" title="Link to this heading">¶</a></h3>
<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/tmp_path.html#tmpdir-and-tmpdir-factory"><span class="std std-ref">tmpdir 和 tmpdir_factory fixtures</span></a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.legacypath.LegacyTmpdirPlugin.tmpdir">
<span class="sig-name descname"><span class="pre">tmpdir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.legacypath.LegacyTmpdirPlugin.tmpdir" title="Link to this definition">¶</a></dt>
<dd><p>Return a temporary directory path object which is unique to each test
function invocation, created as a sub directory of the base temporary
directory.</p>
<p>By default, a new base temporary directory is created each test session,
and old bases are removed after 3 sessions, to aid in debugging. If
<code class="docutils literal notranslate"><span class="pre">--basetemp</span></code> is used then it is cleared each session. See
<a class="reference internal" href="../how-to/tmp_path.html#temporary-directory-location-and-retention"><span class="std std-ref">临时目录位置和保留</span></a>.</p>
<p>The returned object is a <a class="reference external" href="https://py.readthedocs.io/en/latest/path.html">legacy_path</a> object.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These days, it is preferred to use <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code>.</p>
<p><a class="reference internal" href="../how-to/tmp_path.html#tmpdir-and-tmpdir-factory"><span class="std std-ref">About the tmpdir and tmpdir_factory fixtures</span></a>.</p>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

</section>
<section id="tmpdir-factory">
<span id="std-fixture-tmpdir_factory"></span><h3>tmpdir_factory<a class="headerlink" href="#tmpdir-factory" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-16-16-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-16-16-0" name="16-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-16-16-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-16-16-1" name="16-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-16-16-0" class="sphinx-tabs-panel" id="panel-16-16-0" name="16-0" role="tabpanel" tabindex="0"><p><strong>教程</strong>: <a class="reference internal" href="../how-to/tmp_path.html#tmpdir-and-tmpdir-factory"><span class="std std-ref">tmpdir 和 tmpdir_factory fixtures</span></a></p>
<p><code class="docutils literal notranslate"><span class="pre">tmpdir_factory</span></code> 是 <a class="reference internal" href="#id91" title="pytest.TempdirFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">TempdirFactory</span></code></a> 的一个实例：</p>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.TempdirFactory">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TempdirFactory</span></span><a class="reference internal" href="../_modules/_pytest/legacypath.html#TempdirFactory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TempdirFactory" title="Link to this definition">¶</a></dt>
<dd><p>Backward compatibility wrapper that implements <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>
for <a class="reference internal" href="#pytest.TempPathFactory" title="pytest.TempPathFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">TempPathFactory</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These days, it is preferred to use <code class="docutils literal notranslate"><span class="pre">tmp_path_factory</span></code>.</p>
<p><a class="reference internal" href="../how-to/tmp_path.html#tmpdir-and-tmpdir-factory"><span class="std std-ref">About the tmpdir and tmpdir_factory fixtures</span></a>.</p>
</div>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.TempdirFactory.mktemp">
<span class="sig-name descname"><span class="pre">mktemp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numbered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#TempdirFactory.mktemp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TempdirFactory.mktemp" title="Link to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#pytest.TempPathFactory.mktemp" title="pytest.TempPathFactory.mktemp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TempPathFactory.mktemp()</span></code></a>, but returns a <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> object.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.TempdirFactory.getbasetemp">
<span class="sig-name descname"><span class="pre">getbasetemp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#TempdirFactory.getbasetemp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TempdirFactory.getbasetemp" title="Link to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#pytest.TempPathFactory.getbasetemp" title="pytest.TempPathFactory.getbasetemp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TempPathFactory.getbasetemp()</span></code></a>, but returns a <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> object.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

</div><div aria-labelledby="tab-16-16-1" class="sphinx-tabs-panel" hidden="true" id="panel-16-16-1" name="16-1" role="tabpanel" tabindex="0"><p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/tmp_path.html#tmpdir-and-tmpdir-factory"><span class="std std-ref">tmpdir 和 tmpdir_factory fixtures</span></a></p>
<p><code class="docutils literal notranslate"><span class="pre">tmpdir_factory</span></code> is an instance of <a class="reference internal" href="#id91" title="pytest.TempdirFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">TempdirFactory</span></code></a>:</p>
<dl class="py class">
<dt class="sig sig-object py" id="id91">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TempdirFactory</span></span><a class="reference internal" href="../_modules/_pytest/legacypath.html#TempdirFactory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id91" title="Link to this definition">¶</a></dt>
<dd><p>Backward compatibility wrapper that implements <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>
for <a class="reference internal" href="#pytest.TempPathFactory" title="pytest.TempPathFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">TempPathFactory</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These days, it is preferred to use <code class="docutils literal notranslate"><span class="pre">tmp_path_factory</span></code>.</p>
<p><a class="reference internal" href="../how-to/tmp_path.html#tmpdir-and-tmpdir-factory"><span class="std std-ref">About the tmpdir and tmpdir_factory fixtures</span></a>.</p>
</div>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="id92">
<span class="sig-name descname"><span class="pre">mktemp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numbered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#TempdirFactory.mktemp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id92" title="Link to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#pytest.TempPathFactory.mktemp" title="pytest.TempPathFactory.mktemp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TempPathFactory.mktemp()</span></code></a>, but returns a <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> object.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id93">
<span class="sig-name descname"><span class="pre">getbasetemp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/legacypath.html#TempdirFactory.getbasetemp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id93" title="Link to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#pytest.TempPathFactory.getbasetemp" title="pytest.TempPathFactory.getbasetemp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TempPathFactory.getbasetemp()</span></code></a>, but returns a <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> object.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

</div></div>
</section>
</section>
<section id="hooks">
<span id="hook-reference"></span><h2>Hooks<a class="headerlink" href="#hooks" title="Link to this heading">¶</a></h2>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-17-17-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-17-17-0" name="17-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-17-17-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-17-17-1" name="17-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-17-17-0" class="sphinx-tabs-panel" id="panel-17-17-0" name="17-0" role="tabpanel" tabindex="0"><p><strong>教程</strong>: <a class="reference internal" href="../how-to/writing_plugins.html#writing-plugins"><span class="std std-ref">编写插件</span></a></p>
<p>参考所有可以通过 <a class="reference internal" href="../how-to/writing_plugins.html#localplugin"><span class="std std-ref">conftest.py 文件</span></a> 和 <a class="reference internal" href="../how-to/writing_plugins.html#plugins"><span class="std std-ref">插件</span></a> 实现的钩子。</p>
</div><div aria-labelledby="tab-17-17-1" class="sphinx-tabs-panel" hidden="true" id="panel-17-17-1" name="17-1" role="tabpanel" tabindex="0"><p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/writing_plugins.html#writing-plugins"><span class="std std-ref">编写插件</span></a></p>
<p>Reference to all hooks which can be implemented by <a class="reference internal" href="../how-to/writing_plugins.html#localplugin"><span class="std std-ref">conftest.py files</span></a> and <a class="reference internal" href="../how-to/writing_plugins.html#plugins"><span class="std std-ref">plugins</span></a>.</p>
</div></div>
<section id="pytest-hookimpl">
<h3>&#64;pytest.hookimpl<a class="headerlink" href="#pytest-hookimpl" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-18-18-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-18-18-0" name="18-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-18-18-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-18-18-1" name="18-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-18-18-0" class="sphinx-tabs-panel" id="panel-18-18-0" name="18-0" role="tabpanel" tabindex="0"><dl class="py function">
<dt class="sig sig-object py" id="pytest.hookimpl">
<span class="sig-prename descclassname"><span class="pre">&#64;</span></span><span class="sig-prename descclassname"><span class="pre">pytest.</span></span><span class="sig-name descname"><span class="pre">hookimpl</span></span><a class="headerlink" href="#pytest.hookimpl" title="Link to this definition">¶</a></dt>
<dd><p>pytest 的装饰器用于将函数标记为钩子实现。</p>
<p>见 <a class="reference internal" href="../how-to/writing_hook_functions.html#writinghooks"><span class="std std-ref">编写钩子函数</span></a> 和 <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.HookimplMarker" title="(in pluggy v0.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">pluggy.HookimplMarker()</span></code></a>.</p>
</dd></dl>

</div><div aria-labelledby="tab-18-18-1" class="sphinx-tabs-panel" hidden="true" id="panel-18-18-1" name="18-1" role="tabpanel" tabindex="0"><dl class="py function">
<dt class="sig sig-object py" id="id94">
<span class="sig-prename descclassname"><span class="pre">&#64;</span></span><span class="sig-prename descclassname"><span class="pre">pytest.</span></span><span class="sig-name descname"><span class="pre">hookimpl</span></span><a class="headerlink" href="#id94" title="Link to this definition">¶</a></dt>
<dd><p>pytest’s decorator for marking functions as hook implementations.</p>
<p>See <a class="reference internal" href="../how-to/writing_hook_functions.html#writinghooks"><span class="std std-ref">编写钩子函数</span></a> and <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.HookimplMarker" title="(in pluggy v0.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">pluggy.HookimplMarker()</span></code></a>.</p>
</dd></dl>

</div></div>
</section>
<section id="pytest-hookspec">
<h3>&#64;pytest.hookspec<a class="headerlink" href="#pytest-hookspec" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-19-19-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-19-19-0" name="19-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-19-19-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-19-19-1" name="19-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-19-19-0" class="sphinx-tabs-panel" id="panel-19-19-0" name="19-0" role="tabpanel" tabindex="0"><dl class="py function">
<dt class="sig sig-object py" id="pytest.hookspec">
<span class="sig-prename descclassname"><span class="pre">&#64;</span></span><span class="sig-prename descclassname"><span class="pre">pytest.</span></span><span class="sig-name descname"><span class="pre">hookspec</span></span><a class="headerlink" href="#pytest.hookspec" title="Link to this definition">¶</a></dt>
<dd><p>pytest 的装饰器用于将函数标记为钩子实现。</p>
<p>见 <a class="reference internal" href="../how-to/writing_hook_functions.html#declaringhooks"><span class="std std-ref">声明新钩子</span></a> and <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.HookspecMarker" title="(in pluggy v0.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">pluggy.HookspecMarker()</span></code></a>.</p>
</dd></dl>

</div><div aria-labelledby="tab-19-19-1" class="sphinx-tabs-panel" hidden="true" id="panel-19-19-1" name="19-1" role="tabpanel" tabindex="0"><dl class="py function">
<dt class="sig sig-object py" id="pytest.hookspec.pytest.hookspec">
<span class="sig-prename descclassname"><span class="pre">&#64;</span></span><span class="sig-prename descclassname"><span class="pre">pytest.</span></span><span class="sig-name descname"><span class="pre">hookspec</span></span><a class="headerlink" href="#pytest.hookspec.pytest.hookspec" title="Link to this definition">¶</a></dt>
<dd><p>pytest’s decorator for marking functions as hook specifications.</p>
<p>See <a class="reference internal" href="../how-to/writing_hook_functions.html#declaringhooks"><span class="std std-ref">声明新钩子</span></a> and <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.HookspecMarker" title="(in pluggy v0.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">pluggy.HookspecMarker()</span></code></a>.</p>
</dd></dl>

</div></div>
</section>
<section id="id95">
<h3>引导钩子<a class="headerlink" href="#id95" title="Link to this heading">¶</a></h3>
<p><strong>Bootstrapping hooks</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-20-20-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-20-20-0" name="20-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-20-20-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-20-20-1" name="20-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-20-20-0" class="sphinx-tabs-panel" id="panel-20-20-0" name="20-0" role="tabpanel" tabindex="0"><p>引导钩子用于早期注册的插件（内部和第三方插件）。</p>
<dl class="py function" id="std-hook-pytest_load_initial_conftests">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_load_initial_conftests">
<span class="sig-name descname"><span class="pre">pytest_load_initial_conftests</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">early_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_load_initial_conftests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_load_initial_conftests" title="Link to this definition">¶</a></dt>
<dd><p>Called to implement the loading of <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftest files</span></a> ahead of command line option parsing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>early_config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – Arguments passed on the command line.</p></li>
<li><p><strong>parser</strong> (<a class="reference internal" href="#pytest.Parser" title="pytest.Parser"><em>Parser</em></a>) – To add command line options.</p></li>
</ul>
</dd>
</dl>
<section id="use-in-conftest-plugins">
<h4>Use in conftest plugins<a class="headerlink" href="#use-in-conftest-plugins" title="Link to this heading">¶</a></h4>
<p>This hook is not called for conftest files.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_cmdline_parse">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_cmdline_parse">
<span class="sig-name descname"><span class="pre">pytest_cmdline_parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_cmdline_parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_cmdline_parse" title="Link to this definition">¶</a></dt>
<dd><p>Return an initialized <a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a>, parsing the specified args.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is only called for plugin classes passed to the
<code class="docutils literal notranslate"><span class="pre">plugins</span></code> arg when using <a class="reference internal" href="#pytest-main">pytest.main</a> to perform an in-process
test run.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pluginmanager</strong> (<a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>PytestPluginManager</em></a>) – The pytest plugin manager.</p></li>
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – List of arguments passed on the command line.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A pytest config object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.Config" title="pytest.Config">Config</a> | None</p>
</dd>
</dl>
<section id="id96">
<h4>Use in conftest plugins<a class="headerlink" href="#id96" title="Link to this heading">¶</a></h4>
<p>This hook is not called for conftest files.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_cmdline_main">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_cmdline_main">
<span class="sig-name descname"><span class="pre">pytest_cmdline_main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_cmdline_main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_cmdline_main" title="Link to this definition">¶</a></dt>
<dd><p>Called for performing the main command line action.</p>
<p>The default implementation will invoke the configure hooks and
<a class="reference internal" href="#std:hook-20"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtestloop</span></code></a>.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The exit code.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.ExitCode" title="pytest.ExitCode">ExitCode</a> | <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a> | None</p>
</dd>
</dl>
<section id="id97">
<h4>Use in conftest plugins<a class="headerlink" href="#id97" title="Link to this heading">¶</a></h4>
<p>This hook is only called for <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftests</span></a>.</p>
</section>
</dd></dl>

</div><div aria-labelledby="tab-20-20-1" class="sphinx-tabs-panel" hidden="true" id="panel-20-20-1" name="20-1" role="tabpanel" tabindex="0"><p>Bootstrapping hooks called for plugins registered early enough (internal and third-party plugins).</p>
<dl class="py function" id="std:hook-0">
<dt class="sig sig-object py" id="id98">
<span class="sig-name descname"><span class="pre">pytest_load_initial_conftests</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">early_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_load_initial_conftests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id98" title="Link to this definition">¶</a></dt>
<dd><p>Called to implement the loading of <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftest files</span></a> ahead of command line option parsing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>early_config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – Arguments passed on the command line.</p></li>
<li><p><strong>parser</strong> (<a class="reference internal" href="#pytest.Parser" title="pytest.Parser"><em>Parser</em></a>) – To add command line options.</p></li>
</ul>
</dd>
</dl>
<section id="id99">
<h4>Use in conftest plugins<a class="headerlink" href="#id99" title="Link to this heading">¶</a></h4>
<p>This hook is not called for conftest files.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-1">
<dt class="sig sig-object py" id="id100">
<span class="sig-name descname"><span class="pre">pytest_cmdline_parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_cmdline_parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id100" title="Link to this definition">¶</a></dt>
<dd><p>Return an initialized <a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a>, parsing the specified args.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is only called for plugin classes passed to the
<code class="docutils literal notranslate"><span class="pre">plugins</span></code> arg when using <a class="reference internal" href="#pytest-main">pytest.main</a> to perform an in-process
test run.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pluginmanager</strong> (<a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>PytestPluginManager</em></a>) – The pytest plugin manager.</p></li>
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – List of arguments passed on the command line.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A pytest config object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.Config" title="pytest.Config">Config</a> | None</p>
</dd>
</dl>
<section id="id101">
<h4>Use in conftest plugins<a class="headerlink" href="#id101" title="Link to this heading">¶</a></h4>
<p>This hook is not called for conftest files.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-2">
<dt class="sig sig-object py" id="id102">
<span class="sig-name descname"><span class="pre">pytest_cmdline_main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_cmdline_main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id102" title="Link to this definition">¶</a></dt>
<dd><p>Called for performing the main command line action.</p>
<p>The default implementation will invoke the configure hooks and
<a class="reference internal" href="#std:hook-20"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtestloop</span></code></a>.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The exit code.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.ExitCode" title="pytest.ExitCode">ExitCode</a> | <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a> | None</p>
</dd>
</dl>
<section id="id103">
<h4>Use in conftest plugins<a class="headerlink" href="#id103" title="Link to this heading">¶</a></h4>
<p>This hook is only called for <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftests</span></a>.</p>
</section>
</dd></dl>

</div></div>
</section>
<section id="initialization-hooks">
<span id="id104"></span><h3>初始化钩子<a class="headerlink" href="#initialization-hooks" title="Link to this heading">¶</a></h3>
<p><strong>Initialization hooks</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-21-21-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-21-21-0" name="21-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-21-21-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-21-21-1" name="21-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-21-21-0" class="sphinx-tabs-panel" id="panel-21-21-0" name="21-0" role="tabpanel" tabindex="0"><p>初始化挂钩调用插件和 <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> 文件。</p>
<dl class="py function" id="std-hook-pytest_addoption">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_addoption">
<span class="sig-name descname"><span class="pre">pytest_addoption</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_addoption"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_addoption" title="Link to this definition">¶</a></dt>
<dd><p>Register argparse-style options and ini-style config values,
called once at the beginning of a test run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parser</strong> (<a class="reference internal" href="#pytest.Parser" title="pytest.Parser"><em>Parser</em></a>) – To add command line options, call
<a class="reference internal" href="#pytest.Parser.addoption" title="pytest.Parser.addoption"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addoption(...)</span></code></a>.
To add ini-file values call <a class="reference internal" href="#pytest.Parser.addini" title="pytest.Parser.addini"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addini(...)</span></code></a>.</p></li>
<li><p><strong>pluginmanager</strong> (<a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>PytestPluginManager</em></a>) – The pytest plugin manager, which can be used to install <a class="reference internal" href="#pytest.hookspec" title="pytest.hookspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">hookspec()</span></code></a>’s
or <a class="reference internal" href="#id94" title="pytest.hookimpl"><code class="xref py py-func docutils literal notranslate"><span class="pre">hookimpl()</span></code></a>’s and allow one plugin to call another plugin’s hooks
to change how command line options are added.</p></li>
</ul>
</dd>
</dl>
<p>Options can later be accessed through the
<a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">config</span></code></a> object, respectively:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pytest.Config.getoption" title="pytest.Config.getoption"><code class="xref py py-func docutils literal notranslate"><span class="pre">config.getoption(name)</span></code></a> to
retrieve the value of a command line option.</p></li>
<li><p><a class="reference internal" href="#pytest.Config.getini" title="pytest.Config.getini"><code class="xref py py-func docutils literal notranslate"><span class="pre">config.getini(name)</span></code></a> to retrieve
a value read from an ini-style file.</p></li>
</ul>
<p>The config object is passed around on many internal objects via the <code class="docutils literal notranslate"><span class="pre">.config</span></code>
attribute or can be retrieved as the <code class="docutils literal notranslate"><span class="pre">pytestconfig</span></code> fixture.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is incompatible with hook wrappers.</p>
</div>
<section id="id105">
<h4>Use in conftest plugins<a class="headerlink" href="#id105" title="Link to this heading">¶</a></h4>
<p>If a conftest plugin implements this hook, it will be called immediately
when the conftest is registered.</p>
<p>This hook is only called for <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftests</span></a>.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_addhooks">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_addhooks">
<span class="sig-name descname"><span class="pre">pytest_addhooks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_addhooks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_addhooks" title="Link to this definition">¶</a></dt>
<dd><p>Called at plugin registration time to allow adding new hooks via a call to
<a class="reference internal" href="#pytest.PytestPluginManager.add_hookspecs" title="pytest.PytestPluginManager.add_hookspecs"><code class="xref py py-func docutils literal notranslate"><span class="pre">pluginmanager.add_hookspecs(module_or_class,</span> <span class="pre">prefix)</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pluginmanager</strong> (<a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>PytestPluginManager</em></a>) – The pytest plugin manager.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is incompatible with hook wrappers.</p>
</div>
<section id="id106">
<h4>Use in conftest plugins<a class="headerlink" href="#id106" title="Link to this heading">¶</a></h4>
<p>If a conftest plugin implements this hook, it will be called immediately
when the conftest is registered.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_configure">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_configure">
<span class="sig-name descname"><span class="pre">pytest_configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_configure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_configure" title="Link to this definition">¶</a></dt>
<dd><p>Allow plugins and conftest files to perform initial configuration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is incompatible with hook wrappers.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p>
</dd>
</dl>
<section id="id107">
<h4>Use in conftest plugins<a class="headerlink" href="#id107" title="Link to this heading">¶</a></h4>
<p>This hook is called for every <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftest</span></a> file
after command line options have been parsed. After that, the hook is called
for other conftest files as they are registered.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_unconfigure">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_unconfigure">
<span class="sig-name descname"><span class="pre">pytest_unconfigure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_unconfigure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_unconfigure" title="Link to this definition">¶</a></dt>
<dd><p>Called before test process is exited.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p>
</dd>
</dl>
<section id="id108">
<h4>Use in conftest plugins<a class="headerlink" href="#id108" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_sessionstart">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_sessionstart">
<span class="sig-name descname"><span class="pre">pytest_sessionstart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_sessionstart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_sessionstart" title="Link to this definition">¶</a></dt>
<dd><p>Called after the <code class="docutils literal notranslate"><span class="pre">Session</span></code> object has been created and before performing collection
and entering the run test loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="#pytest.Session" title="pytest.Session"><em>Session</em></a>) – The pytest session object.</p>
</dd>
</dl>
<section id="id109">
<h4>Use in conftest plugins<a class="headerlink" href="#id109" title="Link to this heading">¶</a></h4>
<p>This hook is only called for <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftests</span></a>.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_sessionfinish">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_sessionfinish">
<span class="sig-name descname"><span class="pre">pytest_sessionfinish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exitstatus</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_sessionfinish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_sessionfinish" title="Link to this definition">¶</a></dt>
<dd><p>Called after whole test run finished, right before returning the exit status to the system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="#pytest.Session" title="pytest.Session"><em>Session</em></a>) – The pytest session object.</p></li>
<li><p><strong>exitstatus</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><a class="reference internal" href="#pytest.ExitCode" title="pytest.ExitCode"><em>ExitCode</em></a>) – The status which pytest will return to the system.</p></li>
</ul>
</dd>
</dl>
<section id="id110">
<h4>Use in conftest plugins<a class="headerlink" href="#id110" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_plugin_registered">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_plugin_registered">
<span class="sig-name descname"><span class="pre">pytest_plugin_registered</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plugin_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_plugin_registered"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_plugin_registered" title="Link to this definition">¶</a></dt>
<dd><p>A new pytest plugin got registered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plugin</strong> (<em>_PluggyPlugin</em>) – The plugin module or instance.</p></li>
<li><p><strong>plugin_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name by which the plugin is registered.</p></li>
<li><p><strong>manager</strong> (<a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>PytestPluginManager</em></a>) – The pytest plugin manager.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is incompatible with hook wrappers.</p>
</div>
<section id="id111">
<h4>Use in conftest plugins<a class="headerlink" href="#id111" title="Link to this heading">¶</a></h4>
<p>If a conftest plugin implements this hook, it will be called immediately
when the conftest is registered, once for each plugin registered thus far
(including itself!), and for all plugins thereafter when they are
registered.</p>
</section>
</dd></dl>

</div><div aria-labelledby="tab-21-21-1" class="sphinx-tabs-panel" hidden="true" id="panel-21-21-1" name="21-1" role="tabpanel" tabindex="0"><p>Initialization hooks called for plugins and <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files.</p>
<dl class="py function" id="std:hook-3">
<dt class="sig sig-object py" id="id112">
<span class="sig-name descname"><span class="pre">pytest_addoption</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_addoption"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id112" title="Link to this definition">¶</a></dt>
<dd><p>Register argparse-style options and ini-style config values,
called once at the beginning of a test run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parser</strong> (<a class="reference internal" href="#pytest.Parser" title="pytest.Parser"><em>Parser</em></a>) – To add command line options, call
<a class="reference internal" href="#pytest.Parser.addoption" title="pytest.Parser.addoption"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addoption(...)</span></code></a>.
To add ini-file values call <a class="reference internal" href="#pytest.Parser.addini" title="pytest.Parser.addini"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addini(...)</span></code></a>.</p></li>
<li><p><strong>pluginmanager</strong> (<a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>PytestPluginManager</em></a>) – The pytest plugin manager, which can be used to install <a class="reference internal" href="#pytest.hookspec" title="pytest.hookspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">hookspec()</span></code></a>’s
or <a class="reference internal" href="#id94" title="pytest.hookimpl"><code class="xref py py-func docutils literal notranslate"><span class="pre">hookimpl()</span></code></a>’s and allow one plugin to call another plugin’s hooks
to change how command line options are added.</p></li>
</ul>
</dd>
</dl>
<p>Options can later be accessed through the
<a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">config</span></code></a> object, respectively:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pytest.Config.getoption" title="pytest.Config.getoption"><code class="xref py py-func docutils literal notranslate"><span class="pre">config.getoption(name)</span></code></a> to
retrieve the value of a command line option.</p></li>
<li><p><a class="reference internal" href="#pytest.Config.getini" title="pytest.Config.getini"><code class="xref py py-func docutils literal notranslate"><span class="pre">config.getini(name)</span></code></a> to retrieve
a value read from an ini-style file.</p></li>
</ul>
<p>The config object is passed around on many internal objects via the <code class="docutils literal notranslate"><span class="pre">.config</span></code>
attribute or can be retrieved as the <code class="docutils literal notranslate"><span class="pre">pytestconfig</span></code> fixture.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is incompatible with hook wrappers.</p>
</div>
<section id="id113">
<h4>Use in conftest plugins<a class="headerlink" href="#id113" title="Link to this heading">¶</a></h4>
<p>If a conftest plugin implements this hook, it will be called immediately
when the conftest is registered.</p>
<p>This hook is only called for <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftests</span></a>.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-4">
<dt class="sig sig-object py" id="id114">
<span class="sig-name descname"><span class="pre">pytest_addhooks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_addhooks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id114" title="Link to this definition">¶</a></dt>
<dd><p>Called at plugin registration time to allow adding new hooks via a call to
<a class="reference internal" href="#pytest.PytestPluginManager.add_hookspecs" title="pytest.PytestPluginManager.add_hookspecs"><code class="xref py py-func docutils literal notranslate"><span class="pre">pluginmanager.add_hookspecs(module_or_class,</span> <span class="pre">prefix)</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pluginmanager</strong> (<a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>PytestPluginManager</em></a>) – The pytest plugin manager.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is incompatible with hook wrappers.</p>
</div>
<section id="id115">
<h4>Use in conftest plugins<a class="headerlink" href="#id115" title="Link to this heading">¶</a></h4>
<p>If a conftest plugin implements this hook, it will be called immediately
when the conftest is registered.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-5">
<dt class="sig sig-object py" id="id116">
<span class="sig-name descname"><span class="pre">pytest_configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_configure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id116" title="Link to this definition">¶</a></dt>
<dd><p>Allow plugins and conftest files to perform initial configuration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is incompatible with hook wrappers.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p>
</dd>
</dl>
<section id="id117">
<h4>Use in conftest plugins<a class="headerlink" href="#id117" title="Link to this heading">¶</a></h4>
<p>This hook is called for every <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftest</span></a> file
after command line options have been parsed. After that, the hook is called
for other conftest files as they are registered.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-6">
<dt class="sig sig-object py" id="id118">
<span class="sig-name descname"><span class="pre">pytest_unconfigure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_unconfigure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id118" title="Link to this definition">¶</a></dt>
<dd><p>Called before test process is exited.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p>
</dd>
</dl>
<section id="id119">
<h4>Use in conftest plugins<a class="headerlink" href="#id119" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-7">
<dt class="sig sig-object py" id="id120">
<span class="sig-name descname"><span class="pre">pytest_sessionstart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_sessionstart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id120" title="Link to this definition">¶</a></dt>
<dd><p>Called after the <code class="docutils literal notranslate"><span class="pre">Session</span></code> object has been created and before performing collection
and entering the run test loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="#pytest.Session" title="pytest.Session"><em>Session</em></a>) – The pytest session object.</p>
</dd>
</dl>
<section id="id121">
<h4>Use in conftest plugins<a class="headerlink" href="#id121" title="Link to this heading">¶</a></h4>
<p>This hook is only called for <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftests</span></a>.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-8">
<dt class="sig sig-object py" id="id122">
<span class="sig-name descname"><span class="pre">pytest_sessionfinish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exitstatus</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_sessionfinish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id122" title="Link to this definition">¶</a></dt>
<dd><p>Called after whole test run finished, right before returning the exit status to the system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="#pytest.Session" title="pytest.Session"><em>Session</em></a>) – The pytest session object.</p></li>
<li><p><strong>exitstatus</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><a class="reference internal" href="#pytest.ExitCode" title="pytest.ExitCode"><em>ExitCode</em></a>) – The status which pytest will return to the system.</p></li>
</ul>
</dd>
</dl>
<section id="id123">
<h4>Use in conftest plugins<a class="headerlink" href="#id123" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-9">
<dt class="sig sig-object py" id="id124">
<span class="sig-name descname"><span class="pre">pytest_plugin_registered</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plugin_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_plugin_registered"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id124" title="Link to this definition">¶</a></dt>
<dd><p>A new pytest plugin got registered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plugin</strong> (<em>_PluggyPlugin</em>) – The plugin module or instance.</p></li>
<li><p><strong>plugin_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name by which the plugin is registered.</p></li>
<li><p><strong>manager</strong> (<a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>PytestPluginManager</em></a>) – The pytest plugin manager.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is incompatible with hook wrappers.</p>
</div>
<section id="id125">
<h4>Use in conftest plugins<a class="headerlink" href="#id125" title="Link to this heading">¶</a></h4>
<p>If a conftest plugin implements this hook, it will be called immediately
when the conftest is registered, once for each plugin registered thus far
(including itself!), and for all plugins thereafter when they are
registered.</p>
</section>
</dd></dl>

</div></div>
</section>
<section id="id126">
<h3>收集钩子<a class="headerlink" href="#id126" title="Link to this heading">¶</a></h3>
<p><strong>Collection hooks</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-22-22-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-22-22-0" name="22-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-22-22-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-22-22-1" name="22-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-22-22-0" class="sphinx-tabs-panel" id="panel-22-22-0" name="22-0" role="tabpanel" tabindex="0"><p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> 调用以下钩子来收集文件和目录：</p>
<dl class="py function" id="std-hook-pytest_collection">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_collection">
<span class="sig-name descname"><span class="pre">pytest_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_collection" title="Link to this definition">¶</a></dt>
<dd><p>Perform the collection phase for the given session.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.
The return value is not used, but only stops further processing.</p>
<p>The default collection phase is this (see individual hooks for full details):</p>
<ol class="arabic simple">
<li><p>Starting from <code class="docutils literal notranslate"><span class="pre">session</span></code> as the initial collector:</p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_collectstart(collector)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">report</span> <span class="pre">=</span> <span class="pre">pytest_make_collect_report(collector)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(collector,</span> <span class="pre">call,</span> <span class="pre">report)</span></code> if an interactive exception occurred</p></li>
<li><p>For each collected node:</p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p>If an item, <code class="docutils literal notranslate"><span class="pre">pytest_itemcollected(item)</span></code></p></li>
<li><p>If a collector, recurse into it.</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_collectreport(report)</span></code></p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_collection_modifyitems(session,</span> <span class="pre">config,</span> <span class="pre">items)</span></code></p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_deselected(items)</span></code> for any deselected items (may be called multiple times)</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_collection_finish(session)</span></code></p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">session.items</span></code> to the list of collected items</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">session.testscollected</span></code> to the number of collected items</p></li>
</ol>
<p>You can implement this hook to only perform some action before collection,
for example the terminal plugin uses it to start displaying the collection
counter (and returns <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="#pytest.Session" title="pytest.Session"><em>Session</em></a>) – The pytest session object.</p>
</dd>
</dl>
<section id="id127">
<h4>Use in conftest plugins<a class="headerlink" href="#id127" title="Link to this heading">¶</a></h4>
<p>This hook is only called for <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftests</span></a>.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_ignore_collect">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_ignore_collect">
<span class="sig-name descname"><span class="pre">pytest_ignore_collect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_ignore_collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_ignore_collect" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> to ignore this path for collection.</p>
<p>Return <code class="docutils literal notranslate"><span class="pre">None</span></code> to let other plugins ignore the path for collection.</p>
<p>Returning <code class="docutils literal notranslate"><span class="pre">False</span></code> will forcefully <em>not</em> ignore this path for collection,
without giving a chance for other plugins to ignore this path.</p>
<p>This hook is consulted for all files and directories prior to calling
more specific hooks.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>pathlib.Path</em></a>) – The path to analyze.</p></li>
<li><p><strong>path</strong> (<em>LEGACY_PATH</em>) – The path to analyze (deprecated).</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">collection_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter. The <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter
has been deprecated.</p>
</div>
<section id="id128">
<h4>Use in conftest plugins<a class="headerlink" href="#id128" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given collection path, only
conftest files in parent directories of the collection path are consulted
(if the path is a directory, its own conftest file is <em>not</em> consulted - a
directory cannot ignore itself!).</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_collect_directory">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_collect_directory">
<span class="sig-name descname"><span class="pre">pytest_collect_directory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collect_directory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_collect_directory" title="Link to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#pytest.Collector" title="pytest.Collector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collector</span></code></a> for the given directory, or None if
not relevant.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 8.0.</span></p>
</div>
<p>For best results, the returned collector should be a subclass of
<a class="reference internal" href="#pytest.Directory" title="pytest.Directory"><code class="xref py py-class docutils literal notranslate"><span class="pre">Directory</span></code></a>, but this is not required.</p>
<p>The new node needs to have the specified <code class="docutils literal notranslate"><span class="pre">parent</span></code> as a parent.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>pathlib.Path</em></a>) – The path to analyze.</p>
</dd>
</dl>
<p>See <a class="reference internal" href="../example/customdirectory.html#custom-directory-collectors"><span class="std std-ref">使用自定义目录收集器</span></a> for a simple example of use of this
hook.</p>
<section id="id129">
<h4>Use in conftest plugins<a class="headerlink" href="#id129" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given collection path, only
conftest files in parent directories of the collection path are consulted
(if the path is a directory, its own conftest file is <em>not</em> consulted - a
directory cannot collect itself!).</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_collect_file">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_collect_file">
<span class="sig-name descname"><span class="pre">pytest_collect_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collect_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_collect_file" title="Link to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#pytest.Collector" title="pytest.Collector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collector</span></code></a> for the given path, or None if not relevant.</p>
<p>For best results, the returned collector should be a subclass of
<a class="reference internal" href="#pytest.File" title="pytest.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a>, but this is not required.</p>
<p>The new node needs to have the specified <code class="docutils literal notranslate"><span class="pre">parent</span></code> as a parent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>pathlib.Path</em></a>) – The path to analyze.</p></li>
<li><p><strong>path</strong> (<em>LEGACY_PATH</em>) – The path to collect (deprecated).</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">file_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter. The <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter
has been deprecated.</p>
</div>
<section id="id130">
<h4>Use in conftest plugins<a class="headerlink" href="#id130" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given file path, only
conftest files in parent directories of the file path are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_pycollect_makemodule">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_pycollect_makemodule">
<span class="sig-name descname"><span class="pre">pytest_pycollect_makemodule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_pycollect_makemodule"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_pycollect_makemodule" title="Link to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#pytest.Module" title="pytest.Module"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Module</span></code></a> collector or None for the given path.</p>
<p>This hook will be called for each matching test module path.
The <a class="reference internal" href="#std:hook-13"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_collect_file</span></code></a> hook needs to be used if you want to
create test modules for files that do not match as a test module.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>module_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>pathlib.Path</em></a>) – The path of the module to collect.</p></li>
<li><p><strong>path</strong> (<em>LEGACY_PATH</em>) – The path of the module to collect (deprecated).</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">module_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter has been deprecated in favor of <code class="docutils literal notranslate"><span class="pre">fspath</span></code>.</p>
</div>
<section id="id131">
<h4>Use in conftest plugins<a class="headerlink" href="#id131" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given parent collector,
only conftest files in the collector’s directory and its parent directories
are consulted.</p>
</section>
</dd></dl>

<p>要影响 Python 模块中对象的收集，可以使用以下钩子：</p>
<dl class="py function" id="std-hook-pytest_pycollect_makeitem">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_pycollect_makeitem">
<span class="sig-name descname"><span class="pre">pytest_pycollect_makeitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collector</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_pycollect_makeitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_pycollect_makeitem" title="Link to this definition">¶</a></dt>
<dd><p>Return a custom item/collector for a Python object in a module, or None.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collector</strong> (<a class="reference internal" href="#pytest.Module" title="pytest.Module"><em>Module</em></a><em> | </em><a class="reference internal" href="#pytest.Class" title="pytest.Class"><em>Class</em></a>) – The module/class collector.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name of the object in the module/class.</p></li>
<li><p><strong>obj</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The created items/collectors.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None | <a class="reference internal" href="#pytest.Item" title="pytest.Item">Item</a> | <a class="reference internal" href="#pytest.Collector" title="pytest.Collector">Collector</a> | <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#pytest.Item" title="pytest.Item">Item</a> | <a class="reference internal" href="#pytest.Collector" title="pytest.Collector">Collector</a>]</p>
</dd>
</dl>
<section id="id132">
<h4>Use in conftest plugins<a class="headerlink" href="#id132" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given collector, only
conftest files in the collector’s directory and its parent directories
are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_generate_tests">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_generate_tests">
<span class="sig-name descname"><span class="pre">pytest_generate_tests</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metafunc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_generate_tests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_generate_tests" title="Link to this definition">¶</a></dt>
<dd><p>Generate (multiple) parametrized calls to a test function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>metafunc</strong> (<a class="reference internal" href="#pytest.Metafunc" title="pytest.Metafunc"><em>Metafunc</em></a>) – The <a class="reference internal" href="#pytest.Metafunc" title="pytest.Metafunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">Metafunc</span></code></a> helper for the test function.</p>
</dd>
</dl>
<section id="id133">
<h4>Use in conftest plugins<a class="headerlink" href="#id133" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given function definition,
only conftest files in the functions’s directory and its parent directories
are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_make_parametrize_id">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_make_parametrize_id">
<span class="sig-name descname"><span class="pre">pytest_make_parametrize_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_make_parametrize_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_make_parametrize_id" title="Link to this definition">¶</a></dt>
<dd><p>Return a user-friendly string representation of the given <code class="docutils literal notranslate"><span class="pre">val</span></code>
that will be used by &#64;pytest.mark.parametrize calls, or None if the hook
doesn’t know about <code class="docutils literal notranslate"><span class="pre">val</span></code>.</p>
<p>The parameter name is available as <code class="docutils literal notranslate"><span class="pre">argname</span></code>, if required.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>val</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The parametrized value.</p></li>
<li><p><strong>argname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The automatic parameter name produced by pytest.</p></li>
</ul>
</dd>
</dl>
<section id="id134">
<h4>Use in conftest plugins<a class="headerlink" href="#id134" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook.</p>
</section>
</dd></dl>

<p>影响测试跳过的钩子：</p>
<dl class="py function" id="std-hook-pytest_markeval_namespace">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_markeval_namespace">
<span class="sig-name descname"><span class="pre">pytest_markeval_namespace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_markeval_namespace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_markeval_namespace" title="Link to this definition">¶</a></dt>
<dd><p>Called when constructing the globals dictionary used for
evaluating string conditions in xfail/skipif markers.</p>
<p>This is useful when the condition for a marker requires
objects that are expensive or impossible to obtain during
collection time, which is required by normal boolean
conditions.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 6.2.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary of additional globals to add.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, Any]</p>
</dd>
</dl>
<section id="id135">
<h4>Use in conftest plugins<a class="headerlink" href="#id135" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in parent directories of the item are consulted.</p>
</section>
</dd></dl>

<p>收集完成后，您可以修改项目的顺序，删除或以其他方式修改测试项目：</p>
<dl class="py function" id="std-hook-pytest_collection_modifyitems">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_collection_modifyitems">
<span class="sig-name descname"><span class="pre">pytest_collection_modifyitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collection_modifyitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_collection_modifyitems" title="Link to this definition">¶</a></dt>
<dd><p>Called after collection has been performed. May filter or re-order
the items in-place.</p>
<p>When items are deselected (filtered out from <code class="docutils literal notranslate"><span class="pre">items</span></code>),
the hook <a class="reference internal" href="#std:hook-32"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_deselected</span></code></a> must be called explicitly
with the deselected items to properly notify other plugins,
e.g. with <code class="docutils literal notranslate"><span class="pre">config.hook.pytest_deselected(deselected_items)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="#pytest.Session" title="pytest.Session"><em>Session</em></a>) – The pytest session object.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>items</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em>[</em><a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a><em>]</em>) – List of item objects.</p></li>
</ul>
</dd>
</dl>
<section id="id136">
<h4>Use in conftest plugins<a class="headerlink" href="#id136" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>如果此钩子在 <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> 文件中实现，它始终接收所有收集的项目，而不仅仅是
在实现它的 <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> 下的项目。</p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_collection_finish">
<span class="sig-name descname"><span class="pre">pytest_collection_finish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collection_finish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_collection_finish" title="Link to this definition">¶</a></dt>
<dd><p>Called after collection has been performed and modified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="#pytest.Session" title="pytest.Session"><em>Session</em></a>) – The pytest session object.</p>
</dd>
</dl>
<section id="id137">
<h4>Use in conftest plugins<a class="headerlink" href="#id137" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

</div><div aria-labelledby="tab-22-22-1" class="sphinx-tabs-panel" hidden="true" id="panel-22-22-1" name="22-1" role="tabpanel" tabindex="0"><p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> calls the following hooks for collecting files and directories:</p>
<dl class="py function" id="std:hook-10">
<dt class="sig sig-object py" id="id138">
<span class="sig-name descname"><span class="pre">pytest_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id138" title="Link to this definition">¶</a></dt>
<dd><p>Perform the collection phase for the given session.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.
The return value is not used, but only stops further processing.</p>
<p>The default collection phase is this (see individual hooks for full details):</p>
<ol class="arabic simple">
<li><p>Starting from <code class="docutils literal notranslate"><span class="pre">session</span></code> as the initial collector:</p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_collectstart(collector)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">report</span> <span class="pre">=</span> <span class="pre">pytest_make_collect_report(collector)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(collector,</span> <span class="pre">call,</span> <span class="pre">report)</span></code> if an interactive exception occurred</p></li>
<li><p>For each collected node:</p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p>If an item, <code class="docutils literal notranslate"><span class="pre">pytest_itemcollected(item)</span></code></p></li>
<li><p>If a collector, recurse into it.</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_collectreport(report)</span></code></p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_collection_modifyitems(session,</span> <span class="pre">config,</span> <span class="pre">items)</span></code></p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_deselected(items)</span></code> for any deselected items (may be called multiple times)</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_collection_finish(session)</span></code></p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">session.items</span></code> to the list of collected items</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">session.testscollected</span></code> to the number of collected items</p></li>
</ol>
<p>You can implement this hook to only perform some action before collection,
for example the terminal plugin uses it to start displaying the collection
counter (and returns <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="#pytest.Session" title="pytest.Session"><em>Session</em></a>) – The pytest session object.</p>
</dd>
</dl>
<section id="id139">
<h4>Use in conftest plugins<a class="headerlink" href="#id139" title="Link to this heading">¶</a></h4>
<p>This hook is only called for <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftests</span></a>.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-11">
<dt class="sig sig-object py" id="id140">
<span class="sig-name descname"><span class="pre">pytest_ignore_collect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_ignore_collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id140" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> to ignore this path for collection.</p>
<p>Return <code class="docutils literal notranslate"><span class="pre">None</span></code> to let other plugins ignore the path for collection.</p>
<p>Returning <code class="docutils literal notranslate"><span class="pre">False</span></code> will forcefully <em>not</em> ignore this path for collection,
without giving a chance for other plugins to ignore this path.</p>
<p>This hook is consulted for all files and directories prior to calling
more specific hooks.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>pathlib.Path</em></a>) – The path to analyze.</p></li>
<li><p><strong>path</strong> (<em>LEGACY_PATH</em>) – The path to analyze (deprecated).</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">collection_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter. The <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter
has been deprecated.</p>
</div>
<section id="id141">
<h4>Use in conftest plugins<a class="headerlink" href="#id141" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given collection path, only
conftest files in parent directories of the collection path are consulted
(if the path is a directory, its own conftest file is <em>not</em> consulted - a
directory cannot ignore itself!).</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-12">
<dt class="sig sig-object py" id="id142">
<span class="sig-name descname"><span class="pre">pytest_collect_directory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collect_directory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id142" title="Link to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#pytest.Collector" title="pytest.Collector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collector</span></code></a> for the given directory, or None if
not relevant.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 8.0.</span></p>
</div>
<p>For best results, the returned collector should be a subclass of
<a class="reference internal" href="#pytest.Directory" title="pytest.Directory"><code class="xref py py-class docutils literal notranslate"><span class="pre">Directory</span></code></a>, but this is not required.</p>
<p>The new node needs to have the specified <code class="docutils literal notranslate"><span class="pre">parent</span></code> as a parent.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>pathlib.Path</em></a>) – The path to analyze.</p>
</dd>
</dl>
<p>See <a class="reference internal" href="../example/customdirectory.html#custom-directory-collectors"><span class="std std-ref">使用自定义目录收集器</span></a> for a simple example of use of this
hook.</p>
<section id="id143">
<h4>Use in conftest plugins<a class="headerlink" href="#id143" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given collection path, only
conftest files in parent directories of the collection path are consulted
(if the path is a directory, its own conftest file is <em>not</em> consulted - a
directory cannot collect itself!).</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-13">
<dt class="sig sig-object py" id="id144">
<span class="sig-name descname"><span class="pre">pytest_collect_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collect_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id144" title="Link to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#pytest.Collector" title="pytest.Collector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collector</span></code></a> for the given path, or None if not relevant.</p>
<p>For best results, the returned collector should be a subclass of
<a class="reference internal" href="#pytest.File" title="pytest.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a>, but this is not required.</p>
<p>The new node needs to have the specified <code class="docutils literal notranslate"><span class="pre">parent</span></code> as a parent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>pathlib.Path</em></a>) – The path to analyze.</p></li>
<li><p><strong>path</strong> (<em>LEGACY_PATH</em>) – The path to collect (deprecated).</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">file_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter. The <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter
has been deprecated.</p>
</div>
<section id="id145">
<h4>Use in conftest plugins<a class="headerlink" href="#id145" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given file path, only
conftest files in parent directories of the file path are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-14">
<dt class="sig sig-object py" id="id146">
<span class="sig-name descname"><span class="pre">pytest_pycollect_makemodule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_pycollect_makemodule"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id146" title="Link to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#pytest.Module" title="pytest.Module"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Module</span></code></a> collector or None for the given path.</p>
<p>This hook will be called for each matching test module path.
The <a class="reference internal" href="#std:hook-13"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_collect_file</span></code></a> hook needs to be used if you want to
create test modules for files that do not match as a test module.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>module_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>pathlib.Path</em></a>) – The path of the module to collect.</p></li>
<li><p><strong>path</strong> (<em>LEGACY_PATH</em>) – The path of the module to collect (deprecated).</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">module_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter has been deprecated in favor of <code class="docutils literal notranslate"><span class="pre">fspath</span></code>.</p>
</div>
<section id="id147">
<h4>Use in conftest plugins<a class="headerlink" href="#id147" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given parent collector,
only conftest files in the collector’s directory and its parent directories
are consulted.</p>
</section>
</dd></dl>

<p>For influencing the collection of objects in Python modules
you can use the following hook:</p>
<dl class="py function" id="std:hook-15">
<dt class="sig sig-object py" id="id148">
<span class="sig-name descname"><span class="pre">pytest_pycollect_makeitem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collector</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_pycollect_makeitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id148" title="Link to this definition">¶</a></dt>
<dd><p>Return a custom item/collector for a Python object in a module, or None.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collector</strong> (<a class="reference internal" href="#pytest.Module" title="pytest.Module"><em>Module</em></a><em> | </em><a class="reference internal" href="#pytest.Class" title="pytest.Class"><em>Class</em></a>) – The module/class collector.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name of the object in the module/class.</p></li>
<li><p><strong>obj</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The created items/collectors.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None | <a class="reference internal" href="#pytest.Item" title="pytest.Item">Item</a> | <a class="reference internal" href="#pytest.Collector" title="pytest.Collector">Collector</a> | <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference internal" href="#pytest.Item" title="pytest.Item">Item</a> | <a class="reference internal" href="#pytest.Collector" title="pytest.Collector">Collector</a>]</p>
</dd>
</dl>
<section id="id149">
<h4>Use in conftest plugins<a class="headerlink" href="#id149" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given collector, only
conftest files in the collector’s directory and its parent directories
are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-16">
<dt class="sig sig-object py" id="id150">
<span class="sig-name descname"><span class="pre">pytest_generate_tests</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metafunc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_generate_tests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id150" title="Link to this definition">¶</a></dt>
<dd><p>Generate (multiple) parametrized calls to a test function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>metafunc</strong> (<a class="reference internal" href="#pytest.Metafunc" title="pytest.Metafunc"><em>Metafunc</em></a>) – The <a class="reference internal" href="#pytest.Metafunc" title="pytest.Metafunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">Metafunc</span></code></a> helper for the test function.</p>
</dd>
</dl>
<section id="id151">
<h4>Use in conftest plugins<a class="headerlink" href="#id151" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given function definition,
only conftest files in the functions’s directory and its parent directories
are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-17">
<dt class="sig sig-object py" id="id152">
<span class="sig-name descname"><span class="pre">pytest_make_parametrize_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_make_parametrize_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id152" title="Link to this definition">¶</a></dt>
<dd><p>Return a user-friendly string representation of the given <code class="docutils literal notranslate"><span class="pre">val</span></code>
that will be used by &#64;pytest.mark.parametrize calls, or None if the hook
doesn’t know about <code class="docutils literal notranslate"><span class="pre">val</span></code>.</p>
<p>The parameter name is available as <code class="docutils literal notranslate"><span class="pre">argname</span></code>, if required.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>val</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The parametrized value.</p></li>
<li><p><strong>argname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The automatic parameter name produced by pytest.</p></li>
</ul>
</dd>
</dl>
<section id="id153">
<h4>Use in conftest plugins<a class="headerlink" href="#id153" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook.</p>
</section>
</dd></dl>

<p>Hooks for influencing test skipping:</p>
<dl class="py function" id="std:hook-18">
<dt class="sig sig-object py" id="id154">
<span class="sig-name descname"><span class="pre">pytest_markeval_namespace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_markeval_namespace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id154" title="Link to this definition">¶</a></dt>
<dd><p>Called when constructing the globals dictionary used for
evaluating string conditions in xfail/skipif markers.</p>
<p>This is useful when the condition for a marker requires
objects that are expensive or impossible to obtain during
collection time, which is required by normal boolean
conditions.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 6.2.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary of additional globals to add.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, Any]</p>
</dd>
</dl>
<section id="id155">
<h4>Use in conftest plugins<a class="headerlink" href="#id155" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in parent directories of the item are consulted.</p>
</section>
</dd></dl>

<p>After collection is complete, you can modify the order of
items, delete or otherwise amend the test items:</p>
<dl class="py function" id="std:hook-19">
<dt class="sig sig-object py" id="id156">
<span class="sig-name descname"><span class="pre">pytest_collection_modifyitems</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collection_modifyitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id156" title="Link to this definition">¶</a></dt>
<dd><p>Called after collection has been performed. May filter or re-order
the items in-place.</p>
<p>When items are deselected (filtered out from <code class="docutils literal notranslate"><span class="pre">items</span></code>),
the hook <a class="reference internal" href="#std:hook-32"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_deselected</span></code></a> must be called explicitly
with the deselected items to properly notify other plugins,
e.g. with <code class="docutils literal notranslate"><span class="pre">config.hook.pytest_deselected(deselected_items)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="#pytest.Session" title="pytest.Session"><em>Session</em></a>) – The pytest session object.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>items</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em>[</em><a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a><em>]</em>) – List of item objects.</p></li>
</ul>
</dd>
</dl>
<section id="id157">
<h4>Use in conftest plugins<a class="headerlink" href="#id157" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If this hook is implemented in <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files, it always receives all collected items, not only those
under the <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> where it is implemented.</p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="id158">
<span class="sig-name descname"><span class="pre">pytest_collection_finish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collection_finish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id158" title="Link to this definition">¶</a></dt>
<dd><p>Called after collection has been performed and modified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="#pytest.Session" title="pytest.Session"><em>Session</em></a>) – The pytest session object.</p>
</dd>
</dl>
<section id="id159">
<h4>Use in conftest plugins<a class="headerlink" href="#id159" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

</div></div>
</section>
<section id="id160">
<h3>测试运行钩子<a class="headerlink" href="#id160" title="Link to this heading">¶</a></h3>
<p><strong>Test running (runtest) hooks</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-23-23-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-23-23-0" name="23-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-23-23-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-23-23-1" name="23-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-23-23-0" class="sphinx-tabs-panel" id="panel-23-23-0" name="23-0" role="tabpanel" tabindex="0"><p>所有与运行测试相关的钩子接收一个 <a class="reference internal" href="#pytest.Item" title="pytest.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Item</span></code></a> 对象。</p>
<dl class="py function" id="std-hook-pytest_runtestloop">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_runtestloop">
<span class="sig-name descname"><span class="pre">pytest_runtestloop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtestloop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtestloop" title="Link to this definition">¶</a></dt>
<dd><p>Perform the main runtest loop (after collection finished).</p>
<p>The default hook implementation performs the runtest protocol for all items
collected in the session (<code class="docutils literal notranslate"><span class="pre">session.items</span></code>), unless the collection failed
or the <code class="docutils literal notranslate"><span class="pre">collectonly</span></code> pytest option is set.</p>
<p>If at any point <a class="reference internal" href="#pytest.exit" title="pytest.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.exit()</span></code></a> is called, the loop is
terminated immediately.</p>
<p>If at any point <code class="docutils literal notranslate"><span class="pre">session.shouldfail</span></code> or <code class="docutils literal notranslate"><span class="pre">session.shouldstop</span></code> are set, the
loop is terminated after the runtest protocol for the current item is finished.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="#pytest.Session" title="pytest.Session"><em>Session</em></a>) – The pytest session object.</p>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.
The return value is not used, but only stops further processing.</p>
<section id="id161">
<h4>Use in conftest plugins<a class="headerlink" href="#id161" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_runtest_protocol">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_runtest_protocol">
<span class="sig-name descname"><span class="pre">pytest_runtest_protocol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nextitem</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_protocol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_protocol" title="Link to this definition">¶</a></dt>
<dd><p>Perform the runtest protocol for a single test item.</p>
<p>The default runtest protocol is this (see individual hooks for full details):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logstart(nodeid,</span> <span class="pre">location)</span></code></p></li>
<li><dl class="simple">
<dt>Setup phase:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">=</span> <span class="pre">pytest_runtest_setup(item)</span></code> (wrapped in <code class="docutils literal notranslate"><span class="pre">CallInfo(when=&quot;setup&quot;)</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">report</span> <span class="pre">=</span> <span class="pre">pytest_runtest_makereport(item,</span> <span class="pre">call)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logreport(report)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(call,</span> <span class="pre">report)</span></code> if an interactive exception occurred</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Call phase, if the setup passed and the <code class="docutils literal notranslate"><span class="pre">setuponly</span></code> pytest option is not set:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">=</span> <span class="pre">pytest_runtest_call(item)</span></code> (wrapped in <code class="docutils literal notranslate"><span class="pre">CallInfo(when=&quot;call&quot;)</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">report</span> <span class="pre">=</span> <span class="pre">pytest_runtest_makereport(item,</span> <span class="pre">call)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logreport(report)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(call,</span> <span class="pre">report)</span></code> if an interactive exception occurred</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Teardown phase:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">=</span> <span class="pre">pytest_runtest_teardown(item,</span> <span class="pre">nextitem)</span></code> (wrapped in <code class="docutils literal notranslate"><span class="pre">CallInfo(when=&quot;teardown&quot;)</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">report</span> <span class="pre">=</span> <span class="pre">pytest_runtest_makereport(item,</span> <span class="pre">call)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logreport(report)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(call,</span> <span class="pre">report)</span></code> if an interactive exception occurred</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logfinish(nodeid,</span> <span class="pre">location)</span></code></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – Test item for which the runtest protocol is performed.</p></li>
<li><p><strong>nextitem</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a><em> | </em><em>None</em>) – The scheduled-to-be-next test item (or None if this is the end my friend).</p></li>
</ul>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.
The return value is not used, but only stops further processing.</p>
<section id="id162">
<h4>Use in conftest plugins<a class="headerlink" href="#id162" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_runtest_logstart">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_runtest_logstart">
<span class="sig-name descname"><span class="pre">pytest_runtest_logstart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodeid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_logstart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_logstart" title="Link to this definition">¶</a></dt>
<dd><p>Called at the start of running the runtest protocol for a single item.</p>
<p>See <a class="reference internal" href="#std:hook-21"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a> for a description of the runtest protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodeid</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Full node ID of the item.</p></li>
<li><p><strong>location</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – A tuple of <code class="docutils literal notranslate"><span class="pre">(filename,</span> <span class="pre">lineno,</span> <span class="pre">testname)</span></code>
where <code class="docutils literal notranslate"><span class="pre">filename</span></code> is a file path relative to <code class="docutils literal notranslate"><span class="pre">config.rootpath</span></code>
and <code class="docutils literal notranslate"><span class="pre">lineno</span></code> is 0-based.</p></li>
</ul>
</dd>
</dl>
<section id="id163">
<h4>Use in conftest plugins<a class="headerlink" href="#id163" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_runtest_logfinish">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_runtest_logfinish">
<span class="sig-name descname"><span class="pre">pytest_runtest_logfinish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodeid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_logfinish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_logfinish" title="Link to this definition">¶</a></dt>
<dd><p>Called at the end of running the runtest protocol for a single item.</p>
<p>See <a class="reference internal" href="#std:hook-21"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a> for a description of the runtest protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodeid</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Full node ID of the item.</p></li>
<li><p><strong>location</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – A tuple of <code class="docutils literal notranslate"><span class="pre">(filename,</span> <span class="pre">lineno,</span> <span class="pre">testname)</span></code>
where <code class="docutils literal notranslate"><span class="pre">filename</span></code> is a file path relative to <code class="docutils literal notranslate"><span class="pre">config.rootpath</span></code>
and <code class="docutils literal notranslate"><span class="pre">lineno</span></code> is 0-based.</p></li>
</ul>
</dd>
</dl>
<section id="id164">
<h4>Use in conftest plugins<a class="headerlink" href="#id164" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_runtest_setup">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_runtest_setup">
<span class="sig-name descname"><span class="pre">pytest_runtest_setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_setup" title="Link to this definition">¶</a></dt>
<dd><p>Called to perform the setup phase for a test item.</p>
<p>The default implementation runs <code class="docutils literal notranslate"><span class="pre">setup()</span></code> on <code class="docutils literal notranslate"><span class="pre">item</span></code> and all of its
parents (which haven’t been setup yet). This includes obtaining the
values of fixtures required by the item (which haven’t been obtained
yet).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – The item.</p>
</dd>
</dl>
<section id="id165">
<h4>Use in conftest plugins<a class="headerlink" href="#id165" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_runtest_call">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_runtest_call">
<span class="sig-name descname"><span class="pre">pytest_runtest_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_call" title="Link to this definition">¶</a></dt>
<dd><p>Called to run the test for test item (the call phase).</p>
<p>The default implementation calls <code class="docutils literal notranslate"><span class="pre">item.runtest()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – The item.</p>
</dd>
</dl>
<section id="id166">
<h4>Use in conftest plugins<a class="headerlink" href="#id166" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_runtest_teardown">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_runtest_teardown">
<span class="sig-name descname"><span class="pre">pytest_runtest_teardown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nextitem</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_teardown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_teardown" title="Link to this definition">¶</a></dt>
<dd><p>Called to perform the teardown phase for a test item.</p>
<p>The default implementation runs the finalizers and calls <code class="docutils literal notranslate"><span class="pre">teardown()</span></code>
on <code class="docutils literal notranslate"><span class="pre">item</span></code> and all of its parents (which need to be torn down). This
includes running the teardown phase of fixtures required by the item (if
they go out of scope).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – The item.</p></li>
<li><p><strong>nextitem</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a><em> | </em><em>None</em>) – The scheduled-to-be-next test item (None if no further test item is
scheduled). This argument is used to perform exact teardowns, i.e.
calling just enough finalizers so that nextitem only needs to call
setup functions.</p></li>
</ul>
</dd>
</dl>
<section id="id167">
<h4>Use in conftest plugins<a class="headerlink" href="#id167" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_runtest_makereport">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_runtest_makereport">
<span class="sig-name descname"><span class="pre">pytest_runtest_makereport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">call</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_makereport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_makereport" title="Link to this definition">¶</a></dt>
<dd><p>Called to create a <a class="reference internal" href="#pytest.TestReport" title="pytest.TestReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestReport</span></code></a> for each of
the setup, call and teardown runtest phases of a test item.</p>
<p>See <a class="reference internal" href="#std:hook-21"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a> for a description of the runtest protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – The item.</p></li>
<li><p><strong>call</strong> (<a class="reference internal" href="#pytest.CallInfo" title="pytest.CallInfo"><em>CallInfo</em></a><em>[</em><em>None</em><em>]</em>) – The <a class="reference internal" href="#pytest.CallInfo" title="pytest.CallInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">CallInfo</span></code></a> for the phase.</p></li>
</ul>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<section id="id168">
<h4>Use in conftest plugins<a class="headerlink" href="#id168" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<p>要深入理解，您可以查看 <code class="docutils literal notranslate"><span class="pre">_pytest.runner</span></code> 中这些钩子的默认实现，也可以查看 <code class="docutils literal notranslate"><span class="pre">_pytest.pdb</span></code>，它与 <code class="docutils literal notranslate"><span class="pre">_pytest.capture</span></code> 和其输入/输出捕获交互，以便在测试失败时立即进入交互式调试。</p>
</div><div aria-labelledby="tab-23-23-1" class="sphinx-tabs-panel" hidden="true" id="panel-23-23-1" name="23-1" role="tabpanel" tabindex="0"><p>All runtest related hooks receive a <a class="reference internal" href="#pytest.Item" title="pytest.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Item</span></code></a> object.</p>
<dl class="py function" id="std:hook-20">
<dt class="sig sig-object py" id="id169">
<span class="sig-name descname"><span class="pre">pytest_runtestloop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtestloop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id169" title="Link to this definition">¶</a></dt>
<dd><p>Perform the main runtest loop (after collection finished).</p>
<p>The default hook implementation performs the runtest protocol for all items
collected in the session (<code class="docutils literal notranslate"><span class="pre">session.items</span></code>), unless the collection failed
or the <code class="docutils literal notranslate"><span class="pre">collectonly</span></code> pytest option is set.</p>
<p>If at any point <a class="reference internal" href="#pytest.exit" title="pytest.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.exit()</span></code></a> is called, the loop is
terminated immediately.</p>
<p>If at any point <code class="docutils literal notranslate"><span class="pre">session.shouldfail</span></code> or <code class="docutils literal notranslate"><span class="pre">session.shouldstop</span></code> are set, the
loop is terminated after the runtest protocol for the current item is finished.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="#pytest.Session" title="pytest.Session"><em>Session</em></a>) – The pytest session object.</p>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.
The return value is not used, but only stops further processing.</p>
<section id="id170">
<h4>Use in conftest plugins<a class="headerlink" href="#id170" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-21">
<dt class="sig sig-object py" id="id171">
<span class="sig-name descname"><span class="pre">pytest_runtest_protocol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nextitem</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_protocol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id171" title="Link to this definition">¶</a></dt>
<dd><p>Perform the runtest protocol for a single test item.</p>
<p>The default runtest protocol is this (see individual hooks for full details):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logstart(nodeid,</span> <span class="pre">location)</span></code></p></li>
<li><dl class="simple">
<dt>Setup phase:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">=</span> <span class="pre">pytest_runtest_setup(item)</span></code> (wrapped in <code class="docutils literal notranslate"><span class="pre">CallInfo(when=&quot;setup&quot;)</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">report</span> <span class="pre">=</span> <span class="pre">pytest_runtest_makereport(item,</span> <span class="pre">call)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logreport(report)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(call,</span> <span class="pre">report)</span></code> if an interactive exception occurred</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Call phase, if the setup passed and the <code class="docutils literal notranslate"><span class="pre">setuponly</span></code> pytest option is not set:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">=</span> <span class="pre">pytest_runtest_call(item)</span></code> (wrapped in <code class="docutils literal notranslate"><span class="pre">CallInfo(when=&quot;call&quot;)</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">report</span> <span class="pre">=</span> <span class="pre">pytest_runtest_makereport(item,</span> <span class="pre">call)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logreport(report)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(call,</span> <span class="pre">report)</span></code> if an interactive exception occurred</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Teardown phase:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">=</span> <span class="pre">pytest_runtest_teardown(item,</span> <span class="pre">nextitem)</span></code> (wrapped in <code class="docutils literal notranslate"><span class="pre">CallInfo(when=&quot;teardown&quot;)</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">report</span> <span class="pre">=</span> <span class="pre">pytest_runtest_makereport(item,</span> <span class="pre">call)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logreport(report)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(call,</span> <span class="pre">report)</span></code> if an interactive exception occurred</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logfinish(nodeid,</span> <span class="pre">location)</span></code></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – Test item for which the runtest protocol is performed.</p></li>
<li><p><strong>nextitem</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a><em> | </em><em>None</em>) – The scheduled-to-be-next test item (or None if this is the end my friend).</p></li>
</ul>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.
The return value is not used, but only stops further processing.</p>
<section id="id172">
<h4>Use in conftest plugins<a class="headerlink" href="#id172" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-22">
<dt class="sig sig-object py" id="id173">
<span class="sig-name descname"><span class="pre">pytest_runtest_logstart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodeid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_logstart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id173" title="Link to this definition">¶</a></dt>
<dd><p>Called at the start of running the runtest protocol for a single item.</p>
<p>See <a class="reference internal" href="#std:hook-21"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a> for a description of the runtest protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodeid</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Full node ID of the item.</p></li>
<li><p><strong>location</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – A tuple of <code class="docutils literal notranslate"><span class="pre">(filename,</span> <span class="pre">lineno,</span> <span class="pre">testname)</span></code>
where <code class="docutils literal notranslate"><span class="pre">filename</span></code> is a file path relative to <code class="docutils literal notranslate"><span class="pre">config.rootpath</span></code>
and <code class="docutils literal notranslate"><span class="pre">lineno</span></code> is 0-based.</p></li>
</ul>
</dd>
</dl>
<section id="id174">
<h4>Use in conftest plugins<a class="headerlink" href="#id174" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-23">
<dt class="sig sig-object py" id="id175">
<span class="sig-name descname"><span class="pre">pytest_runtest_logfinish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodeid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_logfinish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id175" title="Link to this definition">¶</a></dt>
<dd><p>Called at the end of running the runtest protocol for a single item.</p>
<p>See <a class="reference internal" href="#std:hook-21"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a> for a description of the runtest protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodeid</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Full node ID of the item.</p></li>
<li><p><strong>location</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><em>None</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – A tuple of <code class="docutils literal notranslate"><span class="pre">(filename,</span> <span class="pre">lineno,</span> <span class="pre">testname)</span></code>
where <code class="docutils literal notranslate"><span class="pre">filename</span></code> is a file path relative to <code class="docutils literal notranslate"><span class="pre">config.rootpath</span></code>
and <code class="docutils literal notranslate"><span class="pre">lineno</span></code> is 0-based.</p></li>
</ul>
</dd>
</dl>
<section id="id176">
<h4>Use in conftest plugins<a class="headerlink" href="#id176" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-24">
<dt class="sig sig-object py" id="id177">
<span class="sig-name descname"><span class="pre">pytest_runtest_setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id177" title="Link to this definition">¶</a></dt>
<dd><p>Called to perform the setup phase for a test item.</p>
<p>The default implementation runs <code class="docutils literal notranslate"><span class="pre">setup()</span></code> on <code class="docutils literal notranslate"><span class="pre">item</span></code> and all of its
parents (which haven’t been setup yet). This includes obtaining the
values of fixtures required by the item (which haven’t been obtained
yet).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – The item.</p>
</dd>
</dl>
<section id="id178">
<h4>Use in conftest plugins<a class="headerlink" href="#id178" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-25">
<dt class="sig sig-object py" id="id179">
<span class="sig-name descname"><span class="pre">pytest_runtest_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id179" title="Link to this definition">¶</a></dt>
<dd><p>Called to run the test for test item (the call phase).</p>
<p>The default implementation calls <code class="docutils literal notranslate"><span class="pre">item.runtest()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – The item.</p>
</dd>
</dl>
<section id="id180">
<h4>Use in conftest plugins<a class="headerlink" href="#id180" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-26">
<dt class="sig sig-object py" id="id181">
<span class="sig-name descname"><span class="pre">pytest_runtest_teardown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nextitem</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_teardown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id181" title="Link to this definition">¶</a></dt>
<dd><p>Called to perform the teardown phase for a test item.</p>
<p>The default implementation runs the finalizers and calls <code class="docutils literal notranslate"><span class="pre">teardown()</span></code>
on <code class="docutils literal notranslate"><span class="pre">item</span></code> and all of its parents (which need to be torn down). This
includes running the teardown phase of fixtures required by the item (if
they go out of scope).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – The item.</p></li>
<li><p><strong>nextitem</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a><em> | </em><em>None</em>) – The scheduled-to-be-next test item (None if no further test item is
scheduled). This argument is used to perform exact teardowns, i.e.
calling just enough finalizers so that nextitem only needs to call
setup functions.</p></li>
</ul>
</dd>
</dl>
<section id="id182">
<h4>Use in conftest plugins<a class="headerlink" href="#id182" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-27">
<dt class="sig sig-object py" id="id183">
<span class="sig-name descname"><span class="pre">pytest_runtest_makereport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">call</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_makereport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id183" title="Link to this definition">¶</a></dt>
<dd><p>Called to create a <a class="reference internal" href="#pytest.TestReport" title="pytest.TestReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestReport</span></code></a> for each of
the setup, call and teardown runtest phases of a test item.</p>
<p>See <a class="reference internal" href="#std:hook-21"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a> for a description of the runtest protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – The item.</p></li>
<li><p><strong>call</strong> (<a class="reference internal" href="#pytest.CallInfo" title="pytest.CallInfo"><em>CallInfo</em></a><em>[</em><em>None</em><em>]</em>) – The <a class="reference internal" href="#pytest.CallInfo" title="pytest.CallInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">CallInfo</span></code></a> for the phase.</p></li>
</ul>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<section id="id184">
<h4>Use in conftest plugins<a class="headerlink" href="#id184" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<p>For deeper understanding you may look at the default implementation of
these hooks in <code class="docutils literal notranslate"><span class="pre">_pytest.runner</span></code> and maybe also
in <code class="docutils literal notranslate"><span class="pre">_pytest.pdb</span></code> which interacts with <code class="docutils literal notranslate"><span class="pre">_pytest.capture</span></code>
and its input/output capturing in order to immediately drop
into interactive debugging when a test failure occurs.</p>
</div></div>
<dl class="py function" id="std-hook-pytest_pyfunc_call">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_pyfunc_call">
<span class="sig-name descname"><span class="pre">pytest_pyfunc_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pyfuncitem</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_pyfunc_call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_pyfunc_call" title="Link to this definition">¶</a></dt>
<dd><p>Call underlying test function.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pyfuncitem</strong> (<a class="reference internal" href="#pytest.Function" title="pytest.Function"><em>Function</em></a>) – The function item.</p>
</dd>
</dl>
<section id="id185">
<h4>Use in conftest plugins<a class="headerlink" href="#id185" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only
conftest files in the item’s directory and its parent directories
are consulted.</p>
</section>
</dd></dl>

</section>
<section id="id186">
<h3>报告钩子<a class="headerlink" href="#id186" title="Link to this heading">¶</a></h3>
<p><strong>Reporting hooks</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-24-24-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-24-24-0" name="24-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-24-24-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-24-24-1" name="24-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-24-24-0" class="sphinx-tabs-panel" id="panel-24-24-0" name="24-0" role="tabpanel" tabindex="0"><p>与会话相关的报告钩子：</p>
<dl class="py function" id="std-hook-pytest_collectstart">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_collectstart">
<span class="sig-name descname"><span class="pre">pytest_collectstart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collector</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collectstart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_collectstart" title="Link to this definition">¶</a></dt>
<dd><p>Collector starts collecting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collector</strong> (<a class="reference internal" href="#pytest.Collector" title="pytest.Collector"><em>Collector</em></a>) – The collector.</p>
</dd>
</dl>
<section id="id187">
<h4>Use in conftest plugins<a class="headerlink" href="#id187" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given collector, only
conftest files in the collector’s directory and its parent directories are
consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_make_collect_report">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_make_collect_report">
<span class="sig-name descname"><span class="pre">pytest_make_collect_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collector</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_make_collect_report"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_make_collect_report" title="Link to this definition">¶</a></dt>
<dd><p>Perform <a class="reference internal" href="#pytest.Collector.collect" title="pytest.Collector.collect"><code class="xref py py-func docutils literal notranslate"><span class="pre">collector.collect()</span></code></a> and return
a <a class="reference internal" href="#pytest.CollectReport" title="pytest.CollectReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectReport</span></code></a>.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collector</strong> (<a class="reference internal" href="#pytest.Collector" title="pytest.Collector"><em>Collector</em></a>) – The collector.</p>
</dd>
</dl>
<section id="id188">
<h4>Use in conftest plugins<a class="headerlink" href="#id188" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given collector, only
conftest files in the collector’s directory and its parent directories are
consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_itemcollected">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_itemcollected">
<span class="sig-name descname"><span class="pre">pytest_itemcollected</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_itemcollected"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_itemcollected" title="Link to this definition">¶</a></dt>
<dd><p>We just collected a test item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – The item.</p>
</dd>
</dl>
<section id="id189">
<h4>Use in conftest plugins<a class="headerlink" href="#id189" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_collectreport">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_collectreport">
<span class="sig-name descname"><span class="pre">pytest_collectreport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">report</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collectreport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_collectreport" title="Link to this definition">¶</a></dt>
<dd><p>Collector finished collecting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>report</strong> (<a class="reference internal" href="#pytest.CollectReport" title="pytest.CollectReport"><em>CollectReport</em></a>) – The collect report.</p>
</dd>
</dl>
<section id="id190">
<h4>Use in conftest plugins<a class="headerlink" href="#id190" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given collector, only
conftest files in the collector’s directory and its parent directories are
consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_deselected">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_deselected">
<span class="sig-name descname"><span class="pre">pytest_deselected</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_deselected"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_deselected" title="Link to this definition">¶</a></dt>
<dd><p>Called for deselected test items, e.g. by keyword.</p>
<p>Note that this hook has two integration aspects for plugins:</p>
<ul class="simple">
<li><p>it can be <em>implemented</em> to be notified of deselected items</p></li>
<li><p>it must be <em>called</em> from <a class="reference internal" href="#std:hook-19"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_collection_modifyitems</span></code></a>
implementations when items are deselected (to properly notify other plugins).</p></li>
</ul>
<p>May be called multiple times.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>items</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a><em>]</em>) – The items.</p>
</dd>
</dl>
<section id="id191">
<h4>Use in conftest plugins<a class="headerlink" href="#id191" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_report_header">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_report_header">
<span class="sig-name descname"><span class="pre">pytest_report_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_report_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_report_header" title="Link to this definition">¶</a></dt>
<dd><p>Return a string or list of strings to be displayed as header info for terminal reporting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>start_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>pathlib.Path</em></a>) – The starting dir.</p></li>
<li><p><strong>startdir</strong> (<em>LEGACY_PATH</em>) – The starting dir (deprecated).</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lines returned by a plugin are displayed before those of plugins which
ran before it.
If you want to have your line(s) displayed first, use
<a class="reference internal" href="../how-to/writing_hook_functions.html#plugin-hookorder"><span class="std std-ref">trylast=True</span></a>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">start_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter. The <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter
has been deprecated.</p>
</div>
<section id="id192">
<h4>Use in conftest plugins<a class="headerlink" href="#id192" title="Link to this heading">¶</a></h4>
<p>This hook is only called for <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftests</span></a>.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_report_collectionfinish">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_report_collectionfinish">
<span class="sig-name descname"><span class="pre">pytest_report_collectionfinish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_report_collectionfinish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_report_collectionfinish" title="Link to this definition">¶</a></dt>
<dd><p>Return a string or list of strings to be displayed after collection
has finished successfully.</p>
<p>These strings will be displayed after the standard “collected X items” message.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.2.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>start_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>pathlib.Path</em></a>) – The starting dir.</p></li>
<li><p><strong>startdir</strong> (<em>LEGACY_PATH</em>) – The starting dir (deprecated).</p></li>
<li><p><strong>items</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a><em>]</em>) – List of pytest items that are going to be executed; this list should not be modified.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lines returned by a plugin are displayed before those of plugins which
ran before it.
If you want to have your line(s) displayed first, use
<a class="reference internal" href="../how-to/writing_hook_functions.html#plugin-hookorder"><span class="std std-ref">trylast=True</span></a>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">start_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter. The <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter
has been deprecated.</p>
</div>
<section id="id193">
<h4>Use in conftest plugins<a class="headerlink" href="#id193" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_report_teststatus">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_report_teststatus">
<span class="sig-name descname"><span class="pre">pytest_report_teststatus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">report</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_report_teststatus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_report_teststatus" title="Link to this definition">¶</a></dt>
<dd><p>Return result-category, shortletter and verbose word for status
reporting.</p>
<p>The result-category is a category in which to count the result, for
example “passed”, “skipped”, “error” or the empty string.</p>
<p>The shortletter is shown as testing progresses, for example “.”, “s”,
“E” or the empty string.</p>
<p>The verbose word is shown as testing progresses in verbose mode, for
example “PASSED”, “SKIPPED”, “ERROR” or the empty string.</p>
<p>pytest may style these implicitly according to the report outcome.
To provide explicit styling, return a tuple for the verbose word,
for example <code class="docutils literal notranslate"><span class="pre">&quot;rerun&quot;,</span> <span class="pre">&quot;R&quot;,</span> <span class="pre">(&quot;RERUN&quot;,</span> <span class="pre">{&quot;yellow&quot;:</span> <span class="pre">True})</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>report</strong> (<a class="reference internal" href="#pytest.CollectReport" title="pytest.CollectReport"><em>CollectReport</em></a><em> | </em><a class="reference internal" href="#pytest.TestReport" title="pytest.TestReport"><em>TestReport</em></a>) – The report object whose status is to be returned.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The test status.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.TestShortLogReport" title="pytest.TestShortLogReport">TestShortLogReport</a> | <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a> | <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, Mapping[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)">bool</a>]]]</p>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<section id="id194">
<h4>Use in conftest plugins<a class="headerlink" href="#id194" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_report_to_serializable">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_report_to_serializable">
<span class="sig-name descname"><span class="pre">pytest_report_to_serializable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_report_to_serializable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_report_to_serializable" title="Link to this definition">¶</a></dt>
<dd><p>Serialize the given report object into a data structure suitable for
sending over the wire, e.g. converted to JSON.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>report</strong> (<a class="reference internal" href="#pytest.CollectReport" title="pytest.CollectReport"><em>CollectReport</em></a><em> | </em><a class="reference internal" href="#pytest.TestReport" title="pytest.TestReport"><em>TestReport</em></a>) – The report.</p></li>
</ul>
</dd>
</dl>
<section id="id195">
<h4>Use in conftest plugins<a class="headerlink" href="#id195" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. The exact details may depend
on the plugin which calls the hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_report_from_serializable">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_report_from_serializable">
<span class="sig-name descname"><span class="pre">pytest_report_from_serializable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_report_from_serializable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_report_from_serializable" title="Link to this definition">¶</a></dt>
<dd><p>Restore a report object previously serialized with
<a class="reference internal" href="#std:hook-36"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_report_to_serializable</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p>
</dd>
</dl>
<section id="id196">
<h4>Use in conftest plugins<a class="headerlink" href="#id196" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. The exact details may depend
on the plugin which calls the hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_terminal_summary">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_terminal_summary">
<span class="sig-name descname"><span class="pre">pytest_terminal_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">terminalreporter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exitstatus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_terminal_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_terminal_summary" title="Link to this definition">¶</a></dt>
<dd><p>Add a section to terminal summary reporting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>terminalreporter</strong> (<a class="reference internal" href="#pytest.TerminalReporter" title="pytest.TerminalReporter"><em>TerminalReporter</em></a>) – The internal terminal reporter object.</p></li>
<li><p><strong>exitstatus</strong> (<a class="reference internal" href="#pytest.ExitCode" title="pytest.ExitCode"><em>ExitCode</em></a>) – The exit status that will be reported back to the OS.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 4.2: </span>The <code class="docutils literal notranslate"><span class="pre">config</span></code> parameter.</p>
</div>
<section id="id197">
<h4>Use in conftest plugins<a class="headerlink" href="#id197" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_fixture_setup">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_fixture_setup">
<span class="sig-name descname"><span class="pre">pytest_fixture_setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixturedef</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_fixture_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_fixture_setup" title="Link to this definition">¶</a></dt>
<dd><p>Perform fixture setup execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fixturedef</strong> (<a class="reference internal" href="#pytest.FixtureDef" title="pytest.FixtureDef"><em>FixtureDef</em></a><em>[</em><em>Any</em><em>]</em>) – The fixture definition object.</p></li>
<li><p><strong>request</strong> (<em>SubRequest</em>) – The fixture request object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The return value of the call to the fixture function.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)">object</a> | None</p>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the fixture function returns None, other implementations of
this hook function will continue to be called, according to the
behavior of the <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a> option.</p>
</div>
<section id="id198">
<h4>Use in conftest plugins<a class="headerlink" href="#id198" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given fixture, only
conftest files in the fixture scope’s directory and its parent directories
are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_fixture_post_finalizer">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_fixture_post_finalizer">
<span class="sig-name descname"><span class="pre">pytest_fixture_post_finalizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixturedef</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_fixture_post_finalizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_fixture_post_finalizer" title="Link to this definition">¶</a></dt>
<dd><p>Called after fixture teardown, but before the cache is cleared, so
the fixture result <code class="docutils literal notranslate"><span class="pre">fixturedef.cached_result</span></code> is still available (not
<code class="docutils literal notranslate"><span class="pre">None</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fixturedef</strong> (<a class="reference internal" href="#pytest.FixtureDef" title="pytest.FixtureDef"><em>FixtureDef</em></a><em>[</em><em>Any</em><em>]</em>) – The fixture definition object.</p></li>
<li><p><strong>request</strong> (<em>SubRequest</em>) – The fixture request object.</p></li>
</ul>
</dd>
</dl>
<section id="id199">
<h4>Use in conftest plugins<a class="headerlink" href="#id199" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given fixture, only
conftest files in the fixture scope’s directory and its parent directories
are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_warning_recorded">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_warning_recorded">
<span class="sig-name descname"><span class="pre">pytest_warning_recorded</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">warning_message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">when</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodeid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_warning_recorded"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_warning_recorded" title="Link to this definition">¶</a></dt>
<dd><p>Process a warning captured by the internal pytest warnings plugin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>warning_message</strong> (<em>warnings.WarningMessage</em>) – The captured warning. This is the same object produced by <a class="reference external" href="https://docs.python.org/3/library/warnings.html#warnings.catch_warnings" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">warnings.catch_warnings</span></code></a>,
and contains the same attributes as the parameters of <a class="reference external" href="https://docs.python.org/3/library/warnings.html#warnings.showwarning" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">warnings.showwarning()</span></code></a>.</p></li>
<li><p><strong>when</strong> (<em>Literal</em><em>[</em><em>'config'</em><em>, </em><em>'collect'</em><em>, </em><em>'runtest'</em><em>]</em>) – <p>Indicates when the warning was captured. Possible values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;config&quot;</span></code>: during pytest configuration/initialization stage.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;collect&quot;</span></code>: during test collection.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;runtest&quot;</span></code>: during test execution.</p></li>
</ul>
</p></li>
<li><p><strong>nodeid</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Full id of the item. Empty string for warnings that are not specific to
a particular node.</p></li>
<li><p><strong>location</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>] </em><em>| </em><em>None</em>) – When available, holds information about the execution context of the captured
warning (filename, linenumber, function). <code class="docutils literal notranslate"><span class="pre">function</span></code> evaluates to &lt;module&gt;
when the execution context is at the module level.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 6.0.</span></p>
</div>
<section id="id200">
<h4>Use in conftest plugins<a class="headerlink" href="#id200" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. If the warning is specific to a
particular node, only conftest files in parent directories of the node are
consulted.</p>
</section>
</dd></dl>

<p>用于报告测试执行的中心钩子：</p>
<dl class="py function" id="std-hook-pytest_runtest_logreport">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_runtest_logreport">
<span class="sig-name descname"><span class="pre">pytest_runtest_logreport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">report</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_logreport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_logreport" title="Link to this definition">¶</a></dt>
<dd><p>Process the <a class="reference internal" href="#pytest.TestReport" title="pytest.TestReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestReport</span></code></a> produced for each
of the setup, call and teardown runtest phases of an item.</p>
<p>See <a class="reference internal" href="#std:hook-21"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a> for a description of the runtest protocol.</p>
<section id="id201">
<h4>Use in conftest plugins<a class="headerlink" href="#id201" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
<dl class="field-list simple">
</dl>
</dd></dl>

<p>与断言相关的钩子：</p>
<dl class="py function" id="std-hook-pytest_assertrepr_compare">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_assertrepr_compare">
<span class="sig-name descname"><span class="pre">pytest_assertrepr_compare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_assertrepr_compare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_assertrepr_compare" title="Link to this definition">¶</a></dt>
<dd><p>Return explanation for comparisons in failing assert expressions.</p>
<p>Return None for no custom explanation, otherwise return a list
of strings. The strings will be joined by newlines but any newlines
<em>in</em> a string will be escaped. Note that all but the first line will
be indented slightly, the intention is for the first line to be a summary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>op</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The operator, e.g. <code class="docutils literal notranslate"><span class="pre">&quot;==&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;!=&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;not</span> <span class="pre">in&quot;</span></code>.</p></li>
<li><p><strong>left</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The left operand.</p></li>
<li><p><strong>right</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The right operand.</p></li>
</ul>
</dd>
</dl>
<section id="id202">
<h4>Use in conftest plugins<a class="headerlink" href="#id202" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_assertion_pass">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_assertion_pass">
<span class="sig-name descname"><span class="pre">pytest_assertion_pass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lineno</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expl</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_assertion_pass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_assertion_pass" title="Link to this definition">¶</a></dt>
<dd><p>Called whenever an assertion passes.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.0.</span></p>
</div>
<p>Use this hook to do some processing after a passing assertion.
The original assertion information is available in the <code class="docutils literal notranslate"><span class="pre">orig</span></code> string
and the pytest introspected assertion information is available in the
<code class="docutils literal notranslate"><span class="pre">expl</span></code> string.</p>
<p>This hook must be explicitly enabled by the <code class="docutils literal notranslate"><span class="pre">enable_assertion_pass_hook</span></code>
ini-file option:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">enable_assertion_pass_hook</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>You need to <strong>clean the .pyc</strong> files in your project directory and interpreter libraries
when enabling this option, as assertions will require to be re-written.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – pytest item object of current test.</p></li>
<li><p><strong>lineno</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Line number of the assert statement.</p></li>
<li><p><strong>orig</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – String with the original assertion.</p></li>
<li><p><strong>expl</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – String with the assert explanation.</p></li>
</ul>
</dd>
</dl>
<section id="id203">
<h4>Use in conftest plugins<a class="headerlink" href="#id203" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

</div><div aria-labelledby="tab-24-24-1" class="sphinx-tabs-panel" hidden="true" id="panel-24-24-1" name="24-1" role="tabpanel" tabindex="0"><p>Session related reporting hooks:</p>
<dl class="py function" id="std:hook-28">
<dt class="sig sig-object py" id="id204">
<span class="sig-name descname"><span class="pre">pytest_collectstart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collector</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collectstart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id204" title="Link to this definition">¶</a></dt>
<dd><p>Collector starts collecting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collector</strong> (<a class="reference internal" href="#pytest.Collector" title="pytest.Collector"><em>Collector</em></a>) – The collector.</p>
</dd>
</dl>
<section id="id205">
<h4>Use in conftest plugins<a class="headerlink" href="#id205" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given collector, only
conftest files in the collector’s directory and its parent directories are
consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-29">
<dt class="sig sig-object py" id="id206">
<span class="sig-name descname"><span class="pre">pytest_make_collect_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collector</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_make_collect_report"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id206" title="Link to this definition">¶</a></dt>
<dd><p>Perform <a class="reference internal" href="#pytest.Collector.collect" title="pytest.Collector.collect"><code class="xref py py-func docutils literal notranslate"><span class="pre">collector.collect()</span></code></a> and return
a <a class="reference internal" href="#pytest.CollectReport" title="pytest.CollectReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectReport</span></code></a>.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collector</strong> (<a class="reference internal" href="#pytest.Collector" title="pytest.Collector"><em>Collector</em></a>) – The collector.</p>
</dd>
</dl>
<section id="id207">
<h4>Use in conftest plugins<a class="headerlink" href="#id207" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given collector, only
conftest files in the collector’s directory and its parent directories are
consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-30">
<dt class="sig sig-object py" id="id208">
<span class="sig-name descname"><span class="pre">pytest_itemcollected</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_itemcollected"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id208" title="Link to this definition">¶</a></dt>
<dd><p>We just collected a test item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – The item.</p>
</dd>
</dl>
<section id="id209">
<h4>Use in conftest plugins<a class="headerlink" href="#id209" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-31">
<dt class="sig sig-object py" id="id210">
<span class="sig-name descname"><span class="pre">pytest_collectreport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">report</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_collectreport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id210" title="Link to this definition">¶</a></dt>
<dd><p>Collector finished collecting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>report</strong> (<a class="reference internal" href="#pytest.CollectReport" title="pytest.CollectReport"><em>CollectReport</em></a>) – The collect report.</p>
</dd>
</dl>
<section id="id211">
<h4>Use in conftest plugins<a class="headerlink" href="#id211" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given collector, only
conftest files in the collector’s directory and its parent directories are
consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-32">
<dt class="sig sig-object py" id="id212">
<span class="sig-name descname"><span class="pre">pytest_deselected</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_deselected"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id212" title="Link to this definition">¶</a></dt>
<dd><p>Called for deselected test items, e.g. by keyword.</p>
<p>Note that this hook has two integration aspects for plugins:</p>
<ul class="simple">
<li><p>it can be <em>implemented</em> to be notified of deselected items</p></li>
<li><p>it must be <em>called</em> from <a class="reference internal" href="#std:hook-19"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_collection_modifyitems</span></code></a>
implementations when items are deselected (to properly notify other plugins).</p></li>
</ul>
<p>May be called multiple times.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>items</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a><em>]</em>) – The items.</p>
</dd>
</dl>
<section id="id213">
<h4>Use in conftest plugins<a class="headerlink" href="#id213" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-33">
<dt class="sig sig-object py" id="id214">
<span class="sig-name descname"><span class="pre">pytest_report_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_report_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id214" title="Link to this definition">¶</a></dt>
<dd><p>Return a string or list of strings to be displayed as header info for terminal reporting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>start_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>pathlib.Path</em></a>) – The starting dir.</p></li>
<li><p><strong>startdir</strong> (<em>LEGACY_PATH</em>) – The starting dir (deprecated).</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lines returned by a plugin are displayed before those of plugins which
ran before it.
If you want to have your line(s) displayed first, use
<a class="reference internal" href="../how-to/writing_hook_functions.html#plugin-hookorder"><span class="std std-ref">trylast=True</span></a>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">start_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter. The <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter
has been deprecated.</p>
</div>
<section id="id215">
<h4>Use in conftest plugins<a class="headerlink" href="#id215" title="Link to this heading">¶</a></h4>
<p>This hook is only called for <a class="reference internal" href="../how-to/writing_plugins.html#pluginorder"><span class="std std-ref">initial conftests</span></a>.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-34">
<dt class="sig sig-object py" id="id216">
<span class="sig-name descname"><span class="pre">pytest_report_collectionfinish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_report_collectionfinish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id216" title="Link to this definition">¶</a></dt>
<dd><p>Return a string or list of strings to be displayed after collection
has finished successfully.</p>
<p>These strings will be displayed after the standard “collected X items” message.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.2.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>start_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>pathlib.Path</em></a>) – The starting dir.</p></li>
<li><p><strong>startdir</strong> (<em>LEGACY_PATH</em>) – The starting dir (deprecated).</p></li>
<li><p><strong>items</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a><em>]</em>) – List of pytest items that are going to be executed; this list should not be modified.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lines returned by a plugin are displayed before those of plugins which
ran before it.
If you want to have your line(s) displayed first, use
<a class="reference internal" href="../how-to/writing_hook_functions.html#plugin-hookorder"><span class="std std-ref">trylast=True</span></a>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">start_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter. The <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter
has been deprecated.</p>
</div>
<section id="id217">
<h4>Use in conftest plugins<a class="headerlink" href="#id217" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-35">
<dt class="sig sig-object py" id="id218">
<span class="sig-name descname"><span class="pre">pytest_report_teststatus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">report</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_report_teststatus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id218" title="Link to this definition">¶</a></dt>
<dd><p>Return result-category, shortletter and verbose word for status
reporting.</p>
<p>The result-category is a category in which to count the result, for
example “passed”, “skipped”, “error” or the empty string.</p>
<p>The shortletter is shown as testing progresses, for example “.”, “s”,
“E” or the empty string.</p>
<p>The verbose word is shown as testing progresses in verbose mode, for
example “PASSED”, “SKIPPED”, “ERROR” or the empty string.</p>
<p>pytest may style these implicitly according to the report outcome.
To provide explicit styling, return a tuple for the verbose word,
for example <code class="docutils literal notranslate"><span class="pre">&quot;rerun&quot;,</span> <span class="pre">&quot;R&quot;,</span> <span class="pre">(&quot;RERUN&quot;,</span> <span class="pre">{&quot;yellow&quot;:</span> <span class="pre">True})</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>report</strong> (<a class="reference internal" href="#pytest.CollectReport" title="pytest.CollectReport"><em>CollectReport</em></a><em> | </em><a class="reference internal" href="#pytest.TestReport" title="pytest.TestReport"><em>TestReport</em></a>) – The report object whose status is to be returned.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The test status.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.TestShortLogReport" title="pytest.TestShortLogReport">TestShortLogReport</a> | <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a> | <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, Mapping[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)">bool</a>]]]</p>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<section id="id219">
<h4>Use in conftest plugins<a class="headerlink" href="#id219" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-36">
<dt class="sig sig-object py" id="id220">
<span class="sig-name descname"><span class="pre">pytest_report_to_serializable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_report_to_serializable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id220" title="Link to this definition">¶</a></dt>
<dd><p>Serialize the given report object into a data structure suitable for
sending over the wire, e.g. converted to JSON.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>report</strong> (<a class="reference internal" href="#pytest.CollectReport" title="pytest.CollectReport"><em>CollectReport</em></a><em> | </em><a class="reference internal" href="#pytest.TestReport" title="pytest.TestReport"><em>TestReport</em></a>) – The report.</p></li>
</ul>
</dd>
</dl>
<section id="id221">
<h4>Use in conftest plugins<a class="headerlink" href="#id221" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. The exact details may depend
on the plugin which calls the hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-37">
<dt class="sig sig-object py" id="id222">
<span class="sig-name descname"><span class="pre">pytest_report_from_serializable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_report_from_serializable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id222" title="Link to this definition">¶</a></dt>
<dd><p>Restore a report object previously serialized with
<a class="reference internal" href="#std:hook-36"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_report_to_serializable</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p>
</dd>
</dl>
<section id="id223">
<h4>Use in conftest plugins<a class="headerlink" href="#id223" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. The exact details may depend
on the plugin which calls the hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-38">
<dt class="sig sig-object py" id="id224">
<span class="sig-name descname"><span class="pre">pytest_terminal_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">terminalreporter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exitstatus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_terminal_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id224" title="Link to this definition">¶</a></dt>
<dd><p>Add a section to terminal summary reporting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>terminalreporter</strong> (<a class="reference internal" href="#pytest.TerminalReporter" title="pytest.TerminalReporter"><em>TerminalReporter</em></a>) – The internal terminal reporter object.</p></li>
<li><p><strong>exitstatus</strong> (<a class="reference internal" href="#pytest.ExitCode" title="pytest.ExitCode"><em>ExitCode</em></a>) – The exit status that will be reported back to the OS.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 4.2: </span>The <code class="docutils literal notranslate"><span class="pre">config</span></code> parameter.</p>
</div>
<section id="id225">
<h4>Use in conftest plugins<a class="headerlink" href="#id225" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-39">
<dt class="sig sig-object py" id="id226">
<span class="sig-name descname"><span class="pre">pytest_fixture_setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixturedef</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_fixture_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id226" title="Link to this definition">¶</a></dt>
<dd><p>Perform fixture setup execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fixturedef</strong> (<a class="reference internal" href="#pytest.FixtureDef" title="pytest.FixtureDef"><em>FixtureDef</em></a><em>[</em><em>Any</em><em>]</em>) – The fixture definition object.</p></li>
<li><p><strong>request</strong> (<em>SubRequest</em>) – The fixture request object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The return value of the call to the fixture function.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)">object</a> | None</p>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the fixture function returns None, other implementations of
this hook function will continue to be called, according to the
behavior of the <a class="reference internal" href="../how-to/writing_hook_functions.html#firstresult"><span class="std std-ref">firstresult: 在第一个非 None 结果处停止</span></a> option.</p>
</div>
<section id="id227">
<h4>Use in conftest plugins<a class="headerlink" href="#id227" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given fixture, only
conftest files in the fixture scope’s directory and its parent directories
are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-40">
<dt class="sig sig-object py" id="id228">
<span class="sig-name descname"><span class="pre">pytest_fixture_post_finalizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixturedef</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_fixture_post_finalizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id228" title="Link to this definition">¶</a></dt>
<dd><p>Called after fixture teardown, but before the cache is cleared, so
the fixture result <code class="docutils literal notranslate"><span class="pre">fixturedef.cached_result</span></code> is still available (not
<code class="docutils literal notranslate"><span class="pre">None</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fixturedef</strong> (<a class="reference internal" href="#pytest.FixtureDef" title="pytest.FixtureDef"><em>FixtureDef</em></a><em>[</em><em>Any</em><em>]</em>) – The fixture definition object.</p></li>
<li><p><strong>request</strong> (<em>SubRequest</em>) – The fixture request object.</p></li>
</ul>
</dd>
</dl>
<section id="id229">
<h4>Use in conftest plugins<a class="headerlink" href="#id229" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given fixture, only
conftest files in the fixture scope’s directory and its parent directories
are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-41">
<dt class="sig sig-object py" id="id230">
<span class="sig-name descname"><span class="pre">pytest_warning_recorded</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">warning_message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">when</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodeid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_warning_recorded"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id230" title="Link to this definition">¶</a></dt>
<dd><p>Process a warning captured by the internal pytest warnings plugin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>warning_message</strong> (<em>warnings.WarningMessage</em>) – The captured warning. This is the same object produced by <a class="reference external" href="https://docs.python.org/3/library/warnings.html#warnings.catch_warnings" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">warnings.catch_warnings</span></code></a>,
and contains the same attributes as the parameters of <a class="reference external" href="https://docs.python.org/3/library/warnings.html#warnings.showwarning" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">warnings.showwarning()</span></code></a>.</p></li>
<li><p><strong>when</strong> (<em>Literal</em><em>[</em><em>'config'</em><em>, </em><em>'collect'</em><em>, </em><em>'runtest'</em><em>]</em>) – <p>Indicates when the warning was captured. Possible values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;config&quot;</span></code>: during pytest configuration/initialization stage.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;collect&quot;</span></code>: during test collection.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;runtest&quot;</span></code>: during test execution.</p></li>
</ul>
</p></li>
<li><p><strong>nodeid</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Full id of the item. Empty string for warnings that are not specific to
a particular node.</p></li>
<li><p><strong>location</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>] </em><em>| </em><em>None</em>) – When available, holds information about the execution context of the captured
warning (filename, linenumber, function). <code class="docutils literal notranslate"><span class="pre">function</span></code> evaluates to &lt;module&gt;
when the execution context is at the module level.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 6.0.</span></p>
</div>
<section id="id231">
<h4>Use in conftest plugins<a class="headerlink" href="#id231" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. If the warning is specific to a
particular node, only conftest files in parent directories of the node are
consulted.</p>
</section>
</dd></dl>

<p>Central hook for reporting about test execution:</p>
<dl class="py function" id="std:hook-42">
<dt class="sig sig-object py" id="id232">
<span class="sig-name descname"><span class="pre">pytest_runtest_logreport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">report</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_runtest_logreport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id232" title="Link to this definition">¶</a></dt>
<dd><p>Process the <a class="reference internal" href="#pytest.TestReport" title="pytest.TestReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestReport</span></code></a> produced for each
of the setup, call and teardown runtest phases of an item.</p>
<p>See <a class="reference internal" href="#std:hook-21"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a> for a description of the runtest protocol.</p>
<section id="id233">
<h4>Use in conftest plugins<a class="headerlink" href="#id233" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
<dl class="field-list simple">
</dl>
</dd></dl>

<p>Assertion related hooks:</p>
<dl class="py function" id="std:hook-43">
<dt class="sig sig-object py" id="id234">
<span class="sig-name descname"><span class="pre">pytest_assertrepr_compare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_assertrepr_compare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id234" title="Link to this definition">¶</a></dt>
<dd><p>Return explanation for comparisons in failing assert expressions.</p>
<p>Return None for no custom explanation, otherwise return a list
of strings. The strings will be joined by newlines but any newlines
<em>in</em> a string will be escaped. Note that all but the first line will
be indented slightly, the intention is for the first line to be a summary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>op</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The operator, e.g. <code class="docutils literal notranslate"><span class="pre">&quot;==&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;!=&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;not</span> <span class="pre">in&quot;</span></code>.</p></li>
<li><p><strong>left</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The left operand.</p></li>
<li><p><strong>right</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The right operand.</p></li>
</ul>
</dd>
</dl>
<section id="id235">
<h4>Use in conftest plugins<a class="headerlink" href="#id235" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std:hook-44">
<dt class="sig sig-object py" id="id236">
<span class="sig-name descname"><span class="pre">pytest_assertion_pass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lineno</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expl</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_assertion_pass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id236" title="Link to this definition">¶</a></dt>
<dd><p>Called whenever an assertion passes.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.0.</span></p>
</div>
<p>Use this hook to do some processing after a passing assertion.
The original assertion information is available in the <code class="docutils literal notranslate"><span class="pre">orig</span></code> string
and the pytest introspected assertion information is available in the
<code class="docutils literal notranslate"><span class="pre">expl</span></code> string.</p>
<p>This hook must be explicitly enabled by the <code class="docutils literal notranslate"><span class="pre">enable_assertion_pass_hook</span></code>
ini-file option:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">enable_assertion_pass_hook</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>You need to <strong>clean the .pyc</strong> files in your project directory and interpreter libraries
when enabling this option, as assertions will require to be re-written.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – pytest item object of current test.</p></li>
<li><p><strong>lineno</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Line number of the assert statement.</p></li>
<li><p><strong>orig</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – String with the original assertion.</p></li>
<li><p><strong>expl</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – String with the assert explanation.</p></li>
</ul>
</dd>
</dl>
<section id="id237">
<h4>Use in conftest plugins<a class="headerlink" href="#id237" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given item, only conftest
files in the item’s directory and its parent directories are consulted.</p>
</section>
</dd></dl>

</div></div>
</section>
<section id="id238">
<h3>调试/交互钩子<a class="headerlink" href="#id238" title="Link to this heading">¶</a></h3>
<p>Debugging/Interaction hooks</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-25-25-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-25-25-0" name="25-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-25-25-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-25-25-1" name="25-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-25-25-0" class="sphinx-tabs-panel" id="panel-25-25-0" name="25-0" role="tabpanel" tabindex="0"><p>有一些钩子可以用于特殊报告或异常交互：</p>
</div><div aria-labelledby="tab-25-25-1" class="sphinx-tabs-panel" hidden="true" id="panel-25-25-1" name="25-1" role="tabpanel" tabindex="0"><p>There are few hooks which can be used for special
reporting or interaction with exceptions:</p>
</div></div>
<dl class="py function" id="std-hook-pytest_internalerror">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_internalerror">
<span class="sig-name descname"><span class="pre">pytest_internalerror</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">excrepr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">excinfo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_internalerror"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_internalerror" title="Link to this definition">¶</a></dt>
<dd><p>Called for internal errors.</p>
<p>Return True to suppress the fallback handling of printing an
INTERNALERROR message directly to sys.stderr.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>excrepr</strong> (<em>ExceptionRepr</em>) – The exception repr object.</p></li>
<li><p><strong>excinfo</strong> (<a class="reference internal" href="#pytest.ExceptionInfo" title="pytest.ExceptionInfo"><em>ExceptionInfo</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><em>BaseException</em></a><em>]</em>) – The exception info.</p></li>
</ul>
</dd>
</dl>
<section id="id239">
<h4>Use in conftest plugins<a class="headerlink" href="#id239" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_keyboard_interrupt">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_keyboard_interrupt">
<span class="sig-name descname"><span class="pre">pytest_keyboard_interrupt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">excinfo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_keyboard_interrupt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_keyboard_interrupt" title="Link to this definition">¶</a></dt>
<dd><p>Called for keyboard interrupt.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>excinfo</strong> (<a class="reference internal" href="#pytest.ExceptionInfo" title="pytest.ExceptionInfo"><em>ExceptionInfo</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt" title="(in Python v3.13)"><em>KeyboardInterrupt</em></a><em> | </em><em>Exit</em><em>]</em>) – The exception info.</p>
</dd>
</dl>
<section id="id240">
<h4>Use in conftest plugins<a class="headerlink" href="#id240" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_exception_interact">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_exception_interact">
<span class="sig-name descname"><span class="pre">pytest_exception_interact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">call</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_exception_interact"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_exception_interact" title="Link to this definition">¶</a></dt>
<dd><p>Called when an exception was raised which can potentially be
interactively handled.</p>
<p>May be called during collection (see <a class="reference internal" href="#std:hook-29"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_make_collect_report</span></code></a>),
in which case <code class="docutils literal notranslate"><span class="pre">report</span></code> is a <a class="reference internal" href="#pytest.CollectReport" title="pytest.CollectReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectReport</span></code></a>.</p>
<p>May be called during runtest of an item (see <a class="reference internal" href="#std:hook-21"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a>),
in which case <code class="docutils literal notranslate"><span class="pre">report</span></code> is a <a class="reference internal" href="#pytest.TestReport" title="pytest.TestReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestReport</span></code></a>.</p>
<p>This hook is not called if the exception that was raised is an internal
exception like <code class="docutils literal notranslate"><span class="pre">skip.Exception</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a><em> | </em><a class="reference internal" href="#pytest.Collector" title="pytest.Collector"><em>Collector</em></a>) – The item or collector.</p></li>
<li><p><strong>call</strong> (<a class="reference internal" href="#pytest.CallInfo" title="pytest.CallInfo"><em>CallInfo</em></a><em>[</em><em>Any</em><em>]</em>) – The call information. Contains the exception.</p></li>
<li><p><strong>report</strong> (<a class="reference internal" href="#pytest.CollectReport" title="pytest.CollectReport"><em>CollectReport</em></a><em> | </em><a class="reference internal" href="#pytest.TestReport" title="pytest.TestReport"><em>TestReport</em></a>) – The collection or test report.</p></li>
</ul>
</dd>
</dl>
<section id="id241">
<h4>Use in conftest plugins<a class="headerlink" href="#id241" title="Link to this heading">¶</a></h4>
<p>Any conftest file can implement this hook. For a given node, only conftest
files in parent directories of the node are consulted.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_enter_pdb">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_enter_pdb">
<span class="sig-name descname"><span class="pre">pytest_enter_pdb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pdb</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_enter_pdb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_enter_pdb" title="Link to this definition">¶</a></dt>
<dd><p>Called upon pdb.set_trace().</p>
<p>Can be used by plugins to take special action just before the python
debugger enters interactive mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>pdb</strong> (<a class="reference external" href="https://docs.python.org/3/library/pdb.html#pdb.Pdb" title="(in Python v3.13)"><em>pdb.Pdb</em></a>) – The Pdb instance.</p></li>
</ul>
</dd>
</dl>
<section id="id242">
<h4>Use in conftest plugins<a class="headerlink" href="#id242" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

<dl class="py function" id="std-hook-pytest_leave_pdb">
<dt class="sig sig-object py" id="pytest.hookspec.pytest_leave_pdb">
<span class="sig-name descname"><span class="pre">pytest_leave_pdb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pdb</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/hookspec.html#pytest_leave_pdb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_leave_pdb" title="Link to this definition">¶</a></dt>
<dd><p>Called when leaving pdb (e.g. with continue after pdb.set_trace()).</p>
<p>Can be used by plugins to take special action just after the python
debugger leaves interactive mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>pdb</strong> (<a class="reference external" href="https://docs.python.org/3/library/pdb.html#pdb.Pdb" title="(in Python v3.13)"><em>pdb.Pdb</em></a>) – The Pdb instance.</p></li>
</ul>
</dd>
</dl>
<section id="id243">
<h4>Use in conftest plugins<a class="headerlink" href="#id243" title="Link to this heading">¶</a></h4>
<p>Any conftest plugin can implement this hook.</p>
</section>
</dd></dl>

</section>
</section>
<section id="id244">
<h2>收集树对象<a class="headerlink" href="#id244" title="Link to this heading">¶</a></h2>
<p><strong>Collection tree objects</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-26-26-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-26-26-0" name="26-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-26-26-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-26-26-1" name="26-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-26-26-0" class="sphinx-tabs-panel" id="panel-26-26-0" name="26-0" role="tabpanel" tabindex="0"><p>这些是构成收集树的收集器和项目类（统称为“节点”）。</p>
</div><div aria-labelledby="tab-26-26-1" class="sphinx-tabs-panel" hidden="true" id="panel-26-26-1" name="26-1" role="tabpanel" tabindex="0"><p>These are the collector and item classes (collectively called “nodes”) which make up the collection tree.</p>
</div></div>
<section id="node">
<h3>Node<a class="headerlink" href="#node" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.nodes.Node">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Node</span></span><a class="reference internal" href="../_modules/_pytest/nodes.html#Node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a></p>
<p>Base class of <a class="reference internal" href="#pytest.Collector" title="_pytest.nodes.Collector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collector</span></code></a> and <a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">Item</span></code></a>, the components of
the test collection tree.</p>
<p><code class="docutils literal notranslate"><span class="pre">Collector</span></code>'s are the internal nodes of the tree, and <code class="docutils literal notranslate"><span class="pre">Item</span></code>'s are the
leaf nodes.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.Node.fspath">
<span class="sig-name descname"><span class="pre">fspath</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LEGACY_PATH</span></em><a class="headerlink" href="#pytest.nodes.Node.fspath" title="Link to this definition">¶</a></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">LEGACY_PATH</span></code> copy of the <a class="reference internal" href="#pytest.nodes.Node.path" title="_pytest.nodes.Node.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a> attribute. Intended for usage
for methods not migrated to <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code> yet, such as
<a class="reference internal" href="#pytest.Item.reportinfo" title="pytest.Item.reportinfo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Item.reportinfo</span></code></a>. Will be deprecated in
a future release, prefer using <a class="reference internal" href="#pytest.nodes.Node.path" title="_pytest.nodes.Node.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a> instead.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.Node.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.nodes.Node.name" title="Link to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.Node.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#pytest.nodes.Node.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.Node.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="pytest.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.nodes.Node.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.Node.session">
<span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="pytest.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.nodes.Node.session" title="Link to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.Node.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.nodes.Node.path" title="Link to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.Node.keywords">
<span class="sig-name descname"><span class="pre">keywords</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">MutableMapping</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.nodes.Node.keywords" title="Link to this definition">¶</a></dt>
<dd><p>Keywords/markers collected from all scopes.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.Node.own_markers">
<span class="sig-name descname"><span class="pre">own_markers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pytest.Mark" title="pytest.Mark"><span class="pre">Mark</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.nodes.Node.own_markers" title="Link to this definition">¶</a></dt>
<dd><p>The marker objects belonging to this node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.Node.extra_keyword_matches">
<span class="sig-name descname"><span class="pre">extra_keyword_matches</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.13)"><span class="pre">set</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.nodes.Node.extra_keyword_matches" title="Link to this definition">¶</a></dt>
<dd><p>Allow adding of extra keywords to use for matching.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.Node.stash">
<span class="sig-name descname"><span class="pre">stash</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Stash" title="pytest.Stash"><span class="pre">Stash</span></a></em><a class="headerlink" href="#pytest.nodes.Node.stash" title="Link to this definition">¶</a></dt>
<dd><p>A place where plugins can store information on the node for their
own use.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.nodes.Node.from_parent">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_parent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Node.from_parent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.from_parent" title="Link to this definition">¶</a></dt>
<dd><p>Public constructor for Nodes.</p>
<p>This indirection got introduced in order to enable removing
the fragile logic from the node constructors.</p>
<p>Subclasses can use <code class="docutils literal notranslate"><span class="pre">super().from_parent(...)</span></code> when overriding the
construction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>parent</strong> (<a class="reference internal" href="#pytest.nodes.Node" title="_pytest.nodes.Node"><em>Node</em></a>) – The parent node of this Node.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.nodes.Node.ihook">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ihook</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.HookRelay" title="(in pluggy v0.1)"><span class="pre">HookRelay</span></a></em><a class="headerlink" href="#pytest.nodes.Node.ihook" title="Link to this definition">¶</a></dt>
<dd><p>fspath-sensitive hook proxy used to call pytest hooks.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.nodes.Node.warn">
<span class="sig-name descname"><span class="pre">warn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">warning</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Node.warn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.warn" title="Link to this definition">¶</a></dt>
<dd><p>Issue a warning for this Node.</p>
<p>Warnings will be displayed after the test session, unless explicitly suppressed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>warning</strong> (<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Warning" title="(in Python v3.13)"><em>Warning</em></a>) – The warning instance to issue.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><strong>ValueError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">warning</span></code> instance is not a subclass of Warning.</p>
</dd>
</dl>
<p>Example usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">PytestWarning</span><span class="p">(</span><span class="s2">&quot;some message&quot;</span><span class="p">))</span>
<span class="n">node</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">(</span><span class="s2">&quot;some message&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 6.2: </span>Any subclass of <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Warning" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Warning</span></code></a> is now accepted, rather than only
<a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a> subclasses.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.nodes.Node.nodeid">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nodeid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.nodes.Node.nodeid" title="Link to this definition">¶</a></dt>
<dd><p>A ::-separated string denoting its collection tree address.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.nodes.Node.iter_parents">
<em class="property"><span class="pre">for</span> <span class="pre">...</span> <span class="pre">in</span> </em><span class="sig-name descname"><span class="pre">iter_parents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Node.iter_parents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.iter_parents" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over all parent collectors starting from and including self
up to the root of the collection tree.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 8.1.</span></p>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.nodes.Node.listchain">
<span class="sig-name descname"><span class="pre">listchain</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Node.listchain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.listchain" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of all parent collectors starting from the root of the
collection tree down to and including self.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.nodes.Node.add_marker">
<span class="sig-name descname"><span class="pre">add_marker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">marker</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Node.add_marker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.add_marker" title="Link to this definition">¶</a></dt>
<dd><p>Dynamically add a marker object to the node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>marker</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference internal" href="#pytest.MarkDecorator" title="_pytest.mark.structures.MarkDecorator"><em>MarkDecorator</em></a>) – The marker.</p></li>
<li><p><strong>append</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to append the marker, or prepend it.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.nodes.Node.iter_markers">
<span class="sig-name descname"><span class="pre">iter_markers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Node.iter_markers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.iter_markers" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over all markers of the node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – If given, filter the results by the name attribute.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An iterator of the markers of the node.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><em>Iterator</em></a>[<a class="reference internal" href="#pytest.Mark" title="_pytest.mark.structures.Mark"><em>Mark</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.nodes.Node.iter_markers_with_node">
<em class="property"><span class="pre">for</span> <span class="pre">...</span> <span class="pre">in</span> </em><span class="sig-name descname"><span class="pre">iter_markers_with_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Node.iter_markers_with_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.iter_markers_with_node" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over all markers of the node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – If given, filter the results by the name attribute.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An iterator of (node, mark) tuples.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.13)"><em>Iterator</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a>[<a class="reference internal" href="#pytest.nodes.Node" title="_pytest.nodes.Node"><em>Node</em></a>, <a class="reference internal" href="#pytest.Mark" title="_pytest.mark.structures.Mark"><em>Mark</em></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.nodes.Node.get_closest_marker">
<span class="sig-name descname"><span class="pre">get_closest_marker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pytest.Mark" title="_pytest.mark.structures.Mark"><span class="pre">Mark</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/_pytest/nodes.html#Node.get_closest_marker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.get_closest_marker" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_closest_marker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pytest.Mark" title="_pytest.mark.structures.Mark"><span class="pre">Mark</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pytest.Mark" title="_pytest.mark.structures.Mark"><span class="pre">Mark</span></a></span></span></dt>
<dd><p>Return the first marker matching the name, from closest (for
example function) to farther level (for example module level).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>default</strong> – Fallback return value if no marker was found.</p></li>
<li><p><strong>name</strong> – Name to filter by.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.nodes.Node.listextrakeywords">
<span class="sig-name descname"><span class="pre">listextrakeywords</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Node.listextrakeywords"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.listextrakeywords" title="Link to this definition">¶</a></dt>
<dd><p>Return a set of all extra keywords in self and any parents.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.nodes.Node.addfinalizer">
<span class="sig-name descname"><span class="pre">addfinalizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fin</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Node.addfinalizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.addfinalizer" title="Link to this definition">¶</a></dt>
<dd><p>Register a function to be called without arguments when this node is
finalized.</p>
<p>This method can only be called when this node is active
in a setup chain, for example during self.setup().</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.nodes.Node.getparent">
<span class="sig-name descname"><span class="pre">getparent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Node.getparent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.getparent" title="Link to this definition">¶</a></dt>
<dd><p>Get the closest parent node (including self) which is an instance of
the given class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cls</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><em>type</em></a><em>[</em><em>_NodeType</em><em>]</em>) – The node class to search for.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The node, if found.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>_NodeType</em> | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.nodes.Node.repr_failure">
<span class="sig-name descname"><span class="pre">repr_failure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">excinfo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Node.repr_failure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.repr_failure" title="Link to this definition">¶</a></dt>
<dd><p>Return a representation of a collection or test failure.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../example/nonpython.html#non-python-tests"><span class="std std-ref">使用非 Python 测试</span></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>excinfo</strong> (<a class="reference internal" href="#pytest.ExceptionInfo" title="_pytest._code.code.ExceptionInfo"><em>ExceptionInfo</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><em>BaseException</em></a><em>]</em>) – Exception information for the failure.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="collector">
<h3>Collector<a class="headerlink" href="#collector" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Collector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Collector</span></span><a class="reference internal" href="../_modules/_pytest/nodes.html#Collector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Collector" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.nodes.Node" title="_pytest.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a></p>
<p>Base class of all collectors.</p>
<p>Collector create children through <code class="docutils literal notranslate"><span class="pre">collect()</span></code> and thus iteratively build
the collection tree.</p>
<dl class="field-list simple">
</dl>
<dl class="py exception">
<dt class="sig sig-object py" id="pytest.Collector.CollectError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CollectError</span></span><a class="reference internal" href="../_modules/_pytest/nodes.html#Collector.CollectError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Collector.CollectError" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>An error during collection, contains a custom message.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Collector.collect">
<em class="property"><span class="pre">abstractmethod</span> </em><span class="sig-name descname"><span class="pre">collect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Collector.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Collector.collect" title="Link to this definition">¶</a></dt>
<dd><p>Collect children (items and collectors) for this collector.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Collector.repr_failure">
<span class="sig-name descname"><span class="pre">repr_failure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">excinfo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Collector.repr_failure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Collector.repr_failure" title="Link to this definition">¶</a></dt>
<dd><p>Return a representation of a collection failure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>excinfo</strong> (<a class="reference internal" href="#pytest.ExceptionInfo" title="_pytest._code.code.ExceptionInfo"><em>ExceptionInfo</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><em>BaseException</em></a><em>]</em>) – Exception information for the failure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Collector.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.Collector.name" title="Link to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Collector.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#pytest.Collector.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Collector.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="pytest.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.Collector.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Collector.session">
<span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="pytest.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.Collector.session" title="Link to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Collector.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.Collector.path" title="Link to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

</dd></dl>

</section>
<section id="item">
<h3>Item<a class="headerlink" href="#item" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Item">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Item</span></span><a class="reference internal" href="../_modules/_pytest/nodes.html#Item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Item" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.nodes.Node" title="_pytest.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a></p>
<p>Base class of all test invocation items.</p>
<p>Note that for a single function there might be multiple test invocation items.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Item.user_properties">
<span class="sig-name descname"><span class="pre">user_properties</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><span class="pre">object</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.Item.user_properties" title="Link to this definition">¶</a></dt>
<dd><p>A list of tuples (name, value) that holds user defined properties
for this test.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Item.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.Item.name" title="Link to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Item.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#pytest.Item.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Item.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="pytest.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.Item.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Item.session">
<span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="pytest.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.Item.session" title="Link to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Item.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.Item.path" title="Link to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Item.runtest">
<em class="property"><span class="pre">abstractmethod</span> </em><span class="sig-name descname"><span class="pre">runtest</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Item.runtest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Item.runtest" title="Link to this definition">¶</a></dt>
<dd><p>Run the test case for this item.</p>
<p>Must be implemented by subclasses.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../example/nonpython.html#non-python-tests"><span class="std std-ref">使用非 Python 测试</span></a></p>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Item.add_report_section">
<span class="sig-name descname"><span class="pre">add_report_section</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">when</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Item.add_report_section"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Item.add_report_section" title="Link to this definition">¶</a></dt>
<dd><p>Add a new report section, similar to what’s done internally to add
stdout and stderr captured output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">item</span><span class="o">.</span><span class="n">add_report_section</span><span class="p">(</span><span class="s2">&quot;call&quot;</span><span class="p">,</span> <span class="s2">&quot;stdout&quot;</span><span class="p">,</span> <span class="s2">&quot;report section contents&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>when</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – One of the possible capture states, <code class="docutils literal notranslate"><span class="pre">&quot;setup&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;call&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;teardown&quot;</span></code>.</p></li>
<li><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Name of the section, can be customized at will. Pytest uses <code class="docutils literal notranslate"><span class="pre">&quot;stdout&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;stderr&quot;</span></code> internally.</p></li>
<li><p><strong>content</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The full contents as a string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Item.reportinfo">
<span class="sig-name descname"><span class="pre">reportinfo</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#Item.reportinfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Item.reportinfo" title="Link to this definition">¶</a></dt>
<dd><p>Get location information for this item for test reports.</p>
<p>Returns a tuple with three elements:</p>
<ul class="simple">
<li><p>The path of the test (default <code class="docutils literal notranslate"><span class="pre">self.path</span></code>)</p></li>
<li><p>The 0-based line number of the test (default <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>A name of the test to be shown (default <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>)</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../example/nonpython.html#non-python-tests"><span class="std std-ref">使用非 Python 测试</span></a></p>
</div>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.Item.location">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">location</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.Item.location" title="Link to this definition">¶</a></dt>
<dd><p>Returns a tuple of <code class="docutils literal notranslate"><span class="pre">(relfspath,</span> <span class="pre">lineno,</span> <span class="pre">testname)</span></code> for this item
where <code class="docutils literal notranslate"><span class="pre">relfspath</span></code> is file path relative to <code class="docutils literal notranslate"><span class="pre">config.rootpath</span></code>
and lineno is a 0-based line number.</p>
</dd></dl>

</dd></dl>

</section>
<section id="file">
<h3>File<a class="headerlink" href="#file" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.File">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">File</span></span><a class="reference internal" href="../_modules/_pytest/nodes.html#File"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.File" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.nodes.FSCollector" title="_pytest.nodes.FSCollector"><code class="xref py py-class docutils literal notranslate"><span class="pre">FSCollector</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a></p>
<p>Base class for collecting tests from a file.</p>
<p><a class="reference internal" href="../example/nonpython.html#non-python-tests"><span class="std std-ref">使用非 Python 测试</span></a>.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.File.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.File.name" title="Link to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.File.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#pytest.File.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.File.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="pytest.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.File.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.File.session">
<span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="pytest.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.File.session" title="Link to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.File.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.File.path" title="Link to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

</dd></dl>

</section>
<section id="fscollector">
<h3>FSCollector<a class="headerlink" href="#fscollector" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.nodes.FSCollector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FSCollector</span></span><a class="reference internal" href="../_modules/_pytest/nodes.html#FSCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.FSCollector" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.Collector" title="_pytest.nodes.Collector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collector</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a></p>
<p>Base class for filesystem collectors.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.FSCollector.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.nodes.FSCollector.path" title="Link to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.nodes.FSCollector.from_parent">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_parent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fspath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/nodes.html#FSCollector.from_parent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.FSCollector.from_parent" title="Link to this definition">¶</a></dt>
<dd><p>The public constructor.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.FSCollector.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.nodes.FSCollector.name" title="Link to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.FSCollector.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#pytest.nodes.FSCollector.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.FSCollector.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="pytest.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.nodes.FSCollector.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.nodes.FSCollector.session">
<span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="pytest.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.nodes.FSCollector.session" title="Link to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

</dd></dl>

</section>
<section id="session">
<h3>Session<a class="headerlink" href="#session" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Session">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Session</span></span><a class="reference internal" href="../_modules/_pytest/main.html#Session"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Session" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.Collector" title="_pytest.nodes.Collector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collector</span></code></a></p>
<p>The root of the collection tree.</p>
<p><code class="docutils literal notranslate"><span class="pre">Session</span></code> collects the initial paths given as arguments to pytest.</p>
<dl class="field-list simple">
</dl>
<dl class="py exception">
<dt class="sig sig-object py" id="pytest.Session.Interrupted">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Interrupted</span></span><a class="headerlink" href="#pytest.Session.Interrupted" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code></a></p>
<p>Signals that the test run was interrupted.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="pytest.Session.Failed">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Failed</span></span><a class="headerlink" href="#pytest.Session.Failed" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>Signals a stop as failed test run.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.Session.startpath">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">startpath</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></em><a class="headerlink" href="#pytest.Session.startpath" title="Link to this definition">¶</a></dt>
<dd><p>The path from which pytest was invoked.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 7.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Session.isinitpath">
<span class="sig-name descname"><span class="pre">isinitpath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_parents</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/main.html#Session.isinitpath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Session.isinitpath" title="Link to this definition">¶</a></dt>
<dd><p>Is path an initial path?</p>
<p>An initial path is a path explicitly given to pytest on the command
line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>with_parents</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If set, also return True if the path is a parent of an initial path.</p>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 8.0: </span>Added the <code class="docutils literal notranslate"><span class="pre">with_parents</span></code> parameter.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Session.perform_collect">
<span class="sig-name descname"><span class="pre">perform_collect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">genitems</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">True</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><span class="pre">Item</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/_pytest/main.html#Session.perform_collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Session.perform_collect" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">perform_collect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">genitems</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><span class="pre">Item</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Collector" title="_pytest.nodes.Collector"><span class="pre">Collector</span></a><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Perform the collection phase for this session.</p>
<p>This is called by the default <a class="reference internal" href="#std:hook-10"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_collection</span></code></a> hook
implementation; see the documentation of this hook for more details.
For testing purposes, it may also be called directly on a fresh
<code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<p>This function normally recursively expands any collectors collected
from the session to their items, and only items are returned. For
testing purposes, this may be suppressed by passing <code class="docutils literal notranslate"><span class="pre">genitems=False</span></code>,
in which case the return value contains these collectors unexpanded,
and <code class="docutils literal notranslate"><span class="pre">session.items</span></code> is empty.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Session.collect">
<em class="property"><span class="pre">for</span> <span class="pre">...</span> <span class="pre">in</span> </em><span class="sig-name descname"><span class="pre">collect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/main.html#Session.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Session.collect" title="Link to this definition">¶</a></dt>
<dd><p>Collect children (items and collectors) for this collector.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Session.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.Session.name" title="Link to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Session.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#pytest.Session.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Session.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="pytest.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.Session.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Session.session">
<span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="pytest.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.Session.session" title="Link to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Session.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.Session.path" title="Link to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

</dd></dl>

</section>
<section id="package">
<h3>Package<a class="headerlink" href="#package" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Package">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Package</span></span><a class="reference internal" href="../_modules/_pytest/python.html#Package"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Package" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.Directory" title="_pytest.nodes.Directory"><code class="xref py py-class docutils literal notranslate"><span class="pre">Directory</span></code></a></p>
<p>Collector for files and directories in a Python packages – directories
with an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Directories without an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file are instead collected by
<a class="reference internal" href="#pytest.Dir" title="pytest.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> by default. Both are <a class="reference internal" href="#pytest.Directory" title="pytest.Directory"><code class="xref py py-class docutils literal notranslate"><span class="pre">Directory</span></code></a>
collectors.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 8.0: </span>Now inherits from <a class="reference internal" href="#pytest.Directory" title="pytest.Directory"><code class="xref py py-class docutils literal notranslate"><span class="pre">Directory</span></code></a>.</p>
</div>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.Package.collect">
<em class="property"><span class="pre">for</span> <span class="pre">...</span> <span class="pre">in</span> </em><span class="sig-name descname"><span class="pre">collect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/python.html#Package.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Package.collect" title="Link to this definition">¶</a></dt>
<dd><p>Collect children (items and collectors) for this collector.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Package.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.Package.name" title="Link to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Package.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#pytest.Package.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Package.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="pytest.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.Package.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Package.session">
<span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="pytest.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.Package.session" title="Link to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Package.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.Package.path" title="Link to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

</dd></dl>

</section>
<section id="module">
<h3>Module<a class="headerlink" href="#module" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Module">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Module</span></span><a class="reference internal" href="../_modules/_pytest/python.html#Module"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Module" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.File" title="_pytest.nodes.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PyCollector</span></code></p>
<p>Collector for test classes and functions in a Python module.</p>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.Module.collect">
<span class="sig-name descname"><span class="pre">collect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/python.html#Module.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Module.collect" title="Link to this definition">¶</a></dt>
<dd><p>Collect children (items and collectors) for this collector.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Module.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.Module.name" title="Link to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Module.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#pytest.Module.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Module.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="pytest.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.Module.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Module.session">
<span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="pytest.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.Module.session" title="Link to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Module.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.Module.path" title="Link to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

</dd></dl>

</section>
<section id="class">
<h3>Class<a class="headerlink" href="#class" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Class">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Class</span></span><a class="reference internal" href="../_modules/_pytest/python.html#Class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Class" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">PyCollector</span></code></p>
<p>Collector for test methods (and nested classes) in a Python class.</p>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.Class.from_parent">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_parent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/python.html#Class.from_parent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Class.from_parent" title="Link to this definition">¶</a></dt>
<dd><p>The public constructor.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Class.collect">
<span class="sig-name descname"><span class="pre">collect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/python.html#Class.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Class.collect" title="Link to this definition">¶</a></dt>
<dd><p>Collect children (items and collectors) for this collector.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Class.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.Class.name" title="Link to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Class.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#pytest.Class.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Class.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="pytest.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.Class.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Class.session">
<span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="pytest.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.Class.session" title="Link to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Class.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.Class.path" title="Link to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

</dd></dl>

</section>
<section id="function">
<h3>Function<a class="headerlink" href="#function" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Function">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Function</span></span><a class="reference internal" href="../_modules/_pytest/python.html#Function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Function" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">PyobjMixin</span></code>, <a class="reference internal" href="#pytest.Item" title="_pytest.nodes.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">Item</span></code></a></p>
<p>Item responsible for setting up and executing a Python test function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The full function name, including any decorations like those
added by parametrization (<code class="docutils literal notranslate"><span class="pre">my_func[my_param]</span></code>).</p></li>
<li><p><strong>parent</strong> – The parent Node.</p></li>
<li><p><strong>config</strong> – The pytest Config object.</p></li>
<li><p><strong>callspec</strong> – If given, this function has been parametrized and the callspec contains
meta information about the parametrization.</p></li>
<li><p><strong>callobj</strong> – If given, the object which will be called when the Function is invoked,
otherwise the callobj will be obtained from <code class="docutils literal notranslate"><span class="pre">parent</span></code> using <code class="docutils literal notranslate"><span class="pre">originalname</span></code>.</p></li>
<li><p><strong>keywords</strong> – Keywords bound to the function object for “-k” matching.</p></li>
<li><p><strong>session</strong> – The pytest Session object.</p></li>
<li><p><strong>fixtureinfo</strong> – Fixture information already resolved at this fixture node..</p></li>
<li><p><strong>originalname</strong> – The attribute name to use for accessing the underlying function object.
Defaults to <code class="docutils literal notranslate"><span class="pre">name</span></code>. Set this if name is different from the original name,
for example when it contains decorations like those added by parametrization
(<code class="docutils literal notranslate"><span class="pre">my_func[my_param]</span></code>).</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Function.originalname">
<span class="sig-name descname"><span class="pre">originalname</span></span><a class="headerlink" href="#pytest.Function.originalname" title="Link to this definition">¶</a></dt>
<dd><p>Original function name, without any decorations (for example
parametrization adds a <code class="docutils literal notranslate"><span class="pre">&quot;[...]&quot;</span></code> suffix to function names), used to access
the underlying function object from <code class="docutils literal notranslate"><span class="pre">parent</span></code> (in case <code class="docutils literal notranslate"><span class="pre">callobj</span></code> is not given
explicitly).</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Function.from_parent">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_parent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/python.html#Function.from_parent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Function.from_parent" title="Link to this definition">¶</a></dt>
<dd><p>The public constructor.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.Function.function">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">function</span></span><a class="headerlink" href="#pytest.Function.function" title="Link to this definition">¶</a></dt>
<dd><p>Underlying python ‘function’ object.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.Function.instance">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">instance</span></span><a class="headerlink" href="#pytest.Function.instance" title="Link to this definition">¶</a></dt>
<dd><p>Python instance object the function is bound to.</p>
<p>Returns None if not a test method, e.g. for a standalone test function,
a class or a module.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Function.runtest">
<span class="sig-name descname"><span class="pre">runtest</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/python.html#Function.runtest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Function.runtest" title="Link to this definition">¶</a></dt>
<dd><p>Execute the underlying test function.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Function.repr_failure">
<span class="sig-name descname"><span class="pre">repr_failure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">excinfo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/python.html#Function.repr_failure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Function.repr_failure" title="Link to this definition">¶</a></dt>
<dd><p>Return a representation of a collection or test failure.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../example/nonpython.html#non-python-tests"><span class="std std-ref">使用非 Python 测试</span></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>excinfo</strong> (<a class="reference internal" href="#pytest.ExceptionInfo" title="_pytest._code.code.ExceptionInfo"><em>ExceptionInfo</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><em>BaseException</em></a><em>]</em>) – Exception information for the failure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Function.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.Function.name" title="Link to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Function.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#pytest.Function.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Function.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="pytest.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.Function.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Function.session">
<span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="pytest.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.Function.session" title="Link to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Function.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.Function.path" title="Link to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

</dd></dl>

</section>
<section id="functiondefinition">
<h3>FunctionDefinition<a class="headerlink" href="#functiondefinition" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.python.FunctionDefinition">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FunctionDefinition</span></span><a class="reference internal" href="../_modules/_pytest/python.html#FunctionDefinition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.python.FunctionDefinition" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.Function" title="_pytest.python.Function"><code class="xref py py-class docutils literal notranslate"><span class="pre">Function</span></code></a></p>
<p>This class is a stop gap solution until we evolve to have actual function
definition nodes and manage to get rid of <code class="docutils literal notranslate"><span class="pre">metafunc</span></code>.</p>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.python.FunctionDefinition.runtest">
<span class="sig-name descname"><span class="pre">runtest</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/python.html#FunctionDefinition.runtest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.python.FunctionDefinition.runtest" title="Link to this definition">¶</a></dt>
<dd><p>Execute the underlying test function.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.python.FunctionDefinition.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.python.FunctionDefinition.name" title="Link to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.python.FunctionDefinition.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#pytest.python.FunctionDefinition.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.python.FunctionDefinition.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="pytest.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.python.FunctionDefinition.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.python.FunctionDefinition.session">
<span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="pytest.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.python.FunctionDefinition.session" title="Link to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.python.FunctionDefinition.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.python.FunctionDefinition.path" title="Link to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.python.FunctionDefinition.setup">
<span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.python.FunctionDefinition.setup" title="Link to this definition">¶</a></dt>
<dd><p>Execute the underlying test function.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="id245">
<h2>对象<a class="headerlink" href="#id245" title="Link to this heading">¶</a></h2>
<p><strong>Objects</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-27-27-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-27-27-0" name="27-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-27-27-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-27-27-1" name="27-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-27-27-0" class="sphinx-tabs-panel" id="panel-27-27-0" name="27-0" role="tabpanel" tabindex="0"><p>可从 <a class="reference internal" href="fixtures.html#fixture"><span class="std std-ref">fixtures</span></a> 或 <a class="reference internal" href="#hook-reference"><span class="std std-ref">hooks</span></a> 访问或从 <code class="docutils literal notranslate"><span class="pre">pytest</span></code> 导入的对象。</p>
</div><div aria-labelledby="tab-27-27-1" class="sphinx-tabs-panel" hidden="true" id="panel-27-27-1" name="27-1" role="tabpanel" tabindex="0"><p>Objects accessible from <a class="reference internal" href="fixtures.html#fixture"><span class="std std-ref">fixtures</span></a> or <a class="reference internal" href="#hook-reference"><span class="std std-ref">hooks</span></a> or importable from <code class="docutils literal notranslate"><span class="pre">pytest</span></code>.</p>
</div></div>
<section id="callinfo">
<h3>CallInfo<a class="headerlink" href="#callinfo" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.CallInfo">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CallInfo</span></span><a class="reference internal" href="../_modules/_pytest/runner.html#CallInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.CallInfo" title="Link to this definition">¶</a></dt>
<dd><p>Result/Exception info of a function invocation.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.CallInfo.excinfo">
<span class="sig-name descname"><span class="pre">excinfo</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.ExceptionInfo" title="_pytest._code.code.ExceptionInfo"><span class="pre">ExceptionInfo</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><span class="pre">BaseException</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><a class="headerlink" href="#pytest.CallInfo.excinfo" title="Link to this definition">¶</a></dt>
<dd><p>The captured exception of the call, if it raised.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.CallInfo.start">
<span class="sig-name descname"><span class="pre">start</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></em><a class="headerlink" href="#pytest.CallInfo.start" title="Link to this definition">¶</a></dt>
<dd><p>The system time when the call started, in seconds since the epoch.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.CallInfo.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></em><a class="headerlink" href="#pytest.CallInfo.stop" title="Link to this definition">¶</a></dt>
<dd><p>The system time when the call ended, in seconds since the epoch.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.CallInfo.duration">
<span class="sig-name descname"><span class="pre">duration</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></em><a class="headerlink" href="#pytest.CallInfo.duration" title="Link to this definition">¶</a></dt>
<dd><p>The call duration, in seconds.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.CallInfo.when">
<span class="sig-name descname"><span class="pre">when</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'collect'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'setup'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'call'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'teardown'</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.CallInfo.when" title="Link to this definition">¶</a></dt>
<dd><p>The context of invocation: “collect”, “setup”, “call” or “teardown”.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.CallInfo.result">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">result</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">TResult</span></em><a class="headerlink" href="#pytest.CallInfo.result" title="Link to this definition">¶</a></dt>
<dd><p>The return value of the call, if it didn’t raise.</p>
<p>Can only be accessed if excinfo is None.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.CallInfo.from_call">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">when</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reraise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/runner.html#CallInfo.from_call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.CallInfo.from_call" title="Link to this definition">¶</a></dt>
<dd><p>Call func, wrapping the result in a CallInfo.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>Callable</em><em>[</em><em>[</em><em>]</em><em>, </em><em>_pytest.runner.TResult</em><em>]</em>) – The function to call. Called without arguments.</p></li>
<li><p><strong>when</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><em>Literal</em></a><em>[</em><em>'collect'</em><em>, </em><em>'setup'</em><em>, </em><em>'call'</em><em>, </em><em>'teardown'</em><em>]</em>) – The phase in which the function is called.</p></li>
<li><p><strong>reraise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><em>type</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><em>BaseException</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><em>type</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><em>BaseException</em></a><em>]</em><em>, </em><em>...</em><em>] </em><em>| </em><em>None</em>) – Exception or exceptions that shall propagate if raised by the
function, instead of being wrapped in the CallInfo.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="collectreport">
<h3>CollectReport<a class="headerlink" href="#collectreport" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.CollectReport">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CollectReport</span></span><a class="reference internal" href="../_modules/_pytest/reports.html#CollectReport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.CollectReport" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseReport</span></code></p>
<p>Collection report object.</p>
<p>Reports can contain arbitrary extra attributes.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.CollectReport.nodeid">
<span class="sig-name descname"><span class="pre">nodeid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.CollectReport.nodeid" title="Link to this definition">¶</a></dt>
<dd><p>Normalized collection nodeid.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.CollectReport.outcome">
<span class="sig-name descname"><span class="pre">outcome</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'passed'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'failed'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'skipped'</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.CollectReport.outcome" title="Link to this definition">¶</a></dt>
<dd><p>Test outcome, always one of “passed”, “failed”, “skipped”.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.CollectReport.longrepr">
<span class="sig-name descname"><span class="pre">longrepr</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#pytest.ExceptionInfo" title="_pytest._code.code.ExceptionInfo"><span class="pre">ExceptionInfo</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><span class="pre">BaseException</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">TerminalRepr</span></em><a class="headerlink" href="#pytest.CollectReport.longrepr" title="Link to this definition">¶</a></dt>
<dd><p>None or a failure representation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.CollectReport.result">
<span class="sig-name descname"><span class="pre">result</span></span><a class="headerlink" href="#pytest.CollectReport.result" title="Link to this definition">¶</a></dt>
<dd><p>The collected items and collection nodes.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.CollectReport.sections">
<span class="sig-name descname"><span class="pre">sections</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.CollectReport.sections" title="Link to this definition">¶</a></dt>
<dd><p>Tuples of str <code class="docutils literal notranslate"><span class="pre">(heading,</span> <span class="pre">content)</span></code> with extra information
for the test report. Used by pytest to add text captured
from <code class="docutils literal notranslate"><span class="pre">stdout</span></code>, <code class="docutils literal notranslate"><span class="pre">stderr</span></code>, and intercepted logging events. May
be used by other plugins to add arbitrary information to reports.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.CollectReport.caplog">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">caplog</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.CollectReport.caplog" title="Link to this definition">¶</a></dt>
<dd><p>Return captured log lines, if log capturing is enabled.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.5.</span></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.CollectReport.capstderr">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">capstderr</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.CollectReport.capstderr" title="Link to this definition">¶</a></dt>
<dd><p>Return captured text from stderr, if capturing is enabled.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.CollectReport.capstdout">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">capstdout</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.CollectReport.capstdout" title="Link to this definition">¶</a></dt>
<dd><p>Return captured text from stdout, if capturing is enabled.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.CollectReport.count_towards_summary">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">count_towards_summary</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="#pytest.CollectReport.count_towards_summary" title="Link to this definition">¶</a></dt>
<dd><p><strong>Experimental</strong> Whether this report should be counted towards the
totals shown at the end of the test session: “1 passed, 1 failure, etc”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is considered <strong>experimental</strong>, so beware that it is subject to changes
even in patch releases.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.CollectReport.failed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">failed</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="#pytest.CollectReport.failed" title="Link to this definition">¶</a></dt>
<dd><p>Whether the outcome is failed.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.CollectReport.fspath">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fspath</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.CollectReport.fspath" title="Link to this definition">¶</a></dt>
<dd><p>The path portion of the reported node, as a string.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.CollectReport.head_line">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">head_line</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><a class="headerlink" href="#pytest.CollectReport.head_line" title="Link to this definition">¶</a></dt>
<dd><p><strong>Experimental</strong> The head line shown with longrepr output for this
report, more commonly during traceback representation during
failures:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">________</span> <span class="n">Test</span><span class="o">.</span><span class="n">foo</span> <span class="n">________</span>
</pre></div>
</div>
<p>In the example above, the head_line is “Test.foo”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is considered <strong>experimental</strong>, so beware that it is subject to changes
even in patch releases.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.CollectReport.longreprtext">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">longreprtext</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.CollectReport.longreprtext" title="Link to this definition">¶</a></dt>
<dd><p>Read-only property that returns the full string representation of
<code class="docutils literal notranslate"><span class="pre">longrepr</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.CollectReport.passed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">passed</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="#pytest.CollectReport.passed" title="Link to this definition">¶</a></dt>
<dd><p>Whether the outcome is passed.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.CollectReport.skipped">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">skipped</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="#pytest.CollectReport.skipped" title="Link to this definition">¶</a></dt>
<dd><p>Whether the outcome is skipped.</p>
</dd></dl>

</dd></dl>

</section>
<section id="config">
<h3>Config<a class="headerlink" href="#config" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Config">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Config</span></span><a class="reference internal" href="../_modules/_pytest/config.html#Config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config" title="Link to this definition">¶</a></dt>
<dd><p>Access to configuration values, pluginmanager and plugin hooks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pluginmanager</strong> (<a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>PytestPluginManager</em></a>) – A pytest PluginManager.</p></li>
<li><p><strong>invocation_params</strong> (<a class="reference internal" href="#pytest.Config.InvocationParams" title="pytest.Config.InvocationParams"><em>InvocationParams</em></a>) – Object containing parameters regarding the <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a>
invocation.</p></li>
</ul>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Config.InvocationParams">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">InvocationParams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plugins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#Config.InvocationParams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.InvocationParams" title="Link to this definition">¶</a></dt>
<dd><p>Holds parameters passed during <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a>.</p>
<p>The object attributes are read-only.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.1.</span></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that the environment variable <code class="docutils literal notranslate"><span class="pre">PYTEST_ADDOPTS</span></code> and the <code class="docutils literal notranslate"><span class="pre">addopts</span></code>
ini option are handled by pytest, not being included in the <code class="docutils literal notranslate"><span class="pre">args</span></code> attribute.</p>
<p>Plugins accessing <code class="docutils literal notranslate"><span class="pre">InvocationParams</span></code> must be aware of that.</p>
</div>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Config.InvocationParams.args">
<span class="sig-name descname"><span class="pre">args</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.Config.InvocationParams.args" title="Link to this definition">¶</a></dt>
<dd><p>The command-line arguments as passed to <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Config.InvocationParams.plugins">
<span class="sig-name descname"><span class="pre">plugins</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><span class="pre">object</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><a class="headerlink" href="#pytest.Config.InvocationParams.plugins" title="Link to this definition">¶</a></dt>
<dd><p>Extra plugins, might be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Config.InvocationParams.dir">
<span class="sig-name descname"><span class="pre">dir</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></em><a class="headerlink" href="#pytest.Config.InvocationParams.dir" title="Link to this definition">¶</a></dt>
<dd><p>The directory from which <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a> was invoked. :type: pathlib.Path</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.Config.ArgsSource">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ArgsSource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qualname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#Config.ArgsSource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.ArgsSource" title="Link to this definition">¶</a></dt>
<dd><p>Indicates the source of the test arguments.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 7.2.</span></p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Config.ArgsSource.ARGS">
<span class="sig-name descname"><span class="pre">ARGS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#pytest.Config.ArgsSource.ARGS" title="Link to this definition">¶</a></dt>
<dd><p>Command line arguments.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Config.ArgsSource.INVOCATION_DIR">
<span class="sig-name descname"><span class="pre">INVOCATION_DIR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#pytest.Config.ArgsSource.INVOCATION_DIR" title="Link to this definition">¶</a></dt>
<dd><p>Invocation directory.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Config.ArgsSource.TESTPATHS">
<span class="sig-name descname"><span class="pre">TESTPATHS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#pytest.Config.ArgsSource.TESTPATHS" title="Link to this definition">¶</a></dt>
<dd><p>‘testpaths’ configuration value.</p>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Config.option">
<span class="sig-name descname"><span class="pre">option</span></span><a class="headerlink" href="#pytest.Config.option" title="Link to this definition">¶</a></dt>
<dd><p>Access to command line option as attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.Namespace" title="(in Python v3.13)">argparse.Namespace</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Config.invocation_params">
<span class="sig-name descname"><span class="pre">invocation_params</span></span><a class="headerlink" href="#pytest.Config.invocation_params" title="Link to this definition">¶</a></dt>
<dd><p>The parameters with which pytest was invoked.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.Config.InvocationParams" title="pytest.Config.InvocationParams">InvocationParams</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Config.pluginmanager">
<span class="sig-name descname"><span class="pre">pluginmanager</span></span><a class="headerlink" href="#pytest.Config.pluginmanager" title="Link to this definition">¶</a></dt>
<dd><p>The plugin manager handles plugin registration and hook invocation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.PytestPluginManager" title="pytest.PytestPluginManager">PytestPluginManager</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Config.stash">
<span class="sig-name descname"><span class="pre">stash</span></span><a class="headerlink" href="#pytest.Config.stash" title="Link to this definition">¶</a></dt>
<dd><p>A place where plugins can store information on the config for their
own use.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.Stash" title="pytest.Stash">Stash</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.Config.rootpath">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rootpath</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a></em><a class="headerlink" href="#pytest.Config.rootpath" title="Link to this definition">¶</a></dt>
<dd><p>The path to the <a class="reference internal" href="customize.html#rootdir"><span class="std std-ref">rootdir</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)">pathlib.Path</a></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 6.1.</span></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.Config.inipath">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">inipath</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">Path</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><a class="headerlink" href="#pytest.Config.inipath" title="Link to this definition">¶</a></dt>
<dd><p>The path to the <a class="reference internal" href="customize.html#configfiles"><span class="std std-ref">configfile</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 6.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Config.add_cleanup">
<span class="sig-name descname"><span class="pre">add_cleanup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#Config.add_cleanup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.add_cleanup" title="Link to this definition">¶</a></dt>
<dd><p>Add a function to be called when the config object gets out of
use (usually coinciding with pytest_unconfigure).</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Config.fromdictargs">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromdictargs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#Config.fromdictargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.fromdictargs" title="Link to this definition">¶</a></dt>
<dd><p>Constructor usable for subprocesses.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Config.issue_config_time_warning">
<span class="sig-name descname"><span class="pre">issue_config_time_warning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">warning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stacklevel</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#Config.issue_config_time_warning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.issue_config_time_warning" title="Link to this definition">¶</a></dt>
<dd><p>Issue and handle a warning during the “configure” stage.</p>
<p>During <code class="docutils literal notranslate"><span class="pre">pytest_configure</span></code> we can’t capture warnings using the <code class="docutils literal notranslate"><span class="pre">catch_warnings_for_item</span></code>
function because it is not possible to have hook wrappers around <code class="docutils literal notranslate"><span class="pre">pytest_configure</span></code>.</p>
<p>This function is mainly intended for plugins that need to issue warnings during
<code class="docutils literal notranslate"><span class="pre">pytest_configure</span></code> (or similar stages).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>warning</strong> (<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Warning" title="(in Python v3.13)"><em>Warning</em></a>) – The warning instance.</p></li>
<li><p><strong>stacklevel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – stacklevel forwarded to warnings.warn.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Config.addinivalue_line">
<span class="sig-name descname"><span class="pre">addinivalue_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#Config.addinivalue_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.addinivalue_line" title="Link to this definition">¶</a></dt>
<dd><p>Add a line to an ini-file option. The option must have been
declared but might not yet be set in which case the line becomes
the first line in its value.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Config.getini">
<span class="sig-name descname"><span class="pre">getini</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#Config.getini"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.getini" title="Link to this definition">¶</a></dt>
<dd><p>Return configuration value from an <a class="reference internal" href="customize.html#configfiles"><span class="std std-ref">ini file</span></a>.</p>
<p>If a configuration value is not defined in an
<a class="reference internal" href="customize.html#configfiles"><span class="std std-ref">ini file</span></a>, then the <code class="docutils literal notranslate"><span class="pre">default</span></code> value provided while
registering the configuration through
<a class="reference internal" href="#pytest.Parser.addini" title="pytest.Parser.addini"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addini</span></code></a> will be returned.
Please note that you can even provide <code class="docutils literal notranslate"><span class="pre">None</span></code> as a valid
default value.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">default</span></code> is not provided while registering using
<a class="reference internal" href="#pytest.Parser.addini" title="pytest.Parser.addini"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addini</span></code></a>, then a default value
based on the <code class="docutils literal notranslate"><span class="pre">type</span></code> parameter passed to
<a class="reference internal" href="#pytest.Parser.addini" title="pytest.Parser.addini"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addini</span></code></a> will be returned.
The default values based on <code class="docutils literal notranslate"><span class="pre">type</span></code> are:
<code class="docutils literal notranslate"><span class="pre">paths</span></code>, <code class="docutils literal notranslate"><span class="pre">pathlist</span></code>, <code class="docutils literal notranslate"><span class="pre">args</span></code> and <code class="docutils literal notranslate"><span class="pre">linelist</span></code> : empty list <code class="docutils literal notranslate"><span class="pre">[]</span></code>
<code class="docutils literal notranslate"><span class="pre">bool</span></code> : <code class="docutils literal notranslate"><span class="pre">False</span></code>
<code class="docutils literal notranslate"><span class="pre">string</span></code> : empty string <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code></p>
<p>If neither the <code class="docutils literal notranslate"><span class="pre">default</span></code> nor the <code class="docutils literal notranslate"><span class="pre">type</span></code> parameter is passed
while registering the configuration through
<a class="reference internal" href="#pytest.Parser.addini" title="pytest.Parser.addini"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addini</span></code></a>, then the configuration
is treated as a string and a default empty string ‘’ is returned.</p>
<p>If the specified name hasn’t been registered through a prior
<a class="reference internal" href="#pytest.Parser.addini" title="pytest.Parser.addini"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addini</span></code></a> call (usually from a
plugin), a ValueError is raised.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Config.getoption">
<span class="sig-name descname"><span class="pre">getoption</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default=&lt;NOTSET&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#Config.getoption"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.getoption" title="Link to this definition">¶</a></dt>
<dd><p>Return command line option value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Name of the option. You may also specify
the literal <code class="docutils literal notranslate"><span class="pre">--OPT</span></code> option instead of the “dest” option name.</p></li>
<li><p><strong>default</strong> – Fallback value if no option of that name is <strong>declared</strong> via <a class="reference internal" href="#std:hook-3"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_addoption</span></code></a>.
Note this parameter will be ignored when the option is <strong>declared</strong> even if the option’s value is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>skip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, raise <a class="reference internal" href="#pytest.skip" title="pytest.skip"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.skip()</span></code></a> if option is undeclared or has a <code class="docutils literal notranslate"><span class="pre">None</span></code> value.
Note that even if <code class="docutils literal notranslate"><span class="pre">True</span></code>, if a default was specified it will be returned instead of a skip.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Config.getvalue">
<span class="sig-name descname"><span class="pre">getvalue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#Config.getvalue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.getvalue" title="Link to this definition">¶</a></dt>
<dd><p>Deprecated, use getoption() instead.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Config.getvalueorskip">
<span class="sig-name descname"><span class="pre">getvalueorskip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#Config.getvalueorskip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.getvalueorskip" title="Link to this definition">¶</a></dt>
<dd><p>Deprecated, use getoption(skip=True) instead.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Config.VERBOSITY_ASSERTIONS">
<span class="sig-name descname"><span class="pre">VERBOSITY_ASSERTIONS</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Final</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'assertions'</span></em><a class="headerlink" href="#pytest.Config.VERBOSITY_ASSERTIONS" title="Link to this definition">¶</a></dt>
<dd><p>Verbosity type for failed assertions (see <a class="reference internal" href="#confval-41"><code class="xref std std-confval docutils literal notranslate"><span class="pre">verbosity_assertions</span></code></a>).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Config.VERBOSITY_TEST_CASES">
<span class="sig-name descname"><span class="pre">VERBOSITY_TEST_CASES</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Final</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'test_cases'</span></em><a class="headerlink" href="#pytest.Config.VERBOSITY_TEST_CASES" title="Link to this definition">¶</a></dt>
<dd><p>Verbosity type for test case execution (see <a class="reference internal" href="#confval-42"><code class="xref std std-confval docutils literal notranslate"><span class="pre">verbosity_test_cases</span></code></a>).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Config.get_verbosity">
<span class="sig-name descname"><span class="pre">get_verbosity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbosity_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#Config.get_verbosity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.get_verbosity" title="Link to this definition">¶</a></dt>
<dd><p>Retrieve the verbosity level for a fine-grained verbosity type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>verbosity_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – Verbosity type to get level for. If a level is
configured for the given type, that value will be returned. If the
given type is not a known verbosity type, the global verbosity
level will be returned. If the given type is None (default), the
global verbosity level will be returned.</p>
</dd>
</dl>
<p>To configure a level for a fine-grained verbosity type, the
configuration file should have a setting for the configuration name
and a numeric value for the verbosity level. A special value of “auto”
can be used to explicitly use the global verbosity level.</p>
<p>Example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">verbosity_assertions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pytest -v</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_verbosity</span><span class="p">())</span>  <span class="c1"># 1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_verbosity</span><span class="p">(</span><span class="n">Config</span><span class="o">.</span><span class="n">VERBOSITY_ASSERTIONS</span><span class="p">))</span>  <span class="c1"># 2</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="dir">
<h3>Dir<a class="headerlink" href="#dir" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Dir">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Dir</span></span><a class="reference internal" href="../_modules/_pytest/main.html#Dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Dir" title="Link to this definition">¶</a></dt>
<dd><p>Collector of files in a file system directory.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 8.0.</span></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Python directories with an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file are instead collected by
<a class="reference internal" href="#pytest.Package" title="pytest.Package"><code class="xref py py-class docutils literal notranslate"><span class="pre">Package</span></code></a> by default. Both are <a class="reference internal" href="#pytest.Directory" title="pytest.Directory"><code class="xref py py-class docutils literal notranslate"><span class="pre">Directory</span></code></a>
collectors.</p>
</div>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.Dir.from_parent">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_parent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/main.html#Dir.from_parent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Dir.from_parent" title="Link to this definition">¶</a></dt>
<dd><p>The public constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> (<a class="reference internal" href="#pytest.Collector" title="_pytest.nodes.Collector"><em>nodes.Collector</em></a>) – The parent collector of this Dir.</p></li>
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><em>pathlib.Path</em></a>) – The directory’s path.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Dir.collect">
<em class="property"><span class="pre">for</span> <span class="pre">...</span> <span class="pre">in</span> </em><span class="sig-name descname"><span class="pre">collect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/main.html#Dir.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Dir.collect" title="Link to this definition">¶</a></dt>
<dd><p>Collect children (items and collectors) for this collector.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Dir.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.Dir.name" title="Link to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Dir.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#pytest.Dir.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Dir.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="pytest.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.Dir.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Dir.session">
<span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="pytest.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.Dir.session" title="Link to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Dir.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.Dir.path" title="Link to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

</dd></dl>

</section>
<section id="directory">
<h3>Directory<a class="headerlink" href="#directory" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Directory">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Directory</span></span><a class="reference internal" href="../_modules/_pytest/nodes.html#Directory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Directory" title="Link to this definition">¶</a></dt>
<dd><p>Base class for collecting files from a directory.</p>
<p>A basic directory collector does the following: goes over the files and
sub-directories in the directory and creates collectors for them by calling
the hooks <a class="reference internal" href="#std:hook-12"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_collect_directory</span></code></a> and <a class="reference internal" href="#std:hook-13"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_collect_file</span></code></a>,
after checking that they are not ignored using
<a class="reference internal" href="#std:hook-11"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_ignore_collect</span></code></a>.</p>
<p>The default directory collectors are <a class="reference internal" href="#pytest.Dir" title="pytest.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> and
<a class="reference internal" href="#pytest.Package" title="pytest.Package"><code class="xref py py-class docutils literal notranslate"><span class="pre">Package</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 8.0.</span></p>
</div>
<p><a class="reference internal" href="../example/customdirectory.html#custom-directory-collectors"><span class="std std-ref">使用自定义目录收集器</span></a>.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Directory.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.Directory.name" title="Link to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Directory.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#pytest.Directory.parent" title="Link to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Directory.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Config" title="pytest.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#pytest.Directory.config" title="Link to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Directory.session">
<span class="sig-name descname"><span class="pre">session</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pytest.Session" title="pytest.Session"><span class="pre">Session</span></a></em><a class="headerlink" href="#pytest.Directory.session" title="Link to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Directory.path">
<span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.Directory.path" title="Link to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

</dd></dl>

</section>
<section id="exceptioninfo">
<h3>ExceptionInfo<a class="headerlink" href="#exceptioninfo" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.ExceptionInfo">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ExceptionInfo</span></span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo" title="Link to this definition">¶</a></dt>
<dd><p>Wraps sys.exc_info() objects and offers help for navigating the traceback.</p>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.from_exception">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_exception</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exception</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exprinfo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.from_exception"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.from_exception" title="Link to this definition">¶</a></dt>
<dd><p>Return an ExceptionInfo for an existing exception.</p>
<p>The exception must have a non-<code class="docutils literal notranslate"><span class="pre">None</span></code> <code class="docutils literal notranslate"><span class="pre">__traceback__</span></code> attribute,
otherwise this function fails with an assertion error. This means that
the exception must have been raised, or added a traceback with the
<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException.with_traceback" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">with_traceback()</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>exprinfo</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – A text string helping to determine if we should strip
<code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> from the output. Defaults to the exception
message/<code class="docutils literal notranslate"><span class="pre">__str__()</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 7.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.from_exc_info">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_exc_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc_info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exprinfo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.from_exc_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.from_exc_info" title="Link to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#pytest.ExceptionInfo.from_exception" title="pytest.ExceptionInfo.from_exception"><code class="xref py py-func docutils literal notranslate"><span class="pre">from_exception()</span></code></a>, but using old-style exc_info tuple.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.from_current">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exprinfo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.from_current"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.from_current" title="Link to this definition">¶</a></dt>
<dd><p>Return an ExceptionInfo matching the current traceback.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Experimental API</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>exprinfo</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – A text string helping to determine if we should strip
<code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> from the output. Defaults to the exception
message/<code class="docutils literal notranslate"><span class="pre">__str__()</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.for_later">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">for_later</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.for_later"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.for_later" title="Link to this definition">¶</a></dt>
<dd><p>Return an unfilled ExceptionInfo.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.fill_unfilled">
<span class="sig-name descname"><span class="pre">fill_unfilled</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc_info</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.fill_unfilled"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.fill_unfilled" title="Link to this definition">¶</a></dt>
<dd><p>Fill an unfilled ExceptionInfo created with <code class="docutils literal notranslate"><span class="pre">for_later()</span></code>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.type">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><span class="pre">type</span></a><span class="p"><span class="pre">[</span></span><span class="pre">E</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.ExceptionInfo.type" title="Link to this definition">¶</a></dt>
<dd><p>The exception class.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">E</span></em><a class="headerlink" href="#pytest.ExceptionInfo.value" title="Link to this definition">¶</a></dt>
<dd><p>The exception value.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.tb">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tb</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/types.html#types.TracebackType" title="(in Python v3.13)"><span class="pre">TracebackType</span></a></em><a class="headerlink" href="#pytest.ExceptionInfo.tb" title="Link to this definition">¶</a></dt>
<dd><p>The exception raw traceback.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.typename">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">typename</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.ExceptionInfo.typename" title="Link to this definition">¶</a></dt>
<dd><p>The type name of the exception.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.traceback">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">traceback</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Traceback</span></em><a class="headerlink" href="#pytest.ExceptionInfo.traceback" title="Link to this definition">¶</a></dt>
<dd><p>The traceback.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.exconly">
<span class="sig-name descname"><span class="pre">exconly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tryshort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.exconly"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.exconly" title="Link to this definition">¶</a></dt>
<dd><p>Return the exception as a string.</p>
<p>When ‘tryshort’ resolves to True, and the exception is an
AssertionError, only the actual exception part of the exception
representation is returned (so ‘AssertionError: ‘ is removed from
the beginning).</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.errisinstance">
<span class="sig-name descname"><span class="pre">errisinstance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.errisinstance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.errisinstance" title="Link to this definition">¶</a></dt>
<dd><p>Return True if the exception is an instance of exc.</p>
<p>Consider using <code class="docutils literal notranslate"><span class="pre">isinstance(excinfo.value,</span> <span class="pre">exc)</span></code> instead.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.getrepr">
<span class="sig-name descname"><span class="pre">getrepr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">showlocals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'long'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abspath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tbfilter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funcargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truncate_locals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truncate_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.getrepr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.getrepr" title="Link to this definition">¶</a></dt>
<dd><p>Return str()able representation of this exception info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>showlocals</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Show locals per traceback entry.
Ignored if <code class="docutils literal notranslate"><span class="pre">style==&quot;native&quot;</span></code>.</p></li>
<li><p><strong>style</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – long|short|line|no|native|value traceback style.</p></li>
<li><p><strong>abspath</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If paths should be changed to absolute or left unchanged.</p></li>
<li><p><strong>tbfilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="#pytest.ExceptionInfo" title="_pytest._code.code.ExceptionInfo"><em>ExceptionInfo</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><em>BaseException</em></a><em>]</em><em>]</em><em>, </em><em>Traceback</em><em>]</em>) – <p>A filter for traceback entries.</p>
<ul>
<li><p>If false, don’t hide any entries.</p></li>
<li><p>If true, hide internal entries and entries that contain a local
variable <code class="docutils literal notranslate"><span class="pre">__tracebackhide__</span> <span class="pre">=</span> <span class="pre">True</span></code>.</p></li>
<li><p>If a callable, delegates the filtering to the callable.</p></li>
</ul>
<p>Ignored if <code class="docutils literal notranslate"><span class="pre">style</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;native&quot;</span></code>.</p>
</p></li>
<li><p><strong>funcargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Show fixtures (“funcargs” for legacy purposes) per traceback entry.</p></li>
<li><p><strong>truncate_locals</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – With <code class="docutils literal notranslate"><span class="pre">showlocals==True</span></code>, make sure locals can be safely represented as strings.</p></li>
<li><p><strong>truncate_args</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – With <code class="docutils literal notranslate"><span class="pre">showargs==True</span></code>, make sure args can be safely represented as strings.</p></li>
<li><p><strong>chain</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If chained exceptions in Python 3 should be shown.</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.9: </span>Added the <code class="docutils literal notranslate"><span class="pre">chain</span></code> parameter.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.match">
<span class="sig-name descname"><span class="pre">match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regexp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.match"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.match" title="Link to this definition">¶</a></dt>
<dd><p>Check whether the regular expression <code class="docutils literal notranslate"><span class="pre">regexp</span></code> matches the string
representation of the exception using <a class="reference external" href="https://docs.python.org/3/library/re.html#re.search" title="(in Python v3.13)"><code class="docutils literal notranslate"><span class="pre">re.search()</span></code></a>.</p>
<p>If it matches <code class="docutils literal notranslate"><span class="pre">True</span></code> is returned, otherwise an <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> is raised.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.ExceptionInfo.group_contains">
<span class="sig-name descname"><span class="pre">group_contains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_exception</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.group_contains"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.group_contains" title="Link to this definition">¶</a></dt>
<dd><p>Check whether a captured exception group contains a matching exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expected_exception</strong> (<em>Type</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><em>BaseException</em></a><em>] </em><em>| </em><em>Tuple</em><em>[</em><em>Type</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><em>BaseException</em></a><em>]</em><em>]</em>) – The expected exception type, or a tuple if one of multiple possible
exception types are expected.</p></li>
<li><p><strong>match</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>Pattern</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>] </em><em>| </em><em>None</em>) – <p>If specified, a string containing a regular expression,
or a regular expression object, that is tested against the string
representation of the exception and its <code class="docutils literal notranslate"><span class="pre">PEP-678</span> <span class="pre">&lt;https://peps.python.org/pep-0678/&gt;</span></code> <code class="docutils literal notranslate"><span class="pre">__notes__</span></code>
using <a class="reference external" href="https://docs.python.org/3/library/re.html#re.search" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.search()</span></code></a>.</p>
<p>To match a literal string that may contain <a class="reference external" href="https://docs.python.org/3/library/re.html#re-syntax" title="(in Python v3.13)"><span class="xref std std-ref">special characters</span></a>, the pattern can first be escaped with <a class="reference external" href="https://docs.python.org/3/library/re.html#re.escape" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.escape()</span></code></a>.</p>
</p></li>
<li><p><strong>depth</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>]</em>) – If <code class="docutils literal notranslate"><span class="pre">None</span></code>, will search for a matching exception at any nesting depth.
If &gt;= 1, will only match an exception if it’s at the specified depth (depth = 1 being
the exceptions contained within the topmost exception group).</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 8.0.</span></p>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="exitcode">
<h3>ExitCode<a class="headerlink" href="#exitcode" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.ExitCode">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ExitCode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qualname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#ExitCode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExitCode" title="Link to this definition">¶</a></dt>
<dd><p>Encodes the valid exit codes by pytest.</p>
<p>Currently users and plugins may supply other exit codes as well.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.0.</span></p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.ExitCode.OK">
<span class="sig-name descname"><span class="pre">OK</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#pytest.ExitCode.OK" title="Link to this definition">¶</a></dt>
<dd><p>Tests passed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.ExitCode.TESTS_FAILED">
<span class="sig-name descname"><span class="pre">TESTS_FAILED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#pytest.ExitCode.TESTS_FAILED" title="Link to this definition">¶</a></dt>
<dd><p>Tests failed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.ExitCode.INTERRUPTED">
<span class="sig-name descname"><span class="pre">INTERRUPTED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#pytest.ExitCode.INTERRUPTED" title="Link to this definition">¶</a></dt>
<dd><p>pytest was interrupted.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.ExitCode.INTERNAL_ERROR">
<span class="sig-name descname"><span class="pre">INTERNAL_ERROR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#pytest.ExitCode.INTERNAL_ERROR" title="Link to this definition">¶</a></dt>
<dd><p>An internal error got in the way.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.ExitCode.USAGE_ERROR">
<span class="sig-name descname"><span class="pre">USAGE_ERROR</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></em><a class="headerlink" href="#pytest.ExitCode.USAGE_ERROR" title="Link to this definition">¶</a></dt>
<dd><p>pytest was misused.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.ExitCode.NO_TESTS_COLLECTED">
<span class="sig-name descname"><span class="pre">NO_TESTS_COLLECTED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5</span></em><a class="headerlink" href="#pytest.ExitCode.NO_TESTS_COLLECTED" title="Link to this definition">¶</a></dt>
<dd><p>pytest couldn’t find tests.</p>
</dd></dl>

</dd></dl>

</section>
<section id="fixturedef">
<h3>FixtureDef<a class="headerlink" href="#fixturedef" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.FixtureDef">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FixtureDef</span></span><a class="reference internal" href="../_modules/_pytest/fixtures.html#FixtureDef"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.FixtureDef" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generic" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generic</span></code></a>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">FixtureValue</span></code>]</p>
<p>A container for a fixture definition.</p>
<p>Note: At this time, only explicitly documented fields and methods are
considered public stable API.</p>
<dl class="field-list simple">
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="pytest.FixtureDef.scope">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scope</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'session'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'package'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'module'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'class'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'function'</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.FixtureDef.scope" title="Link to this definition">¶</a></dt>
<dd><p>Scope string, one of “function”, “class”, “module”, “package”, “session”.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.FixtureDef.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/fixtures.html#FixtureDef.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.FixtureDef.execute" title="Link to this definition">¶</a></dt>
<dd><p>Return the value of this fixture, executing it if not cached.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="markdecorator">
<h3>MarkDecorator<a class="headerlink" href="#markdecorator" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.MarkDecorator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MarkDecorator</span></span><a class="reference internal" href="../_modules/_pytest/mark/structures.html#MarkDecorator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MarkDecorator" title="Link to this definition">¶</a></dt>
<dd><p>A decorator for applying a mark on test functions and classes.</p>
<p><code class="docutils literal notranslate"><span class="pre">MarkDecorators</span></code> are created with <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mark1</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">NAME</span>  <span class="c1"># Simple MarkDecorator</span>
<span class="n">mark2</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">NAME</span><span class="p">(</span><span class="n">name1</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># Parametrized MarkDecorator</span>
</pre></div>
</div>
<p>and can then be applied as decorators to test functions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@mark2</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>When a <code class="docutils literal notranslate"><span class="pre">MarkDecorator</span></code> is called, it does the following:</p>
<ol class="arabic simple">
<li><p>If called with a single class as its only positional argument and no
additional keyword arguments, it attaches the mark to the class so it
gets applied automatically to all test cases found in that class.</p></li>
<li><p>If called with a single function as its only positional argument and
no additional keyword arguments, it attaches the mark to the function,
containing all the arguments already stored internally in the
<code class="docutils literal notranslate"><span class="pre">MarkDecorator</span></code>.</p></li>
<li><p>When called in any other case, it returns a new <code class="docutils literal notranslate"><span class="pre">MarkDecorator</span></code>
instance with the original <code class="docutils literal notranslate"><span class="pre">MarkDecorator</span></code>’s content updated with
the arguments passed to this call.</p></li>
</ol>
<p>Note: The rules above prevent a <code class="docutils literal notranslate"><span class="pre">MarkDecorator</span></code> from storing only a
single function or class reference as its positional argument with no
additional keyword or positional arguments. You can work around this by
using <code class="docutils literal notranslate"><span class="pre">with_args()</span></code>.</p>
<dl class="field-list simple">
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="pytest.MarkDecorator.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.MarkDecorator.name" title="Link to this definition">¶</a></dt>
<dd><p>Alias for mark.name.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.MarkDecorator.args">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">args</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.MarkDecorator.args" title="Link to this definition">¶</a></dt>
<dd><p>Alias for mark.args.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.MarkDecorator.kwargs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">kwargs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.13)"><span class="pre">Mapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.MarkDecorator.kwargs" title="Link to this definition">¶</a></dt>
<dd><p>Alias for mark.kwargs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.MarkDecorator.with_args">
<span class="sig-name descname"><span class="pre">with_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/mark/structures.html#MarkDecorator.with_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MarkDecorator.with_args" title="Link to this definition">¶</a></dt>
<dd><p>Return a MarkDecorator with extra arguments added.</p>
<p>Unlike calling the MarkDecorator, with_args() can be used even
if the sole argument is a callable/class.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="markgenerator">
<h3>MarkGenerator<a class="headerlink" href="#markgenerator" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.MarkGenerator">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MarkGenerator</span></span><a class="reference internal" href="../_modules/_pytest/mark/structures.html#MarkGenerator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MarkGenerator" title="Link to this definition">¶</a></dt>
<dd><p>Factory for <a class="reference internal" href="#pytest.MarkDecorator" title="pytest.MarkDecorator"><code class="xref py py-class docutils literal notranslate"><span class="pre">MarkDecorator</span></code></a> objects - exposed as
a <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code> singleton instance.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">slowtest</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>applies a ‘slowtest’ <a class="reference internal" href="#pytest.Mark" title="pytest.Mark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mark</span></code></a> on <code class="docutils literal notranslate"><span class="pre">test_function</span></code>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</section>
<section id="mark">
<h3>Mark<a class="headerlink" href="#mark" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Mark">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Mark</span></span><a class="reference internal" href="../_modules/_pytest/mark/structures.html#Mark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Mark" title="Link to this definition">¶</a></dt>
<dd><p>A pytest mark.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Mark.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.Mark.name" title="Link to this definition">¶</a></dt>
<dd><p>Name of the mark.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Mark.args">
<span class="sig-name descname"><span class="pre">args</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.Mark.args" title="Link to this definition">¶</a></dt>
<dd><p>Positional arguments of the mark decorator.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Mark.kwargs">
<span class="sig-name descname"><span class="pre">kwargs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.13)"><span class="pre">Mapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.Mark.kwargs" title="Link to this definition">¶</a></dt>
<dd><p>Keyword arguments of the mark decorator.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Mark.combined_with">
<span class="sig-name descname"><span class="pre">combined_with</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/mark/structures.html#Mark.combined_with"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Mark.combined_with" title="Link to this definition">¶</a></dt>
<dd><p>Return a new Mark which is a combination of this
Mark and another Mark.</p>
<p>Combines by appending args and merging kwargs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#pytest.Mark" title="pytest.Mark"><em>Mark</em></a>) – The mark to combine with.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pytest.Mark" title="pytest.Mark">Mark</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="metafunc">
<h3>Metafunc<a class="headerlink" href="#metafunc" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Metafunc">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Metafunc</span></span><a class="reference internal" href="../_modules/_pytest/python.html#Metafunc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Metafunc" title="Link to this definition">¶</a></dt>
<dd><p>Objects passed to the <a class="reference internal" href="#std:hook-16"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_generate_tests</span></code></a> hook.</p>
<p>They help to inspect a test function and to generate tests according to
test configuration or values specified in the class or module where a
test function is defined.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Metafunc.definition">
<span class="sig-name descname"><span class="pre">definition</span></span><a class="headerlink" href="#pytest.Metafunc.definition" title="Link to this definition">¶</a></dt>
<dd><p>Access to the underlying <a class="reference internal" href="#pytest.python.FunctionDefinition" title="_pytest.python.FunctionDefinition"><code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.python.FunctionDefinition</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Metafunc.config">
<span class="sig-name descname"><span class="pre">config</span></span><a class="headerlink" href="#pytest.Metafunc.config" title="Link to this definition">¶</a></dt>
<dd><p>Access to the <a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Config</span></code></a> object for the test session.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Metafunc.module">
<span class="sig-name descname"><span class="pre">module</span></span><a class="headerlink" href="#pytest.Metafunc.module" title="Link to this definition">¶</a></dt>
<dd><p>The module object where the test function is defined in.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Metafunc.function">
<span class="sig-name descname"><span class="pre">function</span></span><a class="headerlink" href="#pytest.Metafunc.function" title="Link to this definition">¶</a></dt>
<dd><p>Underlying Python test function.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Metafunc.fixturenames">
<span class="sig-name descname"><span class="pre">fixturenames</span></span><a class="headerlink" href="#pytest.Metafunc.fixturenames" title="Link to this definition">¶</a></dt>
<dd><p>Set of fixture names required by the test function.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.Metafunc.cls">
<span class="sig-name descname"><span class="pre">cls</span></span><a class="headerlink" href="#pytest.Metafunc.cls" title="Link to this definition">¶</a></dt>
<dd><p>Class object where the test function is defined in or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Metafunc.parametrize">
<span class="sig-name descname"><span class="pre">parametrize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argnames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argvalues</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indirect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_param_mark</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/python.html#Metafunc.parametrize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Metafunc.parametrize" title="Link to this definition">¶</a></dt>
<dd><p>Add new invocations to the underlying test function using the list
of argvalues for the given argnames. Parametrization is performed
during the collection phase. If you need to setup expensive resources
see about setting indirect to do it rather than at test setup time.</p>
<p>Can be called multiple times per test function (but only on different
argument names), in which case each call parametrizes all previous
parametrizations, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unparametrized</span><span class="p">:</span>         <span class="n">t</span>
<span class="n">parametrize</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]:</span> <span class="n">t</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="n">y</span><span class="p">]</span>
<span class="n">parametrize</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>     <span class="n">t</span><span class="p">[</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="n">x</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="n">y</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>argnames</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – A comma-separated string denoting one or more argument names, or
a list/tuple of argument strings.</p></li>
<li><p><strong>argvalues</strong> (<em>Iterable</em><em>[</em><em>_pytest.mark.structures.ParameterSet</em><em> | </em><em>Sequence</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a><em>]</em>) – <p>The list of argvalues determines how often a test is invoked with
different argument values.</p>
<p>If only one argname was specified argvalues is a list of values.
If N argnames were specified, argvalues must be a list of
N-tuples, where each tuple-element specifies a value for its
respective argname.</p>
</p></li>
<li><p><strong>indirect</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – A list of arguments’ names (subset of argnames) or a boolean.
If True the list contains all names from the argnames. Each
argvalue corresponding to an argname in this list will
be passed as request.param to its respective argname fixture
function so that it can perform more expensive setups during the
setup phase of a test rather than at collection time.</p></li>
<li><p><strong>ids</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.13)"><em>Iterable</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a><em> | </em><em>None</em><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a><em> | </em><em>None</em><em>] </em><em>| </em><em>None</em>) – <p>Sequence of (or generator for) ids for <code class="docutils literal notranslate"><span class="pre">argvalues</span></code>,
or a callable to return part of the id for each argvalue.</p>
<p>With sequences (and generators like <code class="docutils literal notranslate"><span class="pre">itertools.count()</span></code>) the
returned ids should be of type <code class="docutils literal notranslate"><span class="pre">string</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>,
<code class="docutils literal notranslate"><span class="pre">bool</span></code>, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.
They are mapped to the corresponding index in <code class="docutils literal notranslate"><span class="pre">argvalues</span></code>.
<code class="docutils literal notranslate"><span class="pre">None</span></code> means to use the auto-generated id.</p>
<p>If it is a callable it will be called for each entry in
<code class="docutils literal notranslate"><span class="pre">argvalues</span></code>, and the return value is used as part of the
auto-generated id for the whole set (where parts are joined with
dashes (“-“)).
This is useful to provide more specific ids for certain items, e.g.
dates.  Returning <code class="docutils literal notranslate"><span class="pre">None</span></code> will use an auto-generated id.</p>
<p>If no ids are provided they will be generated automatically from
the argvalues.</p>
</p></li>
<li><p><strong>scope</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><em>Literal</em></a><em>[</em><em>'session'</em><em>, </em><em>'package'</em><em>, </em><em>'module'</em><em>, </em><em>'class'</em><em>, </em><em>'function'</em><em>] </em><em>| </em><em>None</em>) – If specified it denotes the scope of the parameters.
The scope is used for grouping tests by parameter instances.
It will also override any fixture-function defined scope, allowing
to set a dynamic scope using test context or configuration.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="parser">
<h3>Parser<a class="headerlink" href="#parser" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Parser">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Parser</span></span><a class="reference internal" href="../_modules/_pytest/config/argparsing.html#Parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Parser" title="Link to this definition">¶</a></dt>
<dd><p>Parser for command line arguments and ini-file values.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>extra_info</strong> – Dict of generic param -&gt; value to display in case
there’s an error processing the command line arguments.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.Parser.getgroup">
<span class="sig-name descname"><span class="pre">getgroup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config/argparsing.html#Parser.getgroup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Parser.getgroup" title="Link to this definition">¶</a></dt>
<dd><p>Get (or create) a named option Group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Name of the option group.</p></li>
<li><p><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Long description for –help output.</p></li>
<li><p><strong>after</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – Name of another group, used for ordering –help output.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The option group.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pytest.OptionGroup" title="_pytest.config.argparsing.OptionGroup"><em>OptionGroup</em></a></p>
</dd>
</dl>
<p>The returned group object has an <code class="docutils literal notranslate"><span class="pre">addoption</span></code> method with the same
signature as <a class="reference internal" href="#pytest.Parser.addoption" title="pytest.Parser.addoption"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addoption</span></code></a> but
will be shown in the respective group in the output of
<code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--help</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Parser.addoption">
<span class="sig-name descname"><span class="pre">addoption</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">opts</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config/argparsing.html#Parser.addoption"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Parser.addoption" title="Link to this definition">¶</a></dt>
<dd><p>Register a command line option.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opts</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Option names, can be short or long options.</p></li>
<li><p><strong>attrs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a>) – Same attributes as the argparse library’s <a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.add_argument" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_argument()</span></code></a> function accepts.</p></li>
</ul>
</dd>
</dl>
<p>After command line parsing, options are available on the pytest config
object via <code class="docutils literal notranslate"><span class="pre">config.option.NAME</span></code> where <code class="docutils literal notranslate"><span class="pre">NAME</span></code> is usually set
by passing a <code class="docutils literal notranslate"><span class="pre">dest</span></code> attribute, for example
<code class="docutils literal notranslate"><span class="pre">addoption(&quot;--long&quot;,</span> <span class="pre">dest=&quot;NAME&quot;,</span> <span class="pre">...)</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Parser.parse_known_args">
<span class="sig-name descname"><span class="pre">parse_known_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">namespace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config/argparsing.html#Parser.parse_known_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Parser.parse_known_args" title="Link to this definition">¶</a></dt>
<dd><p>Parse the known arguments at this point.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An argparse namespace object.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.Namespace" title="(in Python v3.13)"><em>Namespace</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Parser.parse_known_and_unknown_args">
<span class="sig-name descname"><span class="pre">parse_known_and_unknown_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">namespace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config/argparsing.html#Parser.parse_known_and_unknown_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Parser.parse_known_and_unknown_args" title="Link to this definition">¶</a></dt>
<dd><p>Parse the known arguments at this point, and also return the
remaining unknown arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A tuple containing an argparse namespace object for the known
arguments, and a list of the unknown arguments.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a>[<a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.Namespace" title="(in Python v3.13)"><em>Namespace</em></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Parser.addini">
<span class="sig-name descname"><span class="pre">addini</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default=&lt;notset&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config/argparsing.html#Parser.addini"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Parser.addini" title="Link to this definition">¶</a></dt>
<dd><p>Register an ini-file option.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Name of the ini-variable.</p></li>
<li><p><strong>type</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><em>Literal</em></a><em>[</em><em>'string'</em><em>, </em><em>'paths'</em><em>, </em><em>'pathlist'</em><em>, </em><em>'args'</em><em>, </em><em>'linelist'</em><em>, </em><em>'bool'</em><em>] </em><em>| </em><em>None</em>) – <p>Type of the variable. Can be:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">string</span></code>: a string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bool</span></code>: a boolean</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">args</span></code>: a list of strings, separated as in a shell</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linelist</span></code>: a list of strings, separated by line breaks</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">paths</span></code>: a list of <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>, separated as in a shell</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pathlist</span></code>: a list of <code class="docutils literal notranslate"><span class="pre">py.path</span></code>, separated as in a shell</p></li>
</ul>
</div></blockquote>
<p>For <code class="docutils literal notranslate"><span class="pre">paths</span></code> and <code class="docutils literal notranslate"><span class="pre">pathlist</span></code> types, they are considered relative to the ini-file.
In case the execution is happening without an ini-file defined,
they will be considered relative to the current working directory (for example with <code class="docutils literal notranslate"><span class="pre">--override-ini</span></code>).</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 7.0: </span>The <code class="docutils literal notranslate"><span class="pre">paths</span></code> variable type.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 8.1: </span>Use the current working directory to resolve <code class="docutils literal notranslate"><span class="pre">paths</span></code> and <code class="docutils literal notranslate"><span class="pre">pathlist</span></code> in the absence of an ini-file.</p>
</div>
<p>Defaults to <code class="docutils literal notranslate"><span class="pre">string</span></code> if <code class="docutils literal notranslate"><span class="pre">None</span></code> or not passed.</p>
</p></li>
<li><p><strong>default</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a>) – Default value if no ini-file option exists but is queried.</p></li>
</ul>
</dd>
</dl>
<p>The value of ini-variables can be retrieved via a call to
<a class="reference internal" href="#pytest.Config.getini" title="pytest.Config.getini"><code class="xref py py-func docutils literal notranslate"><span class="pre">config.getini(name)</span></code></a>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="optiongroup">
<h3>OptionGroup<a class="headerlink" href="#optiongroup" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.OptionGroup">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">OptionGroup</span></span><a class="reference internal" href="../_modules/_pytest/config/argparsing.html#OptionGroup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.OptionGroup" title="Link to this definition">¶</a></dt>
<dd><p>A group of options shown in its own section.</p>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.OptionGroup.addoption">
<span class="sig-name descname"><span class="pre">addoption</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">opts</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config/argparsing.html#OptionGroup.addoption"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.OptionGroup.addoption" title="Link to this definition">¶</a></dt>
<dd><p>Add an option to this group.</p>
<p>If a shortened version of a long option is specified, it will
be suppressed in the help. <code class="docutils literal notranslate"><span class="pre">addoption('--twowords',</span> <span class="pre">'--two-words')</span></code>
results in help showing <code class="docutils literal notranslate"><span class="pre">--two-words</span></code> only, but <code class="docutils literal notranslate"><span class="pre">--twowords</span></code> gets
accepted <strong>and</strong> the automatic destination is in <code class="docutils literal notranslate"><span class="pre">args.twowords</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opts</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Option names, can be short or long options.</p></li>
<li><p><strong>attrs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a>) – Same attributes as the argparse library’s <a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.add_argument" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_argument()</span></code></a> function accepts.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="pytestpluginmanager">
<h3>PytestPluginManager<a class="headerlink" href="#pytestpluginmanager" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.PytestPluginManager">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PytestPluginManager</span></span><a class="reference internal" href="../_modules/_pytest/config.html#PytestPluginManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.PytestPluginManager" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.PluginManager" title="(in pluggy v0.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">PluginManager</span></code></a></p>
<p>A <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.PluginManager" title="(in pluggy v0.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pluggy.PluginManager</span></code></a> with
additional pytest-specific functionality:</p>
<ul class="simple">
<li><p>Loading plugins from the command line, <code class="docutils literal notranslate"><span class="pre">PYTEST_PLUGINS</span></code> env variable and
<code class="docutils literal notranslate"><span class="pre">pytest_plugins</span></code> global variables found in plugins being loaded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> loading during start-up.</p></li>
</ul>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.register">
<span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#PytestPluginManager.register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.PytestPluginManager.register" title="Link to this definition">¶</a></dt>
<dd><p>Register a plugin and return its name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – The name under which to register the plugin. If not specified, a
name is generated using <a class="reference internal" href="#pytest.PytestPluginManager.get_canonical_name" title="pytest.PytestPluginManager.get_canonical_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_canonical_name()</span></code></a>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The plugin name. If the name is blocked from registering, returns
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a> | None</p>
</dd>
</dl>
<p>If the plugin is already registered, raises a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.getplugin">
<span class="sig-name descname"><span class="pre">getplugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#PytestPluginManager.getplugin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.PytestPluginManager.getplugin" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.hasplugin">
<span class="sig-name descname"><span class="pre">hasplugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#PytestPluginManager.hasplugin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.PytestPluginManager.hasplugin" title="Link to this definition">¶</a></dt>
<dd><p>Return whether a plugin with the given name is registered.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.import_plugin">
<span class="sig-name descname"><span class="pre">import_plugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consider_entry_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/config.html#PytestPluginManager.import_plugin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.PytestPluginManager.import_plugin" title="Link to this definition">¶</a></dt>
<dd><p>Import a plugin with <code class="docutils literal notranslate"><span class="pre">modname</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">consider_entry_points</span></code> is True, entry point names are also
considered to find a plugin.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.add_hookcall_monitoring">
<span class="sig-name descname"><span class="pre">add_hookcall_monitoring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">before</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.add_hookcall_monitoring" title="Link to this definition">¶</a></dt>
<dd><p>Add before/after tracing functions for all hooks.</p>
<p>Returns an undo function which, when called, removes the added tracers.</p>
<p><code class="docutils literal notranslate"><span class="pre">before(hook_name,</span> <span class="pre">hook_impls,</span> <span class="pre">kwargs)</span></code> will be called ahead
of all hook calls and receive a hookcaller instance, a list
of HookImpl instances and the keyword arguments for the hook call.</p>
<p><code class="docutils literal notranslate"><span class="pre">after(outcome,</span> <span class="pre">hook_name,</span> <span class="pre">hook_impls,</span> <span class="pre">kwargs)</span></code> receives the
same arguments as <code class="docutils literal notranslate"><span class="pre">before</span></code> but also a <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.Result" title="(in pluggy v0.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> object
which represents the result of the overall hook call.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.add_hookspecs">
<span class="sig-name descname"><span class="pre">add_hookspecs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_or_class</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.add_hookspecs" title="Link to this definition">¶</a></dt>
<dd><p>Add new hook specifications defined in the given <code class="docutils literal notranslate"><span class="pre">module_or_class</span></code>.</p>
<p>Functions are recognized as hook specifications if they have been
decorated with a matching <code class="xref py py-class docutils literal notranslate"><span class="pre">HookspecMarker</span></code>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.check_pending">
<span class="sig-name descname"><span class="pre">check_pending</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.check_pending" title="Link to this definition">¶</a></dt>
<dd><p>Verify that all hooks which have not been verified against a
hook specification are optional, otherwise raise
<code class="xref py py-exc docutils literal notranslate"><span class="pre">PluginValidationError</span></code>.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.enable_tracing">
<span class="sig-name descname"><span class="pre">enable_tracing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.enable_tracing" title="Link to this definition">¶</a></dt>
<dd><p>Enable tracing of hook calls.</p>
<p>Returns an undo function which, when called, removes the added tracing.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.get_canonical_name">
<span class="sig-name descname"><span class="pre">get_canonical_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.get_canonical_name" title="Link to this definition">¶</a></dt>
<dd><p>Return a canonical name for a plugin object.</p>
<p>Note that a plugin may be registered under a different name
specified by the caller of <a class="reference internal" href="#pytest.PytestPluginManager.register" title="pytest.PytestPluginManager.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register(plugin,</span> <span class="pre">name)</span></code></a>.
To obtain the name of a registered plugin use <a class="reference internal" href="#pytest.PytestPluginManager.get_name" title="pytest.PytestPluginManager.get_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_name(plugin)</span></code></a> instead.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.get_hookcallers">
<span class="sig-name descname"><span class="pre">get_hookcallers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.get_hookcallers" title="Link to this definition">¶</a></dt>
<dd><p>Get all hook callers for the specified plugin.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The hook callers, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if <code class="docutils literal notranslate"><span class="pre">plugin</span></code> is not registered in
this plugin manager.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.HookCaller" title="(in pluggy v0.1)"><em>HookCaller</em></a>] | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.get_name">
<span class="sig-name descname"><span class="pre">get_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.get_name" title="Link to this definition">¶</a></dt>
<dd><p>Return the name the plugin is registered under, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if
is isn’t.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.get_plugin">
<span class="sig-name descname"><span class="pre">get_plugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.get_plugin" title="Link to this definition">¶</a></dt>
<dd><p>Return the plugin registered under the given name, if any.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.get_plugins">
<span class="sig-name descname"><span class="pre">get_plugins</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.get_plugins" title="Link to this definition">¶</a></dt>
<dd><p>Return a set of all registered plugin objects.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.has_plugin">
<span class="sig-name descname"><span class="pre">has_plugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.has_plugin" title="Link to this definition">¶</a></dt>
<dd><p>Return whether a plugin with the given name is registered.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.is_blocked">
<span class="sig-name descname"><span class="pre">is_blocked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.is_blocked" title="Link to this definition">¶</a></dt>
<dd><p>Return whether the given plugin name is blocked.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.is_registered">
<span class="sig-name descname"><span class="pre">is_registered</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.is_registered" title="Link to this definition">¶</a></dt>
<dd><p>Return whether the plugin is already registered.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.list_name_plugin">
<span class="sig-name descname"><span class="pre">list_name_plugin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.list_name_plugin" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of (name, plugin) pairs for all registered plugins.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.list_plugin_distinfo">
<span class="sig-name descname"><span class="pre">list_plugin_distinfo</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.list_plugin_distinfo" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of (plugin, distinfo) pairs for all
setuptools-registered plugins.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.load_setuptools_entrypoints">
<span class="sig-name descname"><span class="pre">load_setuptools_entrypoints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.load_setuptools_entrypoints" title="Link to this definition">¶</a></dt>
<dd><p>Load modules from querying the specified setuptools <code class="docutils literal notranslate"><span class="pre">group</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Entry point group to load plugins.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – If given, loads only plugins with the given <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The number of plugins loaded by this call.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.set_blocked">
<span class="sig-name descname"><span class="pre">set_blocked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.set_blocked" title="Link to this definition">¶</a></dt>
<dd><p>Block registrations of the given name, unregister if already registered.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.subset_hook_caller">
<span class="sig-name descname"><span class="pre">subset_hook_caller</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_plugins</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.subset_hook_caller" title="Link to this definition">¶</a></dt>
<dd><p>Return a proxy <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.HookCaller" title="(in pluggy v0.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookCaller</span></code></a> instance for the named
method which manages calls to all registered plugins except the ones
from remove_plugins.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.unblock">
<span class="sig-name descname"><span class="pre">unblock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.unblock" title="Link to this definition">¶</a></dt>
<dd><p>Unblocks a name.</p>
<p>Returns whether the name was actually blocked.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.unregister">
<span class="sig-name descname"><span class="pre">unregister</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.unregister" title="Link to this definition">¶</a></dt>
<dd><p>Unregister a plugin and all of its hook implementations.</p>
<p>The plugin can be specified either by the plugin object or the plugin
name. If both are specified, they must agree.</p>
<p>Returns the unregistered plugin, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not found.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.project_name">
<span class="sig-name descname"><span class="pre">project_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Final</span></em><a class="headerlink" href="#pytest.PytestPluginManager.project_name" title="Link to this definition">¶</a></dt>
<dd><p>The project name.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.hook">
<span class="sig-name descname"><span class="pre">hook</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Final</span></em><a class="headerlink" href="#pytest.PytestPluginManager.hook" title="Link to this definition">¶</a></dt>
<dd><p>The “hook relay”, used to call a hook on all registered plugins.
See <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/index.html#calling" title="(in pluggy v0.1)"><span>Calling hooks</span></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.PytestPluginManager.trace">
<span class="sig-name descname"><span class="pre">trace</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Final</span><span class="p"><span class="pre">[</span></span><span class="pre">_tracing.TagTracerSub</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.PytestPluginManager.trace" title="Link to this definition">¶</a></dt>
<dd><p>The tracing entry point. See <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/index.html#tracing" title="(in pluggy v0.1)"><span>Built-in tracing</span></a>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="terminalreporter">
<h3>TerminalReporter<a class="headerlink" href="#terminalreporter" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.TerminalReporter">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TerminalReporter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/terminal.html#TerminalReporter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TerminalReporter" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.TerminalReporter.wrap_write">
<span class="sig-name descname"><span class="pre">wrap_write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flush</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\n'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">markup</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/terminal.html#TerminalReporter.wrap_write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TerminalReporter.wrap_write" title="Link to this definition">¶</a></dt>
<dd><p>Wrap message with margin for progress info.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.TerminalReporter.rewrite">
<span class="sig-name descname"><span class="pre">rewrite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">markup</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/terminal.html#TerminalReporter.rewrite"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TerminalReporter.rewrite" title="Link to this definition">¶</a></dt>
<dd><p>Rewinds the terminal cursor to the beginning and writes the given line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>erase</strong> – If True, will also add spaces until the full terminal width to ensure
previous lines are properly erased.</p>
</dd>
</dl>
<p>The rest of the keyword arguments are markup instructions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.TerminalReporter.build_summary_stats_line">
<span class="sig-name descname"><span class="pre">build_summary_stats_line</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/terminal.html#TerminalReporter.build_summary_stats_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TerminalReporter.build_summary_stats_line" title="Link to this definition">¶</a></dt>
<dd><p>Build the parts used in the last summary stats line.</p>
<p>The summary stats line is the line shown at the end, “=== 12 passed, 2 errors in Xs===”.</p>
<p>This function builds a list of the “parts” that make up for the text in that line, in
the example above it would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;12 passed&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;green&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}),</span>
    <span class="p">(</span><span class="s2">&quot;2 errors&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;red&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>That last dict for each line is a “markup dictionary”, used by TerminalWriter to
color output.</p>
<p>The final color of the line is also determined by this function, and is the second
element of the returned tuple.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="testreport">
<h3>TestReport<a class="headerlink" href="#testreport" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.TestReport">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TestReport</span></span><a class="reference internal" href="../_modules/_pytest/reports.html#TestReport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TestReport" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseReport</span></code></p>
<p>Basic test report object (also used for setup and teardown calls if
they fail).</p>
<p>Reports can contain arbitrary extra attributes.</p>
<dl class="field-list simple">
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestReport.nodeid">
<span class="sig-name descname"><span class="pre">nodeid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.TestReport.nodeid" title="Link to this definition">¶</a></dt>
<dd><p>Normalized collection nodeid.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestReport.location">
<span class="sig-name descname"><span class="pre">location</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.TestReport.location" title="Link to this definition">¶</a></dt>
<dd><p>A (filesystempath, lineno, domaininfo) tuple indicating the
actual location of a test item - it might be different from the
collected one e.g. if a method is inherited from a different module.
The filesystempath may be relative to <code class="docutils literal notranslate"><span class="pre">config.rootdir</span></code>.
The line number is 0-based.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestReport.keywords">
<span class="sig-name descname"><span class="pre">keywords</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.13)"><span class="pre">Mapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.TestReport.keywords" title="Link to this definition">¶</a></dt>
<dd><p>A name -&gt; value dictionary containing all keywords and
markers associated with a test invocation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestReport.outcome">
<span class="sig-name descname"><span class="pre">outcome</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'passed'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'failed'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'skipped'</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.TestReport.outcome" title="Link to this definition">¶</a></dt>
<dd><p>Test outcome, always one of “passed”, “failed”, “skipped”.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestReport.longrepr">
<span class="sig-name descname"><span class="pre">longrepr</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#pytest.ExceptionInfo" title="_pytest._code.code.ExceptionInfo"><span class="pre">ExceptionInfo</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.13)"><span class="pre">BaseException</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">TerminalRepr</span></em><a class="headerlink" href="#pytest.TestReport.longrepr" title="Link to this definition">¶</a></dt>
<dd><p>None or a failure representation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestReport.when">
<span class="sig-name descname"><span class="pre">when</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><a class="headerlink" href="#pytest.TestReport.when" title="Link to this definition">¶</a></dt>
<dd><p>One of ‘setup’, ‘call’, ‘teardown’ to indicate runtest phase.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestReport.user_properties">
<span class="sig-name descname"><span class="pre">user_properties</span></span><a class="headerlink" href="#pytest.TestReport.user_properties" title="Link to this definition">¶</a></dt>
<dd><p>User properties is a list of tuples (name, value) that holds user
defined properties of the test.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestReport.sections">
<span class="sig-name descname"><span class="pre">sections</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.TestReport.sections" title="Link to this definition">¶</a></dt>
<dd><p>Tuples of str <code class="docutils literal notranslate"><span class="pre">(heading,</span> <span class="pre">content)</span></code> with extra information
for the test report. Used by pytest to add text captured
from <code class="docutils literal notranslate"><span class="pre">stdout</span></code>, <code class="docutils literal notranslate"><span class="pre">stderr</span></code>, and intercepted logging events. May
be used by other plugins to add arbitrary information to reports.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestReport.duration">
<span class="sig-name descname"><span class="pre">duration</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></em><a class="headerlink" href="#pytest.TestReport.duration" title="Link to this definition">¶</a></dt>
<dd><p>Time it took to run just the test.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestReport.start">
<span class="sig-name descname"><span class="pre">start</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></em><a class="headerlink" href="#pytest.TestReport.start" title="Link to this definition">¶</a></dt>
<dd><p>The system time when the call started, in seconds since the epoch.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestReport.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></em><a class="headerlink" href="#pytest.TestReport.stop" title="Link to this definition">¶</a></dt>
<dd><p>The system time when the call ended, in seconds since the epoch.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.TestReport.from_item_and_call">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_item_and_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">call</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/reports.html#TestReport.from_item_and_call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TestReport.from_item_and_call" title="Link to this definition">¶</a></dt>
<dd><p>Create and fill a TestReport with standard item and call info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<a class="reference internal" href="#pytest.Item" title="pytest.Item"><em>Item</em></a>) – The item.</p></li>
<li><p><strong>call</strong> (<a class="reference internal" href="#pytest.CallInfo" title="pytest.CallInfo"><em>CallInfo</em></a><em>[</em><em>None</em><em>]</em>) – The call info.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.TestReport.caplog">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">caplog</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.TestReport.caplog" title="Link to this definition">¶</a></dt>
<dd><p>Return captured log lines, if log capturing is enabled.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.5.</span></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.TestReport.capstderr">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">capstderr</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.TestReport.capstderr" title="Link to this definition">¶</a></dt>
<dd><p>Return captured text from stderr, if capturing is enabled.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.TestReport.capstdout">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">capstdout</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.TestReport.capstdout" title="Link to this definition">¶</a></dt>
<dd><p>Return captured text from stdout, if capturing is enabled.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.TestReport.count_towards_summary">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">count_towards_summary</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="#pytest.TestReport.count_towards_summary" title="Link to this definition">¶</a></dt>
<dd><p><strong>Experimental</strong> Whether this report should be counted towards the
totals shown at the end of the test session: “1 passed, 1 failure, etc”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is considered <strong>experimental</strong>, so beware that it is subject to changes
even in patch releases.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.TestReport.failed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">failed</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="#pytest.TestReport.failed" title="Link to this definition">¶</a></dt>
<dd><p>Whether the outcome is failed.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.TestReport.fspath">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fspath</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.TestReport.fspath" title="Link to this definition">¶</a></dt>
<dd><p>The path portion of the reported node, as a string.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.TestReport.head_line">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">head_line</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></em><a class="headerlink" href="#pytest.TestReport.head_line" title="Link to this definition">¶</a></dt>
<dd><p><strong>Experimental</strong> The head line shown with longrepr output for this
report, more commonly during traceback representation during
failures:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">________</span> <span class="n">Test</span><span class="o">.</span><span class="n">foo</span> <span class="n">________</span>
</pre></div>
</div>
<p>In the example above, the head_line is “Test.foo”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is considered <strong>experimental</strong>, so beware that it is subject to changes
even in patch releases.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.TestReport.longreprtext">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">longreprtext</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.TestReport.longreprtext" title="Link to this definition">¶</a></dt>
<dd><p>Read-only property that returns the full string representation of
<code class="docutils literal notranslate"><span class="pre">longrepr</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.TestReport.passed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">passed</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="#pytest.TestReport.passed" title="Link to this definition">¶</a></dt>
<dd><p>Whether the outcome is passed.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pytest.TestReport.skipped">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">skipped</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></em><a class="headerlink" href="#pytest.TestReport.skipped" title="Link to this definition">¶</a></dt>
<dd><p>Whether the outcome is skipped.</p>
</dd></dl>

</dd></dl>

</section>
<section id="testshortlogreport">
<h3>TestShortLogReport<a class="headerlink" href="#testshortlogreport" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.TestShortLogReport">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TestShortLogReport</span></span><a class="reference internal" href="../_modules/_pytest/terminal.html#TestShortLogReport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TestShortLogReport" title="Link to this definition">¶</a></dt>
<dd><p>Used to store the test status result category, shortletter and verbose word.
For example <code class="docutils literal notranslate"><span class="pre">&quot;rerun&quot;,</span> <span class="pre">&quot;R&quot;,</span> <span class="pre">(&quot;RERUN&quot;,</span> <span class="pre">{&quot;yellow&quot;:</span> <span class="pre">True})</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>category</strong> – The class of result, for example <code class="docutils literal notranslate"><span class="pre">“passed”</span></code>, <code class="docutils literal notranslate"><span class="pre">“skipped”</span></code>, <code class="docutils literal notranslate"><span class="pre">“error”</span></code>, or the empty string.</p></li>
<li><p><strong>letter</strong> – The short letter shown as testing progresses, for example <code class="docutils literal notranslate"><span class="pre">&quot;.&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;s&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;E&quot;</span></code>, or the empty string.</p></li>
<li><p><strong>word</strong> – Verbose word is shown as testing progresses in verbose mode, for example <code class="docutils literal notranslate"><span class="pre">&quot;PASSED&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;SKIPPED&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;ERROR&quot;</span></code>, or the empty string.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestShortLogReport.category">
<span class="sig-name descname"><span class="pre">category</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.TestShortLogReport.category" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestShortLogReport.letter">
<span class="sig-name descname"><span class="pre">letter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.TestShortLogReport.letter" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pytest.TestShortLogReport.word">
<span class="sig-name descname"><span class="pre">word</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.13)"><span class="pre">Mapping</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.TestShortLogReport.word" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

</dd></dl>

</section>
<section id="result">
<h3>Result<a class="headerlink" href="#result" title="Link to this heading">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-28-28-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-28-28-0" name="28-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-28-28-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-28-28-1" name="28-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-28-28-0" class="sphinx-tabs-panel" id="panel-28-28-0" name="28-0" role="tabpanel" tabindex="0"><p>在 <a class="reference internal" href="../how-to/writing_hook_functions.html#hookwrapper"><span class="std std-ref">hook 包装器</span></a> 中使用的结果对象，请参阅 <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.Result" title="(in pluggy v0.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pluggy</span> <span class="pre">文档中的</span> <span class="pre">Result</span></code></a> 以了解更多信息。</p>
</div><div aria-labelledby="tab-28-28-1" class="sphinx-tabs-panel" hidden="true" id="panel-28-28-1" name="28-1" role="tabpanel" tabindex="0"><p>Result object used within <a class="reference internal" href="../how-to/writing_hook_functions.html#hookwrapper"><span class="std std-ref">hook wrappers</span></a>, see <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.Result" title="(in pluggy v0.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">pluggy</span> <span class="pre">documentation</span></code></a> for more information.</p>
</div></div>
</section>
<section id="stash">
<h3>Stash<a class="headerlink" href="#stash" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.Stash">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Stash</span></span><a class="reference internal" href="../_modules/_pytest/stash.html#Stash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash" title="Link to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">Stash</span></code> is a type-safe heterogeneous mutable mapping that
allows keys and value types to be defined separately from
where it (the <code class="docutils literal notranslate"><span class="pre">Stash</span></code>) is created.</p>
<p>Usually you will be given an object which has a <code class="docutils literal notranslate"><span class="pre">Stash</span></code>, for example
<a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> or a <a class="reference internal" href="#pytest.nodes.Node" title="_pytest.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">stash</span><span class="p">:</span> <span class="n">Stash</span> <span class="o">=</span> <span class="n">some_object</span><span class="o">.</span><span class="n">stash</span>
</pre></div>
</div>
<p>If a module or plugin wants to store data in this <code class="docutils literal notranslate"><span class="pre">Stash</span></code>, it creates
<a class="reference internal" href="#pytest.StashKey" title="pytest.StashKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">StashKey</span></code></a>s for its keys (at the module level):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># At the top-level of the module</span>
<span class="n">some_str_key</span> <span class="o">=</span> <span class="n">StashKey</span><span class="p">[</span><span class="nb">str</span><span class="p">]()</span>
<span class="n">some_bool_key</span> <span class="o">=</span> <span class="n">StashKey</span><span class="p">[</span><span class="nb">bool</span><span class="p">]()</span>
</pre></div>
</div>
<p>To store information:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Value type must match the key.</span>
<span class="n">stash</span><span class="p">[</span><span class="n">some_str_key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;value&quot;</span>
<span class="n">stash</span><span class="p">[</span><span class="n">some_bool_key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>To retrieve the information:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># The static type of some_str is str.</span>
<span class="n">some_str</span> <span class="o">=</span> <span class="n">stash</span><span class="p">[</span><span class="n">some_str_key</span><span class="p">]</span>
<span class="c1"># The static type of some_bool is bool.</span>
<span class="n">some_bool</span> <span class="o">=</span> <span class="n">stash</span><span class="p">[</span><span class="n">some_bool_key</span><span class="p">]</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 7.0.</span></p>
</div>
<dl class="field-list simple">
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pytest.Stash.__setitem__">
<span class="sig-name descname"><span class="pre">__setitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/stash.html#Stash.__setitem__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.__setitem__" title="Link to this definition">¶</a></dt>
<dd><p>Set a value for key.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Stash.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/stash.html#Stash.__getitem__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.__getitem__" title="Link to this definition">¶</a></dt>
<dd><p>Get the value for key.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if the key wasn’t set before.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Stash.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/stash.html#Stash.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.get" title="Link to this definition">¶</a></dt>
<dd><p>Get the value for key, or return default if the key wasn’t set
before.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Stash.setdefault">
<span class="sig-name descname"><span class="pre">setdefault</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/stash.html#Stash.setdefault"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.setdefault" title="Link to this definition">¶</a></dt>
<dd><p>Return the value of key if already set, otherwise set the value
of key to default and return default.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Stash.__delitem__">
<span class="sig-name descname"><span class="pre">__delitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/stash.html#Stash.__delitem__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.__delitem__" title="Link to this definition">¶</a></dt>
<dd><p>Delete the value for key.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if the key wasn’t set before.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Stash.__contains__">
<span class="sig-name descname"><span class="pre">__contains__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/stash.html#Stash.__contains__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.__contains__" title="Link to this definition">¶</a></dt>
<dd><p>Return whether key was set.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pytest.Stash.__len__">
<span class="sig-name descname"><span class="pre">__len__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/stash.html#Stash.__len__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.__len__" title="Link to this definition">¶</a></dt>
<dd><p>Return how many items exist in the stash.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.StashKey">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">StashKey</span></span><a class="reference internal" href="../_modules/_pytest/stash.html#StashKey"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.StashKey" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generic" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generic</span></code></a>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">T</span></code>]</p>
<p><code class="docutils literal notranslate"><span class="pre">StashKey</span></code> is an object used as a key to a <a class="reference internal" href="#pytest.Stash" title="pytest.Stash"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stash</span></code></a>.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">StashKey</span></code> is associated with the type <code class="docutils literal notranslate"><span class="pre">T</span></code> of the value of the key.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">StashKey</span></code> is unique and cannot conflict with another key.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 7.0.</span></p>
</div>
</dd></dl>

</section>
</section>
<section id="id246">
<h2>全局变量<a class="headerlink" href="#id246" title="Link to this heading">¶</a></h2>
<p><strong>Global Variables</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-29-29-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-29-29-0" name="29-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-29-29-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-29-29-1" name="29-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-29-29-0" class="sphinx-tabs-panel" id="panel-29-29-0" name="29-0" role="tabpanel" tabindex="0"><p>pytest 对在测试模块或 <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> 文件中定义的一些全局变量采取特殊处理。</p>
<dl class="std globalvar">
<dt class="sig sig-object std" id="globalvar-collect_ignore">
<span class="sig-name descname"><span class="pre">collect_ignore</span></span><a class="headerlink" href="#globalvar-collect_ignore" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>教程</strong>: <a class="reference internal" href="../example/pythoncollection.html#customizing-test-collection"><span class="std std-ref">自定义测试收集</span></a></p>
<p>可以在 <em>conftest.py 文件</em> 中声明，以排除测试目录或模块。
需要是一个路径的列表（<code class="docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> 或任何 <a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">os.PathLike</span></code></a>）。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>collect_ignore = [“setup.py”]</p>
<dl class="std globalvar">
<dt class="sig sig-object std" id="globalvar-collect_ignore_glob">
<span class="sig-name descname"><span class="pre">collect_ignore_glob</span></span><a class="headerlink" href="#globalvar-collect_ignore_glob" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>教程</strong>: <a class="reference internal" href="../example/pythoncollection.html#customizing-test-collection"><span class="std std-ref">自定义测试收集</span></a></p>
<p>可以在 <em>conftest.py 文件</em> 中声明，以使用 Unix shell 风格的通配符排除测试目录或模块。
需要是 <code class="docutils literal notranslate"><span class="pre">list[str]</span></code>，其中 <code class="docutils literal notranslate"><span class="pre">str</span></code> 可以包含通配模式。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>collect_ignore_glob = [”<a href="#id247"><span class="problematic" id="id248">*</span></a>_ignore.py”]</p>
<dl class="std globalvar">
<dt class="sig sig-object std" id="globalvar-pytest_plugins">
<span class="sig-name descname"><span class="pre">pytest_plugins</span></span><a class="headerlink" href="#globalvar-pytest_plugins" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>教程</strong>: <a class="reference internal" href="../how-to/plugins.html#available-installable-plugins"><span class="std std-ref">在测试模块或 conftest 文件中请求/加载插件</span></a></p>
<p>可以在 <em>测试模块</em> 和 <em>conftest.py 文件</em> 的 <strong>全局</strong> 级别声明，以注册附加插件。
可以是一个 <code class="docutils literal notranslate"><span class="pre">str</span></code> 或 <code class="docutils literal notranslate"><span class="pre">Sequence[str]</span></code>。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_plugins</span> <span class="o">=</span> <span class="s2">&quot;myapp.testsupport.myplugin&quot;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_plugins</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;myapp.testsupport.tools&quot;</span><span class="p">,</span> <span class="s2">&quot;myapp.testsupport.regression&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="std globalvar">
<dt class="sig sig-object std" id="globalvar-pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><a class="headerlink" href="#globalvar-pytestmark" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>教程</strong>: <a class="reference internal" href="../example/markers.html#scoped-marking"><span class="std std-ref">标记整个类或模块</span></a></p>
<p>可以在 <em>测试模块</em> 的 <strong>全局</strong> 级别声明，以将一个或多个 <a class="reference internal" href="#marks-ref"><span class="std std-ref">marks</span></a> 应用到所有测试函数和方法。
可以是单个标记或标记列表（按从左到右的顺序应用）。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">webtest</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="p">[</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">integration</span><span class="p">,</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">slow</span><span class="p">]</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-29-29-1" class="sphinx-tabs-panel" hidden="true" id="panel-29-29-1" name="29-1" role="tabpanel" tabindex="0"><p>pytest treats some global variables in a special manner when defined in a test module or <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files.</p>
<dl class="std globalvar">
<dt class="sig sig-object std" id="globalvar-0">
<span class="sig-name descname"><span class="pre">collect_ignore</span></span><a class="headerlink" href="#globalvar-0" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Tutorial</strong>: <a class="reference internal" href="../example/pythoncollection.html#customizing-test-collection"><span class="std std-ref">自定义测试收集</span></a></p>
<p>Can be declared in <em>conftest.py files</em> to exclude test directories or modules.
Needs to be a list of paths (<code class="docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> or any <a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">os.PathLike</span></code></a>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>collect_ignore = [“setup.py”]</p>
<dl class="std globalvar">
<dt class="sig sig-object std" id="globalvar-1">
<span class="sig-name descname"><span class="pre">collect_ignore_glob</span></span><a class="headerlink" href="#globalvar-1" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Tutorial</strong>: <a class="reference internal" href="../example/pythoncollection.html#customizing-test-collection"><span class="std std-ref">自定义测试收集</span></a></p>
<p>Can be declared in <em>conftest.py files</em> to exclude test directories or modules
with Unix shell-style wildcards. Needs to be <code class="docutils literal notranslate"><span class="pre">list[str]</span></code> where <code class="docutils literal notranslate"><span class="pre">str</span></code> can
contain glob patterns.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>collect_ignore_glob = [”<a href="#id249"><span class="problematic" id="id250">*</span></a>_ignore.py”]</p>
<dl class="std globalvar">
<dt class="sig sig-object std" id="globalvar-2">
<span class="sig-name descname"><span class="pre">pytest_plugins</span></span><a class="headerlink" href="#globalvar-2" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Tutorial</strong>: <a class="reference internal" href="../how-to/plugins.html#available-installable-plugins"><span class="std std-ref">在测试模块或 conftest 文件中请求/加载插件</span></a></p>
<p>Can be declared at the <strong>global</strong> level in <em>test modules</em> and <em>conftest.py files</em> to register additional plugins.
Can be either a <code class="docutils literal notranslate"><span class="pre">str</span></code> or <code class="docutils literal notranslate"><span class="pre">Sequence[str]</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_plugins</span> <span class="o">=</span> <span class="s2">&quot;myapp.testsupport.myplugin&quot;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_plugins</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;myapp.testsupport.tools&quot;</span><span class="p">,</span> <span class="s2">&quot;myapp.testsupport.regression&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="std globalvar">
<dt class="sig sig-object std" id="globalvar-3">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><a class="headerlink" href="#globalvar-3" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Tutorial</strong>: <a class="reference internal" href="../example/markers.html#scoped-marking"><span class="std std-ref">标记整个类或模块</span></a></p>
<p>Can be declared at the <strong>global</strong> level in <em>test modules</em> to apply one or more <a class="reference internal" href="#marks-ref"><span class="std std-ref">marks</span></a> to all
test functions and methods. Can be either a single mark or a list of marks (applied in left-to-right order).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">webtest</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="p">[</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">integration</span><span class="p">,</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">slow</span><span class="p">]</span>
</pre></div>
</div>
</div></div>
</section>
<section id="id251">
<h2>环境变量<a class="headerlink" href="#id251" title="Link to this heading">¶</a></h2>
<p><strong>Environment Variables</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-30-30-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-30-30-0" name="30-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-30-30-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-30-30-1" name="30-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-30-30-0" class="sphinx-tabs-panel" id="panel-30-30-0" name="30-0" role="tabpanel" tabindex="0"><p>可以用来改变 pytest 行为的环境变量。</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CI">
<span class="sig-name descname"><span class="pre">CI</span></span><a class="headerlink" href="#envvar-CI" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>当设置时（无论值如何），pytest 认可它正在 CI 过程中运行。是 <code class="docutils literal notranslate"><span class="pre">BUILD_NUMBER</span></code> 变量的替代。另见 <a class="reference internal" href="../explanation/ci.html#ci-pipelines"><span class="std std-ref">CI Pipelines</span></a>。</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-BUILD_NUMBER">
<span class="sig-name descname"><span class="pre">BUILD_NUMBER</span></span><a class="headerlink" href="#envvar-BUILD_NUMBER" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>当设置时（无论值如何），pytest 认可它正在 CI 过程中运行。是 CI 变量的替代。另见 <a class="reference internal" href="../explanation/ci.html#ci-pipelines"><span class="std std-ref">CI Pipelines</span></a>。</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PYTEST_ADDOPTS">
<span class="sig-name descname"><span class="pre">PYTEST_ADDOPTS</span></span><a class="headerlink" href="#envvar-PYTEST_ADDOPTS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>这包含一个命令行（由 py:mod:<code class="docutils literal notranslate"><span class="pre">shlex</span></code> 模块解析），将被 <strong>前置</strong> 到用户提供的命令行，更多信息见 <a class="reference internal" href="customize.html#adding-default-options"><span class="std std-ref">内置配置文件选项</span></a>。</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PYTEST_VERSION">
<span class="sig-name descname"><span class="pre">PYTEST_VERSION</span></span><a class="headerlink" href="#envvar-PYTEST_VERSION" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>该环境变量在 pytest 会话开始时定义，之后未定义。
它包含 <code class="docutils literal notranslate"><span class="pre">pytest.__version__</span></code> 的值，除此之外可以用来轻松检查代码是否在 pytest 运行中执行。</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PYTEST_CURRENT_TEST">
<span class="sig-name descname"><span class="pre">PYTEST_CURRENT_TEST</span></span><a class="headerlink" href="#envvar-PYTEST_CURRENT_TEST" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>该变量不应该由用户设置，而是由 pytest 内部设置为当前测试的名称，以便其他进程可以检查它，更多信息见 <a class="reference internal" href="../example/simple.html#pytest-current-test-env"><span class="std std-ref">PYTEST_CURRENT_TEST 环境变量</span></a>。</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PYTEST_DEBUG">
<span class="sig-name descname"><span class="pre">PYTEST_DEBUG</span></span><a class="headerlink" href="#envvar-PYTEST_DEBUG" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>当设置时，pytest 将打印跟踪和调试信息。</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PYTEST_DISABLE_PLUGIN_AUTOLOAD">
<span class="sig-name descname"><span class="pre">PYTEST_DISABLE_PLUGIN_AUTOLOAD</span></span><a class="headerlink" href="#envvar-PYTEST_DISABLE_PLUGIN_AUTOLOAD" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>当设置时，通过 <a class="reference external" href="https://packaging.python.org/en/latest/guides/creating-and-discovering-plugins/" title="(in Python Packaging User Guide)"><span class="xref std std-doc">entry point packaging
metadata</span></a> 禁用插件自动加载。仅加载明确指定的插件。</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PYTEST_PLUGINS">
<span class="sig-name descname"><span class="pre">PYTEST_PLUGINS</span></span><a class="headerlink" href="#envvar-PYTEST_PLUGINS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>包含应作为插件加载的模块的以逗号分隔的列表：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PYTEST_PLUGINS</span><span class="o">=</span>mymodule.plugin,xdist
</pre></div>
</div>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PYTEST_THEME">
<span class="sig-name descname"><span class="pre">PYTEST_THEME</span></span><a class="headerlink" href="#envvar-PYTEST_THEME" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>设置要用于代码输出的 <a class="reference external" href="https://pygments.org/docs/styles/">pygment style</a>。</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PYTEST_THEME_MODE">
<span class="sig-name descname"><span class="pre">PYTEST_THEME_MODE</span></span><a class="headerlink" href="#envvar-PYTEST_THEME_MODE" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>将 <span class="target" id="index-1"></span><a class="reference internal" href="#envvar-8"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTEST_THEME</span></code></a> 设置为 <em>dark</em> 或 <em>light</em>。</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-PY_COLORS">
<span class="sig-name descname"><span class="pre">PY_COLORS</span></span><a class="headerlink" href="#envvar-PY_COLORS" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>当设置为 <code class="docutils literal notranslate"><span class="pre">1</span></code> 时，pytest 将在终端输出中使用颜色。
当设置为 <code class="docutils literal notranslate"><span class="pre">0</span></code> 时，pytest 将不使用颜色。
<code class="docutils literal notranslate"><span class="pre">PY_COLORS</span></code> 优先于 <code class="docutils literal notranslate"><span class="pre">NO_COLOR</span></code> 和 <code class="docutils literal notranslate"><span class="pre">FORCE_COLOR</span></code>。</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-NO_COLOR">
<span class="sig-name descname"><span class="pre">NO_COLOR</span></span><a class="headerlink" href="#envvar-NO_COLOR" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>当设置为非空字符串（无论值如何）时，pytest 将不在终端输出中使用颜色。
<code class="docutils literal notranslate"><span class="pre">PY_COLORS</span></code> 优先于 <code class="docutils literal notranslate"><span class="pre">NO_COLOR</span></code>，而 <code class="docutils literal notranslate"><span class="pre">NO_COLOR</span></code> 优先于 <code class="docutils literal notranslate"><span class="pre">FORCE_COLOR</span></code>。
有关其他支持此社区标准的库，请参见 <a class="reference external" href="https://no-color.org/">no-color.org</a>。</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-FORCE_COLOR">
<span class="sig-name descname"><span class="pre">FORCE_COLOR</span></span><a class="headerlink" href="#envvar-FORCE_COLOR" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>当设置为非空字符串（无论值如何）时，pytest 将在终端输出中使用颜色。
<code class="docutils literal notranslate"><span class="pre">PY_COLORS</span></code> 和 <code class="docutils literal notranslate"><span class="pre">NO_COLOR</span></code> 优先于 <code class="docutils literal notranslate"><span class="pre">FORCE_COLOR</span></code>。</p>
</div><div aria-labelledby="tab-30-30-1" class="sphinx-tabs-panel" hidden="true" id="panel-30-30-1" name="30-1" role="tabpanel" tabindex="0"><p>Environment variables that can be used to change pytest’s behavior.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-0">
<span class="sig-name descname"><span class="pre">CI</span></span><a class="headerlink" href="#envvar-0" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>When set (regardless of value), pytest acknowledges that is running in a CI process. Alternative to <code class="docutils literal notranslate"><span class="pre">BUILD_NUMBER</span></code> variable. See also <a class="reference internal" href="../explanation/ci.html#ci-pipelines"><span class="std std-ref">CI Pipelines</span></a>.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-1">
<span class="sig-name descname"><span class="pre">BUILD_NUMBER</span></span><a class="headerlink" href="#envvar-1" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>When set (regardless of value), pytest acknowledges that is running in a CI process. Alternative to CI variable. See also <a class="reference internal" href="../explanation/ci.html#ci-pipelines"><span class="std std-ref">CI Pipelines</span></a>.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-2">
<span class="sig-name descname"><span class="pre">PYTEST_ADDOPTS</span></span><a class="headerlink" href="#envvar-2" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>This contains a command-line (parsed by the py:mod:<code class="docutils literal notranslate"><span class="pre">shlex</span></code> module) that will be <strong>prepended</strong> to the command line given
by the user, see <a class="reference internal" href="customize.html#adding-default-options"><span class="std std-ref">内置配置文件选项</span></a> for more information.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-3">
<span class="sig-name descname"><span class="pre">PYTEST_VERSION</span></span><a class="headerlink" href="#envvar-3" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>This environment variable is defined at the start of the pytest session and is undefined afterwards.
It contains the value of <code class="docutils literal notranslate"><span class="pre">pytest.__version__</span></code>, and among other things can be used to easily check if a code is running from within a pytest run.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-4">
<span class="sig-name descname"><span class="pre">PYTEST_CURRENT_TEST</span></span><a class="headerlink" href="#envvar-4" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>This is not meant to be set by users, but is set by pytest internally with the name of the current test so other
processes can inspect it, see <a class="reference internal" href="../example/simple.html#pytest-current-test-env"><span class="std std-ref">PYTEST_CURRENT_TEST 环境变量</span></a> for more information.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-5">
<span class="sig-name descname"><span class="pre">PYTEST_DEBUG</span></span><a class="headerlink" href="#envvar-5" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>When set, pytest will print tracing and debug information.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-6">
<span class="sig-name descname"><span class="pre">PYTEST_DISABLE_PLUGIN_AUTOLOAD</span></span><a class="headerlink" href="#envvar-6" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>When set, disables plugin auto-loading through <a class="reference external" href="https://packaging.python.org/en/latest/guides/creating-and-discovering-plugins/" title="(in Python Packaging User Guide)"><span class="xref std std-doc">entry point packaging
metadata</span></a>. Only explicitly
specified plugins will be loaded.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-7">
<span class="sig-name descname"><span class="pre">PYTEST_PLUGINS</span></span><a class="headerlink" href="#envvar-7" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Contains comma-separated list of modules that should be loaded as plugins:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PYTEST_PLUGINS</span><span class="o">=</span>mymodule.plugin,xdist
</pre></div>
</div>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-8">
<span class="sig-name descname"><span class="pre">PYTEST_THEME</span></span><a class="headerlink" href="#envvar-8" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Sets a <a class="reference external" href="https://pygments.org/docs/styles/">pygment style</a> to use for the code output.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-9">
<span class="sig-name descname"><span class="pre">PYTEST_THEME_MODE</span></span><a class="headerlink" href="#envvar-9" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Sets the <span class="target" id="index-2"></span><a class="reference internal" href="#envvar-8"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTEST_THEME</span></code></a> to be either <em>dark</em> or <em>light</em>.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-10">
<span class="sig-name descname"><span class="pre">PY_COLORS</span></span><a class="headerlink" href="#envvar-10" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>When set to <code class="docutils literal notranslate"><span class="pre">1</span></code>, pytest will use color in terminal output.
When set to <code class="docutils literal notranslate"><span class="pre">0</span></code>, pytest will not use color.
<code class="docutils literal notranslate"><span class="pre">PY_COLORS</span></code> takes precedence over <code class="docutils literal notranslate"><span class="pre">NO_COLOR</span></code> and <code class="docutils literal notranslate"><span class="pre">FORCE_COLOR</span></code>.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-11">
<span class="sig-name descname"><span class="pre">NO_COLOR</span></span><a class="headerlink" href="#envvar-11" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>When set to a non-empty string (regardless of value), pytest will not use color in terminal output.
<code class="docutils literal notranslate"><span class="pre">PY_COLORS</span></code> takes precedence over <code class="docutils literal notranslate"><span class="pre">NO_COLOR</span></code>, which takes precedence over <code class="docutils literal notranslate"><span class="pre">FORCE_COLOR</span></code>.
See <a class="reference external" href="https://no-color.org/">no-color.org</a> for other libraries supporting this community standard.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-12">
<span class="sig-name descname"><span class="pre">FORCE_COLOR</span></span><a class="headerlink" href="#envvar-12" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>When set to a non-empty string (regardless of value), pytest will use color in terminal output.
<code class="docutils literal notranslate"><span class="pre">PY_COLORS</span></code> and <code class="docutils literal notranslate"><span class="pre">NO_COLOR</span></code> take precedence over <code class="docutils literal notranslate"><span class="pre">FORCE_COLOR</span></code>.</p>
</div></div>
</section>
<section id="id253">
<h2>异常<a class="headerlink" href="#id253" title="Link to this heading">¶</a></h2>
<p><strong>Exceptions</strong></p>
<dl class="py exception">
<dt class="sig sig-object py" id="pytest.UsageError">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">UsageError</span></span><a class="reference internal" href="../_modules/_pytest/config/exceptions.html#UsageError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.UsageError" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>Error in pytest usage or invocation.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="pytest.FixtureLookupError">
<em class="property"><span class="pre">final</span><span class="w"> </span><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FixtureLookupError</span></span><a class="reference internal" href="../_modules/_pytest/fixtures.html#FixtureLookupError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.FixtureLookupError" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#LookupError" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">LookupError</span></code></a></p>
<p>Could not return a requested fixture (missing or invalid).</p>
<dl class="field-list simple">
</dl>
</dd></dl>

</section>
<section id="warnings-ref">
<span id="id254"></span><h2>告警<a class="headerlink" href="#warnings-ref" title="Link to this heading">¶</a></h2>
<p><strong>Warnings</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-31-31-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-31-31-0" name="31-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-31-31-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-31-31-1" name="31-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-31-31-0" class="sphinx-tabs-panel" id="panel-31-31-0" name="31-0" role="tabpanel" tabindex="0"><p>在某些情况下（例如不当使用或弃用的功能）会生成自定义警告。</p>
</div><div aria-labelledby="tab-31-31-1" class="sphinx-tabs-panel" hidden="true" id="panel-31-31-1" name="31-1" role="tabpanel" tabindex="0"><p>Custom warnings generated in some situations such as improper usage or deprecated features.</p>
</div></div>
<dl class="py class">
<dt class="sig sig-object py" id="pytest.PytestWarning">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PytestWarning</span></span><a class="headerlink" href="#pytest.PytestWarning" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#UserWarning" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserWarning</span></code></a></p>
<p>Base class for all warnings emitted by pytest.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.PytestAssertRewriteWarning">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PytestAssertRewriteWarning</span></span><a class="headerlink" href="#pytest.PytestAssertRewriteWarning" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a></p>
<p>Warning emitted by the pytest assert rewrite module.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.PytestCacheWarning">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PytestCacheWarning</span></span><a class="headerlink" href="#pytest.PytestCacheWarning" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a></p>
<p>Warning emitted by the cache plugin in various situations.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.PytestCollectionWarning">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PytestCollectionWarning</span></span><a class="headerlink" href="#pytest.PytestCollectionWarning" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a></p>
<p>Warning emitted when pytest is not able to collect a file or symbol in a module.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.PytestConfigWarning">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PytestConfigWarning</span></span><a class="headerlink" href="#pytest.PytestConfigWarning" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a></p>
<p>Warning emitted for configuration issues.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.PytestDeprecationWarning">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PytestDeprecationWarning</span></span><a class="headerlink" href="#pytest.PytestDeprecationWarning" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#DeprecationWarning" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a></p>
<p>Warning class for features that will be removed in a future version.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.PytestExperimentalApiWarning">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PytestExperimentalApiWarning</span></span><a class="headerlink" href="#pytest.PytestExperimentalApiWarning" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FutureWarning" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">FutureWarning</span></code></a></p>
<p>Warning category used to denote experiments in pytest.</p>
<p>Use sparingly as the API might change or even be removed completely in a
future version.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.PytestRemovedIn9Warning">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PytestRemovedIn9Warning</span></span><a class="headerlink" href="#pytest.PytestRemovedIn9Warning" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestDeprecationWarning" title="pytest.PytestDeprecationWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestDeprecationWarning</span></code></a></p>
<p>Warning class for features that will be removed in pytest 9.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.PytestUnknownMarkWarning">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PytestUnknownMarkWarning</span></span><a class="headerlink" href="#pytest.PytestUnknownMarkWarning" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a></p>
<p>Warning emitted on use of unknown markers.</p>
<p>See <a class="reference internal" href="../how-to/mark.html#mark"><span class="std std-ref">如何用属性标记测试函数</span></a> for details.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.PytestUnraisableExceptionWarning">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PytestUnraisableExceptionWarning</span></span><a class="headerlink" href="#pytest.PytestUnraisableExceptionWarning" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a></p>
<p>An unraisable exception was reported.</p>
<p>Unraisable exceptions are exceptions raised in <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__del__" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__del__</span></code></a>
implementations and similar situations when the exception cannot be raised
as normal.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pytest.PytestUnhandledThreadExceptionWarning">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PytestUnhandledThreadExceptionWarning</span></span><a class="headerlink" href="#pytest.PytestUnhandledThreadExceptionWarning" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a></p>
<p>An unhandled exception occurred in a <a class="reference external" href="https://docs.python.org/3/library/threading.html#threading.Thread" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code></a>.</p>
<p>Such exceptions don’t propagate normally.</p>
</dd></dl>

<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-32-32-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-32-32-0" name="32-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-32-32-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-32-32-1" name="32-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-32-32-0" class="sphinx-tabs-panel" id="panel-32-32-0" name="32-0" role="tabpanel" tabindex="0"><p>有关更多信息，请参阅文档中的 <a class="reference internal" href="../how-to/capture-warnings.html#internal-warnings"><span class="std std-ref">内部 pytest 警告</span></a> 部分。</p>
</div><div aria-labelledby="tab-32-32-1" class="sphinx-tabs-panel" hidden="true" id="panel-32-32-1" name="32-1" role="tabpanel" tabindex="0"><p>Consult the <a class="reference internal" href="../how-to/capture-warnings.html#internal-warnings"><span class="std std-ref">内部 pytest 警告</span></a> section in the documentation for more information.</p>
</div></div>
</section>
<section id="ini-options-ref">
<span id="id255"></span><h2>配置选项<a class="headerlink" href="#ini-options-ref" title="Link to this heading">¶</a></h2>
<p><strong>Configuration Options</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-33-33-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-33-33-0" name="33-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-33-33-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-33-33-1" name="33-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-33-33-0" class="sphinx-tabs-panel" id="panel-33-33-0" name="33-0" role="tabpanel" tabindex="0"><p>这是一个内置配置选项的列表，可以写入 <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> （或 <code class="docutils literal notranslate"><span class="pre">.pytest.ini</span></code>）、<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>、<code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> 或 <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> 文件，通常位于您仓库的根目录。</p>
<p>要详细了解每种文件格式，请参见 <a class="reference internal" href="customize.html#config-file-formats"><span class="std std-ref">配置文件格式</span></a>。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>除了非常简单的用例外，不推荐使用 <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code>。<code class="docutils literal notranslate"><span class="pre">.cfg</span></code> 文件使用与 <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> 和 <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> 不同的解析器，这可能会导致难以追踪的问题。
如果可能，建议使用后者文件或 <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> 来保存您的 pytest 配置。</p>
</div>
<p>可以通过使用 <code class="docutils literal notranslate"><span class="pre">-o/--override-ini</span></code> 在命令行中覆盖配置选项，也可以多次传递。预期格式为 <code class="docutils literal notranslate"><span class="pre">name=value</span></code>。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="o">-</span><span class="n">o</span> <span class="n">console_output_style</span><span class="o">=</span><span class="n">classic</span> <span class="o">-</span><span class="n">o</span> <span class="n">cache_dir</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">mycache</span>
</pre></div>
</div>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-addopts">
<span class="sig-name descname"><span class="pre">addopts</span></span><a class="headerlink" href="#confval-addopts" title="Link to this definition">¶</a></dt>
<dd><p>将指定的 <code class="docutils literal notranslate"><span class="pre">OPTS</span></code> 添加到命令行参数集，就好像它们是由用户指定的一样。例如：如果您的 ini 文件内容是：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">--maxfail=2 -rf</span><span class="w">  </span><span class="c1"># 在 2 次失败后退出，报告失败信息</span>
</pre></div>
</div>
<p>发出 <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">test_hello.py</span></code> 实际上意味着：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest<span class="w"> </span>--maxfail<span class="o">=</span><span class="m">2</span><span class="w"> </span>-rf<span class="w"> </span>test_hello.py
</pre></div>
</div>
<p>默认是不添加任何选项。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-cache_dir">
<span class="sig-name descname"><span class="pre">cache_dir</span></span><a class="headerlink" href="#confval-cache_dir" title="Link to this definition">¶</a></dt>
<dd><p>设置缓存插件内容存储的目录。默认目录为
<code class="docutils literal notranslate"><span class="pre">.pytest_cache</span></code>，它在 <a class="reference internal" href="customize.html#rootdir"><span class="std std-ref">rootdir</span></a> 中创建。目录可以是
相对或绝对路径。如果设置相对路径，则目录相对于 <a class="reference internal" href="customize.html#rootdir"><span class="std std-ref">rootdir</span></a> 创建。此外，路径可以包含环境变量，这些变量将被扩展。有关缓存插件的更多信息，请参阅 <a class="reference internal" href="../how-to/cache.html#cache-provider"><span class="std std-ref">如何重新运行失败的测试并在测试运行之间保持状态</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-consider_namespace_packages">
<span class="sig-name descname"><span class="pre">consider_namespace_packages</span></span><a class="headerlink" href="#confval-consider_namespace_packages" title="Link to this definition">¶</a></dt>
<dd><p>控制 pytest 是否应尝试识别收集 Python 模块时的 <a class="reference external" href="https://packaging.python.org/en/latest/guides/packaging-namespace-packages">namespace packages</a>。
默认值为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<p>如果您正在测试的包是命名空间包的一部分，请设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</p>
<p>仅支持 <a class="reference external" href="https://packaging.python.org/en/latest/guides/packaging-namespace-packages/#native-namespace-packages">native namespace packages</a>，不打算支持 <a class="reference external" href="https://packaging.python.org/en/latest/guides/packaging-namespace-packages/#legacy-namespace-packages">legacy namespace packages</a>。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 8.1.</span></p>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-console_output_style">
<span class="sig-name descname"><span class="pre">console_output_style</span></span><a class="headerlink" href="#confval-console_output_style" title="Link to this definition">¶</a></dt>
<dd><p>设置运行测试时的控制台输出样式：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">classic</span></code>: 经典的 pytest 输出。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">progress</span></code>: 类似经典 pytest 输出，但带有进度指示器。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">progress-even-when-capture-no</span></code>: 即使 <code class="docutils literal notranslate"><span class="pre">capture=no</span></code> 也允许使用进度指示器。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count</span></code>: 类似进度，但显示已完成测试的数量而不是百分比。</p></li>
</ul>
<p>默认值为 <code class="docutils literal notranslate"><span class="pre">progress</span></code>，但如果您更喜欢经典模式或新模式导致意外问题，可以回退到 <code class="docutils literal notranslate"><span class="pre">classic</span></code>：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">console_output_style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">classic</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-disable_test_id_escaping_and_forfeit_all_rights_to_community_support">
<span class="sig-name descname"><span class="pre">disable_test_id_escaping_and_forfeit_all_rights_to_community_support</span></span><a class="headerlink" href="#confval-disable_test_id_escaping_and_forfeit_all_rights_to_community_support" title="Link to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 4.4.</span></p>
</div>
<p>pytest 默认会转义在参数化中使用的任何非 ASCII 字符，因为这样做有几个缺点。
如果您希望在参数化中使用 Unicode 字符串，并在终端中看到未转义的字符串，请在 <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> 中使用此选项：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">disable_test_id_escaping_and_forfeit_all_rights_to_community_support</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>
</pre></div>
</div>
<p>但请注意，这可能会导致不希望的副作用，甚至取决于所使用的操作系统和当前安装的插件而导致错误，因此请自行承担风险。</p>
<p>默认值：<code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<p>参见 <a class="reference internal" href="../how-to/parametrize.html#parametrizemark"><span class="std std-ref">&#64;pytest.mark.parametrize: 参数化测试函数</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-doctest_encoding">
<span class="sig-name descname"><span class="pre">doctest_encoding</span></span><a class="headerlink" href="#confval-doctest_encoding" title="Link to this definition">¶</a></dt>
<dd><p>用于解码带有文档字符串的文本文件的默认编码。
<a class="reference internal" href="../how-to/doctest.html#doctest"><span class="std std-ref">参见 pytest 如何处理 doctests</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-doctest_optionflags">
<span class="sig-name descname"><span class="pre">doctest_optionflags</span></span><a class="headerlink" href="#confval-doctest_optionflags" title="Link to this definition">¶</a></dt>
<dd><p>一个或多个来自标准 <code class="docutils literal notranslate"><span class="pre">doctest</span></code> 模块的 doctest 标志名称。
<a class="reference internal" href="../how-to/doctest.html#doctest"><span class="std std-ref">参见 pytest 如何处理 doctests</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-empty_parameter_set_mark">
<span class="sig-name descname"><span class="pre">empty_parameter_set_mark</span></span><a class="headerlink" href="#confval-empty_parameter_set_mark" title="Link to this definition">¶</a></dt>
<dd><p>允许选择在参数化中为空参数集的操作。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">skip</span></code> 跳过带有空参数集的测试（默认）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xfail</span></code> 将带有空参数集的测试标记为 xfail(run=False)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fail_at_collect</span></code> 如果参数化收集了一个空参数集，则引发异常</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">empty_parameter_set_mark</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">xfail</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>此选项的默认值计划在未来的版本中更改为 <code class="docutils literal notranslate"><span class="pre">xfail</span></code>，因为这被认为更不易出错，详细信息请参见 <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3155">#3155</a>。</p>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-faulthandler_timeout">
<span class="sig-name descname"><span class="pre">faulthandler_timeout</span></span><a class="headerlink" href="#confval-faulthandler_timeout" title="Link to this definition">¶</a></dt>
<dd><p>如果测试运行时间超过 <code class="docutils literal notranslate"><span class="pre">X</span></code> 秒（包括 fixture 设置和拆卸），则转储所有线程的回溯。使用 <a class="reference external" href="https://docs.python.org/3/library/faulthandler.html#faulthandler.dump_traceback_later" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">faulthandler.dump_traceback_later()</span></code></a> 函数实现，因此所有相关警告都适用。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">faulthandler_timeout</span><span class="o">=</span><span class="s">5</span>
</pre></div>
</div>
<p>有关更多信息，请参见 <a class="reference internal" href="../how-to/failures.html#faulthandler"><span class="std std-ref">故障处理</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-filterwarnings">
<span class="sig-name descname"><span class="pre">filterwarnings</span></span><a class="headerlink" href="#confval-filterwarnings" title="Link to this definition">¶</a></dt>
<dd><p>设置应该针对匹配警告采取的过滤器和操作列表。默认情况下，测试会话期间发出的所有警告将在测试会话结束时的总结中显示。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">filterwarnings</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">error</span>
<span class="w">    </span><span class="na">ignore</span><span class="o">:</span><span class="s">:DeprecationWarning</span>
</pre></div>
</div>
<p>这告诉 pytest 忽略弃用警告并将所有其他警告转换为错误。有关更多信息，请参见 <a class="reference internal" href="../how-to/capture-warnings.html#warnings"><span class="std std-ref">如何捕获警告</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-junit_duration_report">
<span class="sig-name descname"><span class="pre">junit_duration_report</span></span><a class="headerlink" href="#confval-junit_duration_report" title="Link to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 4.1.</span></p>
</div>
<p>配置持续时间如何记录到 JUnit XML 报告中：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">total</span></code> （默认值）：报告的持续时间包括设置、调用和拆卸时间。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call</span></code>：报告的持续时间仅包括调用时间，不包括设置和拆卸。</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">junit_duration_report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">call</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-junit_family">
<span class="sig-name descname"><span class="pre">junit_family</span></span><a class="headerlink" href="#confval-junit_family" title="Link to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 4.2.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 6.1: </span>默认值更改为 <code class="docutils literal notranslate"><span class="pre">xunit2</span></code>。</p>
</div>
<p>配置生成的 JUnit XML 文件的格式。可能的选项有：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">xunit1</span></code> （或 <code class="docutils literal notranslate"><span class="pre">legacy</span></code>）：生成旧样式输出，与 xunit 1.0 格式兼容。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xunit2</span></code>：生成 <a class="reference external" href="https://github.com/jenkinsci/xunit-plugin/blob/xunit-2.3.2/src/main/resources/org/jenkinsci/plugins/xunit/types/model/xsd/junit-10.xsd">xunit 2.0 样式输出</a>，应与最新的 Jenkins 版本更兼容。 <strong>这是默认值</strong>。</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">junit_family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">xunit2</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-junit_logging">
<span class="sig-name descname"><span class="pre">junit_logging</span></span><a class="headerlink" href="#confval-junit_logging" title="Link to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 3.5.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 5.4: </span>添加了 <code class="docutils literal notranslate"><span class="pre">log</span></code>、 <code class="docutils literal notranslate"><span class="pre">all</span></code>、 <code class="docutils literal notranslate"><span class="pre">out-err</span></code> 选项。</p>
</div>
<p>配置捕获的输出是否应写入 JUnit XML 文件。有效值为：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">log</span></code>：仅写入 <code class="docutils literal notranslate"><span class="pre">logging</span></code> 捕获的输出。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system-out</span></code>：写入捕获的 <code class="docutils literal notranslate"><span class="pre">stdout</span></code> 内容。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system-err</span></code>：写入捕获的 <code class="docutils literal notranslate"><span class="pre">stderr</span></code> 内容。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out-err</span></code>：同时写入捕获的 <code class="docutils literal notranslate"><span class="pre">stdout</span></code> 和 <code class="docutils literal notranslate"><span class="pre">stderr</span></code> 内容。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all</span></code>：写入捕获的 <code class="docutils literal notranslate"><span class="pre">logging</span></code>、<code class="docutils literal notranslate"><span class="pre">stdout</span></code> 和 <code class="docutils literal notranslate"><span class="pre">stderr</span></code> 内容。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">no</span></code> （默认值）：不写入捕获的输出。</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">junit_logging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">system-out</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-junit_log_passing_tests">
<span class="sig-name descname"><span class="pre">junit_log_passing_tests</span></span><a class="headerlink" href="#confval-junit_log_passing_tests" title="Link to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 4.6.</span></p>
</div>
<p>如果 <code class="docutils literal notranslate"><span class="pre">junit_logging</span> <span class="pre">!=</span> <span class="pre">&quot;no&quot;</span></code>，则配置捕获的输出是否应为 <strong>通过</strong> 的测试写入 JUnit XML 文件。默认值为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">junit_log_passing_tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-junit_suite_name">
<span class="sig-name descname"><span class="pre">junit_suite_name</span></span><a class="headerlink" href="#confval-junit_suite_name" title="Link to this definition">¶</a></dt>
<dd><p>要设置根测试套件 XML 项目的名称，可以在配置文件中配置 <code class="docutils literal notranslate"><span class="pre">junit_suite_name</span></code> 选项：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">junit_suite_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">my_suite</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-log_auto_indent">
<span class="sig-name descname"><span class="pre">log_auto_indent</span></span><a class="headerlink" href="#confval-log_auto_indent" title="Link to this definition">¶</a></dt>
<dd><p>允许对多行日志消息进行选择性自动缩进。</p>
<p>支持命令行选项 <code class="docutils literal notranslate"><span class="pre">--log-auto-indent</span> <span class="pre">[value]</span></code> 和配置选项 <code class="docutils literal notranslate"><span class="pre">log_auto_indent</span> <span class="pre">=</span> <span class="pre">[value]</span></code> 来设置
所有日志记录的自动缩进行为。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">[value]</span></code> 可以是：</dt><dd><ul class="simple">
<li><p>True 或 “On” - 动态自动缩进多行日志消息</p></li>
<li><p>False 或 “Off” 或 0 - 不自动缩进多行日志消息（默认行为）</p></li>
<li><p>[正整数] - 按 [value] 空格自动缩进多行日志消息</p></li>
</ul>
</dd>
</dl>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_auto_indent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">False</span>
</pre></div>
</div>
<p>支持将关键字参数 <code class="docutils literal notranslate"><span class="pre">extra={&quot;auto_indent&quot;:</span> <span class="pre">[value]}</span></code> 传递给
<code class="docutils literal notranslate"><span class="pre">logging.log()</span></code> 的调用，以指定日志中特定条目的自动缩进行为。<code class="docutils literal notranslate"><span class="pre">extra</span></code> 关键字参数会覆盖命令行或配置中指定的值。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-log_cli">
<span class="sig-name descname"><span class="pre">log_cli</span></span><a class="headerlink" href="#confval-log_cli" title="Link to this definition">¶</a></dt>
<dd><p>在测试运行期间启用日志显示（也称为 <a class="reference internal" href="../how-to/logging.html#live-logs"><span class="std std-ref">“实时日志记录”</span></a>）。默认值为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_cli</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-log_cli_date_format">
<span class="sig-name descname"><span class="pre">log_cli_date_format</span></span><a class="headerlink" href="#confval-log_cli_date_format" title="Link to this definition">¶</a></dt>
<dd><p>设置一个与 <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.strftime()</span></code></a> 兼容的字符串，用于格式化实时日志记录中的日期。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_cli_date_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%Y-%m-%d %H:%M:%S</span>
</pre></div>
</div>
<p>有关更多信息，请参见 <a class="reference internal" href="../how-to/logging.html#live-logs"><span class="std std-ref">实时日志</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-log_cli_format">
<span class="sig-name descname"><span class="pre">log_cli_format</span></span><a class="headerlink" href="#confval-log_cli_format" title="Link to this definition">¶</a></dt>
<dd><p>设置一个与 <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> 兼容的字符串，用于格式化实时日志记录消息。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_cli_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%(asctime)s %(levelname)s %(message)s</span>
</pre></div>
</div>
<p>有关更多信息，请参见 <a class="reference internal" href="../how-to/logging.html#live-logs"><span class="std std-ref">实时日志</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-log_cli_level">
<span class="sig-name descname"><span class="pre">log_cli_level</span></span><a class="headerlink" href="#confval-log_cli_level" title="Link to this definition">¶</a></dt>
<dd><p>设置应为实时日志记录捕获的最低日志消息级别。可以使用整数值或级别名称。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_cli_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span>
</pre></div>
</div>
<p>有关更多信息，请参见 <a class="reference internal" href="../how-to/logging.html#live-logs"><span class="std std-ref">实时日志</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-log_date_format">
<span class="sig-name descname"><span class="pre">log_date_format</span></span><a class="headerlink" href="#confval-log_date_format" title="Link to this definition">¶</a></dt>
<dd><p>设置一个与 <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.strftime()</span></code></a> 兼容的字符串，用于格式化日志捕获中的日期。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_date_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%Y-%m-%d %H:%M:%S</span>
</pre></div>
</div>
<p>有关更多信息，请参见 <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-log_file">
<span class="sig-name descname"><span class="pre">log_file</span></span><a class="headerlink" href="#confval-log_file" title="Link to this definition">¶</a></dt>
<dd><p>设置一个相对于当前工作目录的文件名，用于写入日志消息，此外还可以使用其他活动的日志记录设施。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">logs/pytest-logs.txt</span>
</pre></div>
</div>
<p>有关更多信息，请参见 <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-log_file_date_format">
<span class="sig-name descname"><span class="pre">log_file_date_format</span></span><a class="headerlink" href="#confval-log_file_date_format" title="Link to this definition">¶</a></dt>
<dd><p>设置一个与 <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.strftime()</span></code></a> 兼容的字符串，用于格式化日志文件中的日期。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_file_date_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%Y-%m-%d %H:%M:%S</span>
</pre></div>
</div>
<p>有关更多信息，请参见 <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-log_file_format">
<span class="sig-name descname"><span class="pre">log_file_format</span></span><a class="headerlink" href="#confval-log_file_format" title="Link to this definition">¶</a></dt>
<dd><p>设置一个与 <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> 兼容的字符串，用于格式化重定向到日志文件的日志消息。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_file_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%(asctime)s %(levelname)s %(message)s</span>
</pre></div>
</div>
<p>有关更多信息，请参见 <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-log_file_level">
<span class="sig-name descname"><span class="pre">log_file_level</span></span><a class="headerlink" href="#confval-log_file_level" title="Link to this definition">¶</a></dt>
<dd><p>设置应为日志文件捕获的最低日志消息级别。可以使用整数值或级别名称。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_file_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span>
</pre></div>
</div>
<p>有关更多信息，请参见 <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-log_format">
<span class="sig-name descname"><span class="pre">log_format</span></span><a class="headerlink" href="#confval-log_format" title="Link to this definition">¶</a></dt>
<dd><p>设置一个与 <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> 兼容的字符串，用于格式化捕获的日志消息。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%(asctime)s %(levelname)s %(message)s</span>
</pre></div>
</div>
<p>有关更多信息，请参见 <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-log_level">
<span class="sig-name descname"><span class="pre">log_level</span></span><a class="headerlink" href="#confval-log_level" title="Link to this definition">¶</a></dt>
<dd><p>设置应为日志捕获的最低日志消息级别。可以使用整数值或级别名称。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span>
</pre></div>
</div>
<p>有关更多信息，请参见 <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-markers">
<span class="sig-name descname"><span class="pre">markers</span></span><a class="headerlink" href="#confval-markers" title="Link to this definition">¶</a></dt>
<dd><p>当使用 <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> 或 <code class="docutils literal notranslate"><span class="pre">--strict</span></code> 命令行参数时，
仅允许已知标记——由核心 pytest 或某个插件在代码中定义的标记。</p>
<p>您可以在此设置中列出其他标记，以将其添加到白名单中，
在这种情况下，您可能想将 <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> 添加到 <code class="docutils literal notranslate"><span class="pre">addopts</span></code>
中，以避免未来的回归：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">--strict-markers</span>
<span class="na">markers</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">slow</span>
<span class="w">    </span><span class="na">serial</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>强烈建议使用 <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code>。<code class="docutils literal notranslate"><span class="pre">--strict</span></code> 仅保留用于
向后兼容，可能会使其他人感到困惑，因为它仅适用于
标记，而不适用于其他选项。</p>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-minversion">
<span class="sig-name descname"><span class="pre">minversion</span></span><a class="headerlink" href="#confval-minversion" title="Link to this definition">¶</a></dt>
<dd><p>指定运行测试所需的最低 pytest 版本。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">minversion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">3.0</span><span class="w">  </span><span class="c1"># 如果使用 pytest-2.8 运行，将失败</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-norecursedirs">
<span class="sig-name descname"><span class="pre">norecursedirs</span></span><a class="headerlink" href="#confval-norecursedirs" title="Link to this definition">¶</a></dt>
<dd><p>设置在递归查找测试时要避免的目录基名模式。单个（fnmatch 风格）模式
应用于目录的基名，以决定是否递归进入它。
模式匹配字符:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>*       匹配所有内容
?       匹配任意单个字符
[seq]   匹配 seq 中的任意字符
[!seq]  匹配不在 seq 中的任意字符
</pre></div>
</div>
<p>默认模式为 <code class="docutils literal notranslate"><span class="pre">'*.egg'</span></code>、<code class="docutils literal notranslate"><span class="pre">'.*'</span></code>、<code class="docutils literal notranslate"><span class="pre">'_darcs'</span></code>、<code class="docutils literal notranslate"><span class="pre">'build'</span></code>、
<code class="docutils literal notranslate"><span class="pre">'CVS'</span></code>、<code class="docutils literal notranslate"><span class="pre">'dist'</span></code>、<code class="docutils literal notranslate"><span class="pre">'node_modules'</span></code>、<code class="docutils literal notranslate"><span class="pre">'venv'</span></code>、<code class="docutils literal notranslate"><span class="pre">'{arch}'</span></code>。
设置 <code class="docutils literal notranslate"><span class="pre">norecursedirs</span></code> 会替换默认值。以下是避免某些目录的示例：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">norecursedirs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">.svn _build tmp*</span>
</pre></div>
</div>
<p>这将告诉 <code class="docutils literal notranslate"><span class="pre">pytest</span></code> 不要查看典型的 Subversion 或
sphinx-build 目录或任何以 <code class="docutils literal notranslate"><span class="pre">tmp</span></code> 为前缀的目录。</p>
<p>此外，<code class="docutils literal notranslate"><span class="pre">pytest</span></code> 将尝试智能识别并忽略
虚拟环境。任何被认为是虚拟环境根目录的目录
在测试收集期间将不会被考虑，除非
给定 <code class="docutils literal notranslate"><span class="pre">--collect-in-virtualenv</span></code>。还请注意，<code class="docutils literal notranslate"><span class="pre">norecursedirs</span></code>
优先于 <code class="docutils literal notranslate"><span class="pre">--collect-in-virtualenv</span></code>；例如，如果您打算
在与 <code class="docutils literal notranslate"><span class="pre">'.*'</span></code> 匹配的基础目录中的虚拟环境中运行测试，
您 <em>必须</em> 在使用
<code class="docutils literal notranslate"><span class="pre">--collect-in-virtualenv</span></code> 标志的同时覆盖 <code class="docutils literal notranslate"><span class="pre">norecursedirs</span></code>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-python_classes">
<span class="sig-name descname"><span class="pre">python_classes</span></span><a class="headerlink" href="#confval-python_classes" title="Link to this definition">¶</a></dt>
<dd><p>一个或多个名称前缀或通配符样式的模式，用于确定哪些类
被视为测试收集的对象。通过在模式之间添加空格来搜索多个通配符模式。
默认情况下，pytest 会将任何以 <code class="docutils literal notranslate"><span class="pre">Test</span></code> 开头的类视为测试收集。
下面是一个示例，演示如何从以 <code class="docutils literal notranslate"><span class="pre">Suite</span></code> 结尾的类中收集测试：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">python_classes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">*Suite</span>
</pre></div>
</div>
<p>请注意，<code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> 派生的类始终会被收集
，无论此选项如何，因为使用 <code class="docutils literal notranslate"><span class="pre">unittest</span></code> 自身的收集框架来收集这些测试。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-python_files">
<span class="sig-name descname"><span class="pre">python_files</span></span><a class="headerlink" href="#confval-python_files" title="Link to this definition">¶</a></dt>
<dd><p>一个或多个通配符样式的文件模式，用于确定哪些 Python 文件
被视为测试模块。通过在模式之间添加空格来搜索多个通配符模式：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">python_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">test_*.py check_*.py example_*.py</span>
</pre></div>
</div>
<p>或每行一个：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">python_files</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">test_*.py</span>
<span class="w">    </span><span class="na">check_*.py</span>
<span class="w">    </span><span class="na">example_*.py</span>
</pre></div>
</div>
<p>默认情况下，匹配 <code class="docutils literal notranslate"><span class="pre">test_*.py</span></code> 和 <code class="docutils literal notranslate"><span class="pre">*_test.py</span></code> 的文件将被视为
测试模块。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-python_functions">
<span class="sig-name descname"><span class="pre">python_functions</span></span><a class="headerlink" href="#confval-python_functions" title="Link to this definition">¶</a></dt>
<dd><p>一个或多个名称前缀或通配符模式，用于确定哪些测试函数
和方法被视为测试。通过在模式之间添加空格来搜索多个通配符模式。
默认情况下，pytest 会将任何以 <code class="docutils literal notranslate"><span class="pre">test</span></code> 开头的函数视为测试。
下面是一个示例，演示如何收集以 <code class="docutils literal notranslate"><span class="pre">_test</span></code> 结尾的测试函数和方法：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">python_functions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">*_test</span>
</pre></div>
</div>
<p>请注意，这对存在于 <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> 派生类上的方法没有影响，
因为使用 <code class="docutils literal notranslate"><span class="pre">unittest</span></code> 自身的收集框架来收集这些测试。</p>
<p>请参见 <a class="reference internal" href="../example/pythoncollection.html#change-naming-conventions"><span class="std std-ref">更改命名约定</span></a> 以获取更详细的示例。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-pythonpath">
<span class="sig-name descname"><span class="pre">pythonpath</span></span><a class="headerlink" href="#confval-pythonpath" title="Link to this definition">¶</a></dt>
<dd><p>设置应添加到 Python 搜索路径的目录列表。
目录将被添加到 <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.path" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> 的开头。
类似于 <span class="target" id="index-3"></span><a class="reference external" href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH" title="(in Python v3.13)"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a> 环境变量，这些目录将
包含在 Python 查找导入模块的路径中。
路径相对于 <a class="reference internal" href="customize.html#rootdir"><span class="std std-ref">rootdir</span></a> 目录。
目录在测试会话期间将保留在路径中。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">pythonpath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">src1 src2</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-required_plugins">
<span class="sig-name descname"><span class="pre">required_plugins</span></span><a class="headerlink" href="#confval-required_plugins" title="Link to this definition">¶</a></dt>
<dd><p>一个以空格分隔的插件列表，pytest 运行时必须存在。
插件可以列出，也可以不带版本说明，直接跟在名称后面。
不允许不同版本说明之间有空白。
如果找不到其中任何一个插件，则会发出错误。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">required_plugins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">pytest-django&gt;=3.0.0,&lt;4.0.0 pytest-html pytest-xdist&gt;=1.0.0</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-testpaths">
<span class="sig-name descname"><span class="pre">testpaths</span></span><a class="headerlink" href="#confval-testpaths" title="Link to this definition">¶</a></dt>
<dd><p>设置应在从 <a class="reference internal" href="customize.html#rootdir"><span class="std std-ref">rootdir</span></a> 目录执行 pytest 时
搜索测试的目录列表，当命令行中未指定特定目录、文件或测试 ID 时。
文件系统路径可以使用 shell 风格的通配符，包括递归
<code class="docutils literal notranslate"><span class="pre">**</span></code> 模式。</p>
<p>当所有项目测试都位于已知位置时，这很有用，以加速
测试收集并避免意外拾取不需要的测试。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">testpaths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">testing doc</span>
</pre></div>
</div>
<p>该配置意味着执行：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pytest</span>
</pre></div>
</div>
<p>与执行：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pytest testing doc</span>
</pre></div>
</div>
<p>有相同的实际效果。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-tmp_path_retention_count">
<span class="sig-name descname"><span class="pre">tmp_path_retention_count</span></span><a class="headerlink" href="#confval-tmp_path_retention_count" title="Link to this definition">¶</a></dt>
<dd><p>应根据 <code class="docutils literal notranslate"><span class="pre">tmp_path_retention_policy</span></code> 保留多少个 <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> 目录会话。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">tmp_path_retention_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">3</span>
</pre></div>
</div>
<p>默认值: <code class="docutils literal notranslate"><span class="pre">3</span></code></p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-tmp_path_retention_policy">
<span class="sig-name descname"><span class="pre">tmp_path_retention_policy</span></span><a class="headerlink" href="#confval-tmp_path_retention_policy" title="Link to this definition">¶</a></dt>
<dd><p>控制由 <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> 固件创建的哪些目录被保留，
基于测试结果。</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">all</span></code>: 保留所有测试的目录，无论结果如何。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">failed</span></code>: 仅保留结果为 <code class="docutils literal notranslate"><span class="pre">error</span></code> 或 <code class="docutils literal notranslate"><span class="pre">failed</span></code> 的测试目录。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">none</span></code>: 目录在每个测试结束后始终被删除，无论结果如何。</p></li>
</ul>
</div></blockquote>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">tmp_path_retention_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">all</span>
</pre></div>
</div>
<p>默认值: <code class="docutils literal notranslate"><span class="pre">all</span></code></p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-truncation_limit_chars">
<span class="sig-name descname"><span class="pre">truncation_limit_chars</span></span><a class="headerlink" href="#confval-truncation_limit_chars" title="Link to this definition">¶</a></dt>
<dd><p>控制用于截断断言消息内容的最大字符数。</p>
<p>将值设置为 <code class="docutils literal notranslate"><span class="pre">0</span></code> 将禁用截断的字符限制。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">truncation_limit_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">640</span>
</pre></div>
</div>
<p>pytest 默认将断言消息截断到一定限制，以防止与大量数据比较导致控制台输出过载。</p>
<p>默认值: <code class="docutils literal notranslate"><span class="pre">640</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>如果 pytest 检测到正在 <a class="reference internal" href="../explanation/ci.html#ci-pipelines"><span class="std std-ref">运行于 CI</span></a>，则会自动禁用截断。</p>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-truncation_limit_lines">
<span class="sig-name descname"><span class="pre">truncation_limit_lines</span></span><a class="headerlink" href="#confval-truncation_limit_lines" title="Link to this definition">¶</a></dt>
<dd><p>控制用于截断断言消息内容的最大行数。</p>
<p>将值设置为 <code class="docutils literal notranslate"><span class="pre">0</span></code> 将禁用截断的行限制。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">truncation_limit_lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">8</span>
</pre></div>
</div>
<p>pytest 默认将断言消息截断到一定限制，以防止与大量数据比较导致控制台输出过载。</p>
<p>默认值: <code class="docutils literal notranslate"><span class="pre">8</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>如果 pytest 检测到正在 <a class="reference internal" href="../explanation/ci.html#ci-pipelines"><span class="std std-ref">运行于 CI</span></a>，则会自动禁用截断。</p>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-usefixtures">
<span class="sig-name descname"><span class="pre">usefixtures</span></span><a class="headerlink" href="#confval-usefixtures" title="Link to this definition">¶</a></dt>
<dd><p>将应用于所有测试函数的固件列表；在语义上，这与将 <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.usefixtures</span></code> 标记应用于所有测试函数是相同的。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">usefixtures</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">clean_db</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-verbosity_assertions">
<span class="sig-name descname"><span class="pre">verbosity_assertions</span></span><a class="headerlink" href="#confval-verbosity_assertions" title="Link to this definition">¶</a></dt>
<dd><p>设置专门用于断言相关输出的详细级别，覆盖应用程序的整体级别。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">verbosity_assertions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
</pre></div>
</div>
<p>默认为应用程序的整体详细级别（通过 <code class="docutils literal notranslate"><span class="pre">-v</span></code> 命令行选项）。可以使用特殊值
“auto” 来显式使用全局详细级别。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-verbosity_test_cases">
<span class="sig-name descname"><span class="pre">verbosity_test_cases</span></span><a class="headerlink" href="#confval-verbosity_test_cases" title="Link to this definition">¶</a></dt>
<dd><p>设置专门用于测试用例执行相关输出的详细级别，覆盖应用程序的整体级别。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">verbosity_test_cases</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
</pre></div>
</div>
<p>默认为应用程序的整体详细级别（通过 <code class="docutils literal notranslate"><span class="pre">-v</span></code> 命令行选项）。可以使用特殊值
“auto” 来显式使用全局详细级别。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-xfail_strict">
<span class="sig-name descname"><span class="pre">xfail_strict</span></span><a class="headerlink" href="#confval-xfail_strict" title="Link to this definition">¶</a></dt>
<dd><p>如果设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，则标记为 <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.xfail</span></code> 的测试如果实际成功，默认将导致
测试套件失败。
更多信息，请参见 <a class="reference internal" href="../how-to/skipping.html#xfail-strict-tutorial"><span class="std std-ref">strict 参数</span></a>。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">xfail_strict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>
</pre></div>
</div>
</dd></dl>

</div><div aria-labelledby="tab-33-33-1" class="sphinx-tabs-panel" hidden="true" id="panel-33-33-1" name="33-1" role="tabpanel" tabindex="0"><p>Here is a list of builtin configuration options that may be written in a <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> (or <code class="docutils literal notranslate"><span class="pre">.pytest.ini</span></code>), <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code>, or <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> file, usually located at the root of your repository.</p>
<p>To see each file format in details, see <a class="reference internal" href="customize.html#config-file-formats"><span class="std std-ref">配置文件格式</span></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Usage of <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> is not recommended except for very simple use cases. <code class="docutils literal notranslate"><span class="pre">.cfg</span></code>
files use a different parser than <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> and <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> which might cause hard to track
down problems.
When possible, it is recommended to use the latter files, or <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, to hold your pytest configuration.</p>
</div>
<p>Configuration options may be overwritten in the command-line by using <code class="docutils literal notranslate"><span class="pre">-o/--override-ini</span></code>, which can also be passed multiple times. The expected format is <code class="docutils literal notranslate"><span class="pre">name=value</span></code>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="o">-</span><span class="n">o</span> <span class="n">console_output_style</span><span class="o">=</span><span class="n">classic</span> <span class="o">-</span><span class="n">o</span> <span class="n">cache_dir</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">mycache</span>
</pre></div>
</div>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-0">
<span class="sig-name descname"><span class="pre">addopts</span></span><a class="headerlink" href="#confval-0" title="Link to this definition">¶</a></dt>
<dd><p>Add the specified <code class="docutils literal notranslate"><span class="pre">OPTS</span></code> to the set of command line arguments as if they
had been specified by the user. Example: if you have this ini file content:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">--maxfail=2 -rf</span><span class="w">  </span><span class="c1"># exit after 2 failures, report fail info</span>
</pre></div>
</div>
<p>issuing <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">test_hello.py</span></code> actually means:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest<span class="w"> </span>--maxfail<span class="o">=</span><span class="m">2</span><span class="w"> </span>-rf<span class="w"> </span>test_hello.py
</pre></div>
</div>
<p>Default is to add no options.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-1">
<span class="sig-name descname"><span class="pre">cache_dir</span></span><a class="headerlink" href="#confval-1" title="Link to this definition">¶</a></dt>
<dd><p>Sets the directory where the cache plugin’s content is stored. Default directory is
<code class="docutils literal notranslate"><span class="pre">.pytest_cache</span></code> which is created in <a class="reference internal" href="customize.html#rootdir"><span class="std std-ref">rootdir</span></a>. Directory may be
relative or absolute path. If setting relative path, then directory is created
relative to <a class="reference internal" href="customize.html#rootdir"><span class="std std-ref">rootdir</span></a>. Additionally, a path may contain environment
variables, that will be expanded. For more information about cache plugin
please refer to <a class="reference internal" href="../how-to/cache.html#cache-provider"><span class="std std-ref">如何重新运行失败的测试并在测试运行之间保持状态</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-2">
<span class="sig-name descname"><span class="pre">consider_namespace_packages</span></span><a class="headerlink" href="#confval-2" title="Link to this definition">¶</a></dt>
<dd><p>Controls if pytest should attempt to identify <a class="reference external" href="https://packaging.python.org/en/latest/guides/packaging-namespace-packages">namespace packages</a>
when collecting Python modules. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> if the package you are testing is part of a namespace package.</p>
<p>Only <a class="reference external" href="https://packaging.python.org/en/latest/guides/packaging-namespace-packages/#native-namespace-packages">native namespace packages</a>
are supported, with no plans to support <a class="reference external" href="https://packaging.python.org/en/latest/guides/packaging-namespace-packages/#legacy-namespace-packages">legacy namespace packages</a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 8.1.</span></p>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-3">
<span class="sig-name descname"><span class="pre">console_output_style</span></span><a class="headerlink" href="#confval-3" title="Link to this definition">¶</a></dt>
<dd><p>Sets the console output style while running tests:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">classic</span></code>: classic pytest output.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">progress</span></code>: like classic pytest output, but with a progress indicator.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">progress-even-when-capture-no</span></code>: allows the use of the progress indicator even when <code class="docutils literal notranslate"><span class="pre">capture=no</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count</span></code>: like progress, but shows progress as the number of tests completed instead of a percent.</p></li>
</ul>
<p>The default is <code class="docutils literal notranslate"><span class="pre">progress</span></code>, but you can fallback to <code class="docutils literal notranslate"><span class="pre">classic</span></code> if you prefer or
the new mode is causing unexpected problems:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">console_output_style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">classic</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-4">
<span class="sig-name descname"><span class="pre">disable_test_id_escaping_and_forfeit_all_rights_to_community_support</span></span><a class="headerlink" href="#confval-4" title="Link to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 4.4.</span></p>
</div>
<p>pytest by default escapes any non-ascii characters used in unicode strings
for the parametrization because it has several downsides.
If however you would like to use unicode strings in parametrization
and see them in the terminal as is (non-escaped), use this option
in your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">disable_test_id_escaping_and_forfeit_all_rights_to_community_support</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>
</pre></div>
</div>
<p>Keep in mind however that this might cause unwanted side effects and
even bugs depending on the OS used and plugins currently installed,
so use it at your own risk.</p>
<p>Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>See <a class="reference internal" href="../how-to/parametrize.html#parametrizemark"><span class="std std-ref">&#64;pytest.mark.parametrize: 参数化测试函数</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-5">
<span class="sig-name descname"><span class="pre">doctest_encoding</span></span><a class="headerlink" href="#confval-5" title="Link to this definition">¶</a></dt>
<dd><p>Default encoding to use to decode text files with docstrings.
<a class="reference internal" href="../how-to/doctest.html#doctest"><span class="std std-ref">See how pytest handles doctests</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-6">
<span class="sig-name descname"><span class="pre">doctest_optionflags</span></span><a class="headerlink" href="#confval-6" title="Link to this definition">¶</a></dt>
<dd><p>One or more doctest flag names from the standard <code class="docutils literal notranslate"><span class="pre">doctest</span></code> module.
<a class="reference internal" href="../how-to/doctest.html#doctest"><span class="std std-ref">See how pytest handles doctests</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-7">
<span class="sig-name descname"><span class="pre">empty_parameter_set_mark</span></span><a class="headerlink" href="#confval-7" title="Link to this definition">¶</a></dt>
<dd><p>Allows to pick the action for empty parametersets in parameterization</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">skip</span></code> skips tests with an empty parameterset (default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xfail</span></code> marks tests with an empty parameterset as xfail(run=False)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fail_at_collect</span></code> raises an exception if parametrize collects an empty parameter set</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p># content of pytest.ini
[pytest]
empty_parameter_set_mark = xfail</p>
<p>The default value of this option is planned to change to <code class="docutils literal notranslate"><span class="pre">xfail</span></code> in future releases
as this is considered less error prone, see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3155">#3155</a> for more details.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-8">
<span class="sig-name descname"><span class="pre">faulthandler_timeout</span></span><a class="headerlink" href="#confval-8" title="Link to this definition">¶</a></dt>
<dd><p>Dumps the tracebacks of all threads if a test takes longer than <code class="docutils literal notranslate"><span class="pre">X</span></code> seconds to run (including
fixture setup and teardown). Implemented using the <a class="reference external" href="https://docs.python.org/3/library/faulthandler.html#faulthandler.dump_traceback_later" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">faulthandler.dump_traceback_later()</span></code></a> function,
so all caveats there apply.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">faulthandler_timeout</span><span class="o">=</span><span class="s">5</span>
</pre></div>
</div>
<p>For more information please refer to <a class="reference internal" href="../how-to/failures.html#faulthandler"><span class="std std-ref">故障处理</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-9">
<span class="sig-name descname"><span class="pre">filterwarnings</span></span><a class="headerlink" href="#confval-9" title="Link to this definition">¶</a></dt>
<dd><p>Sets a list of filters and actions that should be taken for matched
warnings. By default all warnings emitted during the test session
will be displayed in a summary at the end of the test session.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">filterwarnings</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">error</span>
<span class="w">    </span><span class="na">ignore</span><span class="o">:</span><span class="s">:DeprecationWarning</span>
</pre></div>
</div>
<p>This tells pytest to ignore deprecation warnings and turn all other warnings
into errors. For more information please refer to <a class="reference internal" href="../how-to/capture-warnings.html#warnings"><span class="std std-ref">如何捕获警告</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-10">
<span class="sig-name descname"><span class="pre">junit_duration_report</span></span><a class="headerlink" href="#confval-10" title="Link to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 4.1.</span></p>
</div>
<p>Configures how durations are recorded into the JUnit XML report:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">total</span></code> (the default): duration times reported include setup, call, and teardown times.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call</span></code>: duration times reported include only call times, excluding setup and teardown.</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">junit_duration_report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">call</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-11">
<span class="sig-name descname"><span class="pre">junit_family</span></span><a class="headerlink" href="#confval-11" title="Link to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 4.2.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 6.1: </span>Default changed to <code class="docutils literal notranslate"><span class="pre">xunit2</span></code>.</p>
</div>
<p>Configures the format of the generated JUnit XML file. The possible options are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">xunit1</span></code> (or <code class="docutils literal notranslate"><span class="pre">legacy</span></code>): produces old style output, compatible with the xunit 1.0 format.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xunit2</span></code>: produces <a class="reference external" href="https://github.com/jenkinsci/xunit-plugin/blob/xunit-2.3.2/src/main/resources/org/jenkinsci/plugins/xunit/types/model/xsd/junit-10.xsd">xunit 2.0 style output</a>, which should be more compatible with latest Jenkins versions.  <strong>This is the default</strong>.</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">junit_family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">xunit2</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-12">
<span class="sig-name descname"><span class="pre">junit_logging</span></span><a class="headerlink" href="#confval-12" title="Link to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 3.5.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 5.4: </span><code class="docutils literal notranslate"><span class="pre">log</span></code>, <code class="docutils literal notranslate"><span class="pre">all</span></code>, <code class="docutils literal notranslate"><span class="pre">out-err</span></code> options added.</p>
</div>
<p>Configures if captured output should be written to the JUnit XML file. Valid values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">log</span></code>: write only <code class="docutils literal notranslate"><span class="pre">logging</span></code> captured output.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system-out</span></code>: write captured <code class="docutils literal notranslate"><span class="pre">stdout</span></code> contents.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system-err</span></code>: write captured <code class="docutils literal notranslate"><span class="pre">stderr</span></code> contents.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out-err</span></code>: write both captured <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> contents.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all</span></code>: write captured <code class="docutils literal notranslate"><span class="pre">logging</span></code>, <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> contents.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">no</span></code> (the default): no captured output is written.</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">junit_logging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">system-out</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-13">
<span class="sig-name descname"><span class="pre">junit_log_passing_tests</span></span><a class="headerlink" href="#confval-13" title="Link to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 4.6.</span></p>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">junit_logging</span> <span class="pre">!=</span> <span class="pre">&quot;no&quot;</span></code>, configures if the captured output should be written
to the JUnit XML file for <strong>passing</strong> tests. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">junit_log_passing_tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-14">
<span class="sig-name descname"><span class="pre">junit_suite_name</span></span><a class="headerlink" href="#confval-14" title="Link to this definition">¶</a></dt>
<dd><p>To set the name of the root test suite xml item, you can configure the <code class="docutils literal notranslate"><span class="pre">junit_suite_name</span></code> option in your config file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">junit_suite_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">my_suite</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-15">
<span class="sig-name descname"><span class="pre">log_auto_indent</span></span><a class="headerlink" href="#confval-15" title="Link to this definition">¶</a></dt>
<dd><p>Allow selective auto-indentation of multiline log messages.</p>
<p>Supports command line option <code class="docutils literal notranslate"><span class="pre">--log-auto-indent</span> <span class="pre">[value]</span></code>
and config option <code class="docutils literal notranslate"><span class="pre">log_auto_indent</span> <span class="pre">=</span> <span class="pre">[value]</span></code> to set the
auto-indentation behavior for all logging.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">[value]</span></code> can be:</dt><dd><ul class="simple">
<li><p>True or “On” - Dynamically auto-indent multiline log messages</p></li>
<li><p>False or “Off” or 0 - Do not auto-indent multiline log messages (the default behavior)</p></li>
<li><p>[positive integer] - auto-indent multiline log messages by [value] spaces</p></li>
</ul>
</dd>
</dl>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_auto_indent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">False</span>
</pre></div>
</div>
<p>Supports passing kwarg <code class="docutils literal notranslate"><span class="pre">extra={&quot;auto_indent&quot;:</span> <span class="pre">[value]}</span></code> to
calls to <code class="docutils literal notranslate"><span class="pre">logging.log()</span></code> to specify auto-indentation behavior for
a specific entry in the log. <code class="docutils literal notranslate"><span class="pre">extra</span></code> kwarg overrides the value specified
on the command line or in the config.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-16">
<span class="sig-name descname"><span class="pre">log_cli</span></span><a class="headerlink" href="#confval-16" title="Link to this definition">¶</a></dt>
<dd><p>Enable log display during test run (also known as <a class="reference internal" href="../how-to/logging.html#live-logs"><span class="std std-ref">“live logging”</span></a>).
The default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_cli</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-17">
<span class="sig-name descname"><span class="pre">log_cli_date_format</span></span><a class="headerlink" href="#confval-17" title="Link to this definition">¶</a></dt>
<dd><p>Sets a <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.strftime()</span></code></a>-compatible string that will be used when formatting dates for live logging.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_cli_date_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%Y-%m-%d %H:%M:%S</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../how-to/logging.html#live-logs"><span class="std std-ref">实时日志</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-18">
<span class="sig-name descname"><span class="pre">log_cli_format</span></span><a class="headerlink" href="#confval-18" title="Link to this definition">¶</a></dt>
<dd><p>Sets a <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a>-compatible string used to format live logging messages.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_cli_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%(asctime)s %(levelname)s %(message)s</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../how-to/logging.html#live-logs"><span class="std std-ref">实时日志</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-19">
<span class="sig-name descname"><span class="pre">log_cli_level</span></span><a class="headerlink" href="#confval-19" title="Link to this definition">¶</a></dt>
<dd><p>Sets the minimum log message level that should be captured for live logging. The integer value or
the names of the levels can be used.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_cli_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../how-to/logging.html#live-logs"><span class="std std-ref">实时日志</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-20">
<span class="sig-name descname"><span class="pre">log_date_format</span></span><a class="headerlink" href="#confval-20" title="Link to this definition">¶</a></dt>
<dd><p>Sets a <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.strftime()</span></code></a>-compatible string that will be used when formatting dates for logging capture.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_date_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%Y-%m-%d %H:%M:%S</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-21">
<span class="sig-name descname"><span class="pre">log_file</span></span><a class="headerlink" href="#confval-21" title="Link to this definition">¶</a></dt>
<dd><p>Sets a file name relative to the current working directory where log messages should be written to, in addition
to the other logging facilities that are active.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">logs/pytest-logs.txt</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-22">
<span class="sig-name descname"><span class="pre">log_file_date_format</span></span><a class="headerlink" href="#confval-22" title="Link to this definition">¶</a></dt>
<dd><p>Sets a <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.strftime()</span></code></a>-compatible string that will be used when formatting dates for the logging file.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_file_date_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%Y-%m-%d %H:%M:%S</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-23">
<span class="sig-name descname"><span class="pre">log_file_format</span></span><a class="headerlink" href="#confval-23" title="Link to this definition">¶</a></dt>
<dd><p>Sets a <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a>-compatible string used to format logging messages redirected to the logging file.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_file_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%(asctime)s %(levelname)s %(message)s</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-24">
<span class="sig-name descname"><span class="pre">log_file_level</span></span><a class="headerlink" href="#confval-24" title="Link to this definition">¶</a></dt>
<dd><p>Sets the minimum log message level that should be captured for the logging file. The integer value or
the names of the levels can be used.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_file_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-25">
<span class="sig-name descname"><span class="pre">log_format</span></span><a class="headerlink" href="#confval-25" title="Link to this definition">¶</a></dt>
<dd><p>Sets a <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a>-compatible string used to format captured logging messages.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%(asctime)s %(levelname)s %(message)s</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-26">
<span class="sig-name descname"><span class="pre">log_level</span></span><a class="headerlink" href="#confval-26" title="Link to this definition">¶</a></dt>
<dd><p>Sets the minimum log message level that should be captured for logging capture. The integer value or
the names of the levels can be used.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">log_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="../how-to/logging.html#logging"><span class="std std-ref">如何管理日志记录</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-27">
<span class="sig-name descname"><span class="pre">markers</span></span><a class="headerlink" href="#confval-27" title="Link to this definition">¶</a></dt>
<dd><p>When the <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> or <code class="docutils literal notranslate"><span class="pre">--strict</span></code> command-line arguments are used,
only known markers - defined in code by core pytest or some plugin - are allowed.</p>
<p>You can list additional markers in this setting to add them to the whitelist,
in which case you probably want to add <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> to <code class="docutils literal notranslate"><span class="pre">addopts</span></code>
to avoid future regressions:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">--strict-markers</span>
<span class="na">markers</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">slow</span>
<span class="w">    </span><span class="na">serial</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The use of <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> is highly preferred. <code class="docutils literal notranslate"><span class="pre">--strict</span></code> was kept for
backward compatibility only and may be confusing for others as it only applies to
markers and not to other options.</p>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-28">
<span class="sig-name descname"><span class="pre">minversion</span></span><a class="headerlink" href="#confval-28" title="Link to this definition">¶</a></dt>
<dd><p>Specifies a minimal pytest version required for running tests.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span>
<span class="k">[pytest]</span>
<span class="na">minversion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">3.0</span><span class="w">  </span><span class="c1"># will fail if we run with pytest-2.8</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-29">
<span class="sig-name descname"><span class="pre">norecursedirs</span></span><a class="headerlink" href="#confval-29" title="Link to this definition">¶</a></dt>
<dd><p>Set the directory basename patterns to avoid when recursing
for test discovery.  The individual (fnmatch-style) patterns are
applied to the basename of a directory to decide if to recurse into it.
Pattern matching characters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>*       matches everything
?       matches any single character
[seq]   matches any character in seq
[!seq]  matches any char not in seq
</pre></div>
</div>
<p>Default patterns are <code class="docutils literal notranslate"><span class="pre">'*.egg'</span></code>, <code class="docutils literal notranslate"><span class="pre">'.*'</span></code>, <code class="docutils literal notranslate"><span class="pre">'_darcs'</span></code>, <code class="docutils literal notranslate"><span class="pre">'build'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'CVS'</span></code>, <code class="docutils literal notranslate"><span class="pre">'dist'</span></code>, <code class="docutils literal notranslate"><span class="pre">'node_modules'</span></code>, <code class="docutils literal notranslate"><span class="pre">'venv'</span></code>, <code class="docutils literal notranslate"><span class="pre">'{arch}'</span></code>.
Setting a <code class="docutils literal notranslate"><span class="pre">norecursedirs</span></code> replaces the default.  Here is an example of
how to avoid certain directories:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">norecursedirs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">.svn _build tmp*</span>
</pre></div>
</div>
<p>This would tell <code class="docutils literal notranslate"><span class="pre">pytest</span></code> to not look into typical subversion or
sphinx-build directories or into any <code class="docutils literal notranslate"><span class="pre">tmp</span></code> prefixed directory.</p>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">pytest</span></code> will attempt to intelligently identify and ignore
a virtualenv.  Any directory deemed to be the root of a virtual environment
will not be considered during test collection unless
<code class="docutils literal notranslate"><span class="pre">--collect-in-virtualenv</span></code> is given.  Note also that <code class="docutils literal notranslate"><span class="pre">norecursedirs</span></code>
takes precedence over <code class="docutils literal notranslate"><span class="pre">--collect-in-virtualenv</span></code>; e.g. if you intend to
run tests in a virtualenv with a base directory that matches <code class="docutils literal notranslate"><span class="pre">'.*'</span></code> you
<em>must</em> override <code class="docutils literal notranslate"><span class="pre">norecursedirs</span></code> in addition to using the
<code class="docutils literal notranslate"><span class="pre">--collect-in-virtualenv</span></code> flag.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-30">
<span class="sig-name descname"><span class="pre">python_classes</span></span><a class="headerlink" href="#confval-30" title="Link to this definition">¶</a></dt>
<dd><p>One or more name prefixes or glob-style patterns determining which classes
are considered for test collection. Search for multiple glob patterns by
adding a space between patterns. By default, pytest will consider any
class prefixed with <code class="docutils literal notranslate"><span class="pre">Test</span></code> as a test collection.  Here is an example of how
to collect tests from classes that end in <code class="docutils literal notranslate"><span class="pre">Suite</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">python_classes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">*Suite</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> derived classes are always collected
regardless of this option, as <code class="docutils literal notranslate"><span class="pre">unittest</span></code>’s own collection framework is used
to collect those tests.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-31">
<span class="sig-name descname"><span class="pre">python_files</span></span><a class="headerlink" href="#confval-31" title="Link to this definition">¶</a></dt>
<dd><p>One or more Glob-style file patterns determining which python files
are considered as test modules. Search for multiple glob patterns by
adding a space between patterns:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">python_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">test_*.py check_*.py example_*.py</span>
</pre></div>
</div>
<p>Or one per line:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">python_files</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">test_*.py</span>
<span class="w">    </span><span class="na">check_*.py</span>
<span class="w">    </span><span class="na">example_*.py</span>
</pre></div>
</div>
<p>By default, files matching <code class="docutils literal notranslate"><span class="pre">test_*.py</span></code> and <code class="docutils literal notranslate"><span class="pre">*_test.py</span></code> will be considered
test modules.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-32">
<span class="sig-name descname"><span class="pre">python_functions</span></span><a class="headerlink" href="#confval-32" title="Link to this definition">¶</a></dt>
<dd><p>One or more name prefixes or glob-patterns determining which test functions
and methods are considered tests. Search for multiple glob patterns by
adding a space between patterns. By default, pytest will consider any
function prefixed with <code class="docutils literal notranslate"><span class="pre">test</span></code> as a test.  Here is an example of how
to collect test functions and methods that end in <code class="docutils literal notranslate"><span class="pre">_test</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">python_functions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">*_test</span>
</pre></div>
</div>
<p>Note that this has no effect on methods that live on a <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code>
derived class, as <code class="docutils literal notranslate"><span class="pre">unittest</span></code>’s own collection framework is used
to collect those tests.</p>
<p>See <a class="reference internal" href="../example/pythoncollection.html#change-naming-conventions"><span class="std std-ref">更改命名约定</span></a> for more detailed examples.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-33">
<span class="sig-name descname"><span class="pre">pythonpath</span></span><a class="headerlink" href="#confval-33" title="Link to this definition">¶</a></dt>
<dd><p>Sets list of directories that should be added to the python search path.
Directories will be added to the head of <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.path" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a>.
Similar to the <span class="target" id="index-4"></span><a class="reference external" href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH" title="(in Python v3.13)"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a> environment variable, the directories will be
included in where Python will look for imported modules.
Paths are relative to the <a class="reference internal" href="customize.html#rootdir"><span class="std std-ref">rootdir</span></a> directory.
Directories remain in path for the duration of the test session.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">pythonpath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">src1 src2</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-34">
<span class="sig-name descname"><span class="pre">required_plugins</span></span><a class="headerlink" href="#confval-34" title="Link to this definition">¶</a></dt>
<dd><p>A space separated list of plugins that must be present for pytest to run.
Plugins can be listed with or without version specifiers directly following
their name. Whitespace between different version specifiers is not allowed.
If any one of the plugins is not found, emit an error.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">required_plugins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">pytest-django&gt;=3.0.0,&lt;4.0.0 pytest-html pytest-xdist&gt;=1.0.0</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-35">
<span class="sig-name descname"><span class="pre">testpaths</span></span><a class="headerlink" href="#confval-35" title="Link to this definition">¶</a></dt>
<dd><p>Sets list of directories that should be searched for tests when
no specific directories, files or test ids are given in the command line when
executing pytest from the <a class="reference internal" href="customize.html#rootdir"><span class="std std-ref">rootdir</span></a> directory.
File system paths may use shell-style wildcards, including the recursive
<code class="docutils literal notranslate"><span class="pre">**</span></code> pattern.</p>
<p>Useful when all project tests are in a known location to speed up
test collection and to avoid picking up undesired tests by accident.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">testpaths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">testing doc</span>
</pre></div>
</div>
<p>This configuration means that executing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pytest</span>
</pre></div>
</div>
<p>has the same practical effects as executing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pytest testing doc</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-36">
<span class="sig-name descname"><span class="pre">tmp_path_retention_count</span></span><a class="headerlink" href="#confval-36" title="Link to this definition">¶</a></dt>
<dd><p>How many sessions should we keep the <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> directories,
according to <code class="docutils literal notranslate"><span class="pre">tmp_path_retention_policy</span></code>.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">tmp_path_retention_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">3</span>
</pre></div>
</div>
<p>Default: <code class="docutils literal notranslate"><span class="pre">3</span></code></p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-37">
<span class="sig-name descname"><span class="pre">tmp_path_retention_policy</span></span><a class="headerlink" href="#confval-37" title="Link to this definition">¶</a></dt>
<dd><p>Controls which directories created by the <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> fixture are kept around,
based on test outcome.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">all</span></code>: retains directories for all tests, regardless of the outcome.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">failed</span></code>: retains directories only for tests with outcome <code class="docutils literal notranslate"><span class="pre">error</span></code> or <code class="docutils literal notranslate"><span class="pre">failed</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">none</span></code>: directories are always removed after each test ends, regardless of the outcome.</p></li>
</ul>
</div></blockquote>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">tmp_path_retention_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">all</span>
</pre></div>
</div>
<p>Default: <code class="docutils literal notranslate"><span class="pre">all</span></code></p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-38">
<span class="sig-name descname"><span class="pre">truncation_limit_chars</span></span><a class="headerlink" href="#confval-38" title="Link to this definition">¶</a></dt>
<dd><p>Controls maximum number of characters to truncate assertion message contents.</p>
<p>Setting value to <code class="docutils literal notranslate"><span class="pre">0</span></code> disables the character limit for truncation.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">truncation_limit_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">640</span>
</pre></div>
</div>
<p>pytest truncates the assert messages to a certain limit by default to prevent comparison with large data to overload the console output.</p>
<p>Default: <code class="docutils literal notranslate"><span class="pre">640</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If pytest detects it is <a class="reference internal" href="../explanation/ci.html#ci-pipelines"><span class="std std-ref">running on CI</span></a>, truncation is disabled automatically.</p>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-39">
<span class="sig-name descname"><span class="pre">truncation_limit_lines</span></span><a class="headerlink" href="#confval-39" title="Link to this definition">¶</a></dt>
<dd><p>Controls maximum number of linesto truncate assertion message contents.</p>
<p>Setting value to <code class="docutils literal notranslate"><span class="pre">0</span></code> disables the lines limit for truncation.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">truncation_limit_lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">8</span>
</pre></div>
</div>
<p>pytest truncates the assert messages to a certain limit by default to prevent comparison with large data to overload the console output.</p>
<p>Default: <code class="docutils literal notranslate"><span class="pre">8</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If pytest detects it is <a class="reference internal" href="../explanation/ci.html#ci-pipelines"><span class="std std-ref">running on CI</span></a>, truncation is disabled automatically.</p>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-40">
<span class="sig-name descname"><span class="pre">usefixtures</span></span><a class="headerlink" href="#confval-40" title="Link to this definition">¶</a></dt>
<dd><p>List of fixtures that will be applied to all test functions; this is semantically the same to apply
the <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.usefixtures</span></code> marker to all test functions.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">usefixtures</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">clean_db</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-41">
<span class="sig-name descname"><span class="pre">verbosity_assertions</span></span><a class="headerlink" href="#confval-41" title="Link to this definition">¶</a></dt>
<dd><p>Set a verbosity level specifically for assertion related output, overriding the application wide level.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">verbosity_assertions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
</pre></div>
</div>
<p>Defaults to application wide verbosity level (via the <code class="docutils literal notranslate"><span class="pre">-v</span></code> command-line option). A special value of
“auto” can be used to explicitly use the global verbosity level.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-42">
<span class="sig-name descname"><span class="pre">verbosity_test_cases</span></span><a class="headerlink" href="#confval-42" title="Link to this definition">¶</a></dt>
<dd><p>Set a verbosity level specifically for test case execution related output, overriding the application wide level.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">verbosity_test_cases</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
</pre></div>
</div>
<p>Defaults to application wide verbosity level (via the <code class="docutils literal notranslate"><span class="pre">-v</span></code> command-line option). A special value of
“auto” can be used to explicitly use the global verbosity level.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-43">
<span class="sig-name descname"><span class="pre">xfail_strict</span></span><a class="headerlink" href="#confval-43" title="Link to this definition">¶</a></dt>
<dd><p>If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, tests marked with <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.xfail</span></code> that actually succeed will by default fail the
test suite.
For more information, see <a class="reference internal" href="../how-to/skipping.html#xfail-strict-tutorial"><span class="std std-ref">strict 参数</span></a>.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">xfail_strict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>
</pre></div>
</div>
</dd></dl>

</div></div>
</section>
<section id="command-line-flags">
<span id="id256"></span><h2>命令行标志<a class="headerlink" href="#command-line-flags" title="Link to this heading">¶</a></h2>
<p><strong>Command-line Flags</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-34-34-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-34-34-0" name="34-0" role="tab" tabindex="0">中文</button><button aria-controls="panel-34-34-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-34-34-1" name="34-1" role="tab" tabindex="-1">英文</button></div><div aria-labelledby="tab-34-34-0" class="sphinx-tabs-panel" id="panel-34-34-0" name="34-0" role="tabpanel" tabindex="0"><p>所有命令行标志可以通过运行 <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--help</span></code> 获取:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest --help
使用: pytest [选项] [文件或目录] [文件或目录] [...]

位置参数:
    文件或目录

一般:
    -k 表达式             仅运行匹配给定子字符串
                        表达式的测试。表达式是一个可在 Python 中评估
                        的表达式，其中所有名称都与测试名称及其父类
                        进行子字符串匹配。
                        示例: -k &#39;test_method or test_other&#39; 匹配所有
                        名称包含 &#39;test_method&#39; 或 &#39;test_other&#39; 的测试函数和类，
                        而 -k &#39;not test_method&#39; 匹配那些名称中不包含
                        &#39;test_method&#39; 的测试。 -k &#39;not test_method
                        and not test_other&#39; 将消除匹配。
                        此外，关键字也会与包含额外名称的类和
                        函数进行匹配，这些额外名称在它们的
                        &#39;extra_keyword_matches&#39; 集中，以及直接
                        分配给它们的函数名称。匹配不区分大小写。
    -m MARKEXPR           仅运行与给定标记表达式匹配的测试。例如:
                        -m &#39;mark1 and not mark2&#39;。
    --markers             显示标记（内置、插件和每个项目的标记）。
    -x, --exitfirst       在第一个错误或失败测试时立即退出
    --fixtures, --funcargs
                        显示可用的固件，按插件出现顺序排序
                        （以 &#39;_&#39; 开头的固件仅在 &#39;-v&#39; 时显示）
    --fixtures-per-test   显示每个测试的固件
    --pdb                 在错误或键盘中断时启动交互式 Python 调试器
    --pdbcls=模块名:类名
                        指定用于 --pdb 的自定义交互式 Python 调试器。
                        例如:
                        --pdbcls=IPython.terminal.debugger:TerminalPdb
    --trace               在运行每个测试时立即中断
    --capture=方法        每个测试的捕获方法：fd|sys|no|tee-sys 之一
    -s                    --capture=no 的快捷方式
    --runxfail            将 xfail 测试的结果报告为未标记
    --lf, --last-failed   仅重新运行上次运行中失败的测试（如果没有失败则全部）
    --ff, --failed-first  运行所有测试，但优先运行上次失败的测试。这
                        可能会重新排序测试，从而导致重复的固件
                        设置/拆卸。
    --nf, --new-first     优先运行新文件中的测试，然后运行按文件修改时间
                        排序的其余测试
    --cache-show=[CACHESHOW]
                        显示缓存内容，不执行收集或
                        测试。可选参数：通配符（默认：&#39;*&#39;）。
    --cache-clear         在测试运行开始时移除所有缓存内容
    --lfnf={all,none}, --last-failed-no-failures={all,none}
                        与 ``--lf`` 一起使用时，决定是否在没有
                        之前（已知）失败或未找到任何缓存的
                        ``lastfailed`` 数据时执行测试。
                        ``all`` （默认）再次运行完整的测试套件。
                        ``none`` 仅发出关于没有已知
                        失败的消息并成功退出。
    --sw, --stepwise      在测试失败时退出，并在下次从上次失败的
                        测试继续
    --sw-skip, --stepwise-skip
                        忽略第一个失败的测试，但在下一个
                        失败的测试上停止。隐式启用 --stepwise。

报告:
    --durations=N         显示 N 个最慢的设置/测试持续时间（N=0 显示全部）
    --durations-min=N     包含在最慢列表中的最小持续时间（秒）。默认: 0.005。
    -v, --verbose         增加详细程度
    --no-header           禁用标题
    --no-summary          禁用摘要
    --no-fold-skipped     不在短摘要中折叠被跳过的测试。
    -q, --quiet           减少详细程度
    --verbosity=VERBOSE   设置详细程度。默认: 0。
    -r 字符              显示额外的测试摘要信息，字符包括：
                        (f)ailed, (E)rror, (s)kipped, (x)failed, (X)passed,
                        (p)assed, (P)assed with output, (a)ll except passed
                        (p/P), 或 (A)ll. (w)arnings 默认启用
                        （见 --disable-warnings），&#39;N&#39; 可用于重置
                        列表。（默认: &#39;fE&#39;）。
    --disable-warnings, --disable-pytest-warnings
                        禁用警告摘要
    -l, --showlocals      在回溯中显示局部变量（默认禁用）
    --no-showlocals       隐藏回溯中的局部变量（否定通过 addopts
                        传递的 --showlocals）
    --tb=样式            回溯打印模式
                        (auto/long/short/line/native/no)
    --xfail-tb            显示 xfail 的回溯（只要 --tb != no）
    --show-capture={no,stdout,stderr,log,all}
                        控制在失败测试中显示捕获的 stdout/stderr/log 的方式。默认：all。
    --full-trace          不截断任何回溯（默认是截断）
    --color=颜色         彩色终端输出（yes/no/auto）
    --code-highlight={yes,no}
                        是否突出显示代码（仅在 --color
                        也启用时）。默认：yes。
    --pastebin=模式       将失败|全部信息发送到 bpaste.net pastebin 服务
    --junit-xml=路径      在给定路径创建 junit-xml 风格的报告文件
    --junit-prefix=字符串 在 junit-xml 输出中为类名添加前缀

pytest-warnings:
    -W PYTHONWARNINGS, --pythonwarnings=PYTHONWARNINGS
                        设置要报告的警告，参见 Python 自身的 -W 选项
    --maxfail=num         在第一个 num 次失败或错误后退出
    --strict-config       在解析配置文件的 `pytest` 部分时遇到的任何警告都会引发错误
    --strict-markers      在配置文件的 `markers` 部分未注册的标记将引发错误
    --strict              （已弃用）--strict-markers 的别名
    -c FILE, --config-file=FILE
                        从 `FILE` 加载配置，而不是尝试定位隐式配置文件之一。
    --continue-on-collection-errors
                        即使发生收集错误也强制执行测试
    --rootdir=ROOTDIR     定义测试的根目录。可以是相对路径：
                        &#39;root_dir&#39;，&#39;./root_dir&#39;，
                        &#39;root_dir/another_dir/&#39;；绝对路径：
                        &#39;/home/user/root_dir&#39;；带变量的路径：
                        &#39;$HOME/root_dir&#39;。

收集:
    --collect-only, --co  仅收集测试，不执行它们
    --pyargs              尝试将所有参数解释为 Python 包
    --ignore=path         在收集期间忽略路径（允许多次）
    --ignore-glob=path    在收集期间忽略路径模式（允许多次）
    --deselect=nodeid_prefix
                        在收集期间取消选择项目（通过节点 ID 前缀）
                        （允许多次）
    --confcutdir=dir      仅加载与指定目录相对的 conftest.py
    --noconftest          不加载任何 conftest.py 文件
    --keep-duplicates     保留重复的测试
    --collect-in-virtualenv
                        不忽略本地虚拟环境目录中的测试
    --import-mode={prepend,append,importlib}
                        导入测试模块和 conftest 文件时添加到 sys.path。
                        默认：prepend。
    --doctest-modules     运行所有 .py 模块中的文档测试
    --doctest-report={none,cdiff,ndiff,udiff,only_first_failure}
                        为文档测试失败选择另一种输出格式
    --doctest-glob=pat    文档测试文件匹配模式，默认：test*.txt
    --doctest-ignore-import-errors
                        忽略文档测试收集错误
    --doctest-continue-on-failure
                        对于给定的文档测试，在第一次失败后继续运行

测试会话调试和配置:
    --basetemp=dir        此次测试运行的基础临时目录。
                        （警告：如果该目录存在将被删除。）
    -V, --version         显示 pytest 版本和插件信息。重复给出时，还会显示插件信息。
    -h, --help            显示帮助信息和配置信息
    -p name               早期加载给定插件模块名称或入口点
                        （允许多次）。要避免加载插件，使用
                        `no:` 前缀，例如 `no:doctest`。
    --trace-config        跟踪 conftest.py 文件的考虑
    --debug=[DEBUG_FILE_NAME]
                        将内部跟踪调试信息存储在此日志文件中。该文件以 &#39;w&#39; 打开并被截断，
                        请小心使用。默认：pytestdebug.log。
    -o OVERRIDE_INI, --override-ini=OVERRIDE_INI
                        使用 &quot;option=value&quot; 风格覆盖 ini 选项，例如：
                        `-o xfail_strict=True -o cache_dir=cache`。
    --assert=模式         控制断言调试工具。
                        &#39;plain&#39; 不执行任何断言调试。
                        &#39;rewrite&#39;（默认）在导入测试模块时重写断言语句以提供断言
                        表达式信息。
    --setup-only          仅设置固件，不执行测试
    --setup-show          在执行测试时显示固件的设置
    --setup-plan          显示将要执行的固件和测试，但不执行任何内容

logging:
    --log-level=LEVEL     捕获/显示的消息级别。默认情况下未设置，因此取决于根/父日志处理程序的有效级别，默认为 &quot;WARNING&quot;。
    --log-format=LOG_FORMAT
                        日志模块使用的日志格式
    --log-date-format=LOG_DATE_FORMAT
                        日志模块使用的日期格式
    --log-cli-level=LOG_CLI_LEVEL
                        CLI 日志级别
    --log-cli-format=LOG_CLI_FORMAT
                        日志模块使用的日志格式
    --log-cli-date-format=LOG_CLI_DATE_FORMAT
                        日志模块使用的日期格式
    --log-file=LOG_FILE   日志将写入的文件路径
    --log-file-mode={w,a}
                        日志文件打开模式
    --log-file-level=LOG_FILE_LEVEL
                        日志文件的日志级别
    --log-file-format=LOG_FILE_FORMAT
                        日志模块使用的日志格式
    --log-file-date-format=LOG_FILE_DATE_FORMAT
                        日志模块使用的日期格式
    --log-auto-indent=LOG_AUTO_INDENT
                        自动缩进传递给日志模块的多行消息。接受 true|on、false|off 或整数。
    --log-disable=LOGGER_DISABLE
                        通过名称禁用日志记录器。可以多次传递。

[pytest] ini 选项在找到的第一个 pytest.ini|tox.ini|setup.cfg|pyproject.toml 文件中：

    markers (linelist):   为测试函数注册新标记
    empty_parameter_set_mark (string):
                        空参数集的默认标记
    norecursedirs (args): 避免递归的目录模式
    testpaths (args):     在命令行未给出文件或目录时搜索测试的目录
    filterwarnings (linelist):
                        每行指定一个模式用于
                        warnings.filterwarnings。在 -W/--pythonwarnings 之后处理。
    consider_namespace_packages (bool):
                        在导入期间解析模块名称时考虑命名空间包
    usefixtures (args):   要与此项目一起使用的默认固件列表
    python_files (args):  Python 测试模块发现的 glob 样式文件模式
    python_classes (args):
                        Python 测试类发现的前缀或 glob 名称
    python_functions (args):
                        Python 测试函数和方法发现的前缀或 glob 名称
    disable_test_id_escaping_and_forfeit_all_rights_to_community_support (bool):
                        禁用字符串转义非 ASCII 字符，可能导致不必要的副作用（自担风险使用）
    console_output_style (string):
                        控制台输出：“经典”或带有附加进度信息（“进度” (百分比) | “计数” | “即使捕获=no 也进度” (强制即使捕获=no 也显示进度)
    verbosity_test_cases (string):
                        为测试用例执行指定一个详细程度，覆盖主级别。更高的级别将提供有关每个执行测试用例的更多详细信息。
    xfail_strict (bool):  当未明确给出时，xfail 标记的严格参数的默认值（默认：False）
    tmp_path_retention_count (string):
                        根据 `tmp_path_retention_policy`，应保留多少个 `tmp_path` 目录。
    tmp_path_retention_policy (string):
                        控制基于测试结果保留哪些由 `tmp_path` 固件创建的目录。
                        （all/failed/none）
    enable_assertion_pass_hook (bool):
                        启用 pytest_assertion_pass 钩子。确保删除任何先前生成的 pyc 缓存文件。
    verbosity_assertions (string):
                        为断言指定一个详细程度，覆盖主级别。更高的级别将在断言失败时提供更详细的解释。
    junit_suite_name (string):
                        JUnit 报告的测试套件名称
    junit_logging (string):
                        将捕获的日志消息写入 JUnit 报告：可以是 no|log|system-out|system-err|out-err|all
    junit_log_passing_tests (bool):
                        捕获通过测试的日志信息以便写入 JUnit 报告：
    junit_duration_report (string):
                        报告的持续时间：可以是 total|call
    junit_family (string):
                        发出 XML 的模式：可以是 legacy|xunit1|xunit2
    doctest_optionflags (args):
                        文档测试的选项标志
    doctest_encoding (string):
                        文档测试文件使用的编码
    cache_dir (string):   缓存目录路径
    log_level (string):   --log-level 的默认值
    log_format (string):  --log-format 的默认值
    log_date_format (string):
                        --log-date-format 的默认值
    log_cli (bool):       在测试运行期间启用日志显示（也称为“实时日志”）
    log_cli_level (string):
                        --log-cli-level 的默认值
    log_cli_format (string):
                        --log-cli-format 的默认值
    log_cli_date_format (string):
                        --log-cli-date-format 的默认值
    log_file (string):    --log-file 的默认值
    log_file_mode (string):
                        --log-file-mode 的默认值
    log_file_level (string):
                        --log-file-level 的默认值
    log_file_format (string):
                        --log-file-format 的默认值
    log_file_date_format (string):
                        --log-file-date-format 的默认值
    log_auto_indent (string):
                        --log-auto-indent 的默认值
    pythonpath (paths):   添加路径到 sys.path
    faulthandler_timeout (string):
                        如果测试运行超过 TIMEOUT 秒，转储所有线程的回溯信息
    addopts (args):       附加命令行选项
    minversion (string):  最小要求的 pytest 版本
    required_plugins (args):
                        pytest 运行时必须存在的插件

环境变量:
    CI                       设置时（无论值如何），pytest 知道它正在 CI 进程中运行，并且不会截断摘要信息
    BUILD_NUMBER             等同于 CI
    PYTEST_ADDOPTS           附加命令行选项
    PYTEST_PLUGINS           启动时加载的逗号分隔插件
    PYTEST_DISABLE_PLUGIN_AUTOLOAD 设置为禁用插件自动加载
    PYTEST_DEBUG             设置以启用 pytest 内部的调试跟踪

要查看可用的标记，请输入：pytest --markers
要查看可用的固件，请输入：pytest --fixtures
（根据指定的 file_or_dir 或当前目录显示，如果未指定；以&#39;_&#39;开头的固件仅在使用 &#39;-v&#39; 选项时显示）
</pre></div>
</div>
</div><div aria-labelledby="tab-34-34-1" class="sphinx-tabs-panel" hidden="true" id="panel-34-34-1" name="34-1" role="tabpanel" tabindex="0"><p>All the command-line flags can be obtained by running <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--help</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest --help
usage: pytest [options] [file_or_dir] [file_or_dir] [...]

positional arguments:
    file_or_dir

general:
    -k EXPRESSION         Only run tests which match the given substring
                        expression. An expression is a Python evaluable
                        expression where all names are substring-matched
                        against test names and their parent classes.
                        Example: -k &#39;test_method or test_other&#39; matches all
                        test functions and classes whose name contains
                        &#39;test_method&#39; or &#39;test_other&#39;, while -k &#39;not
                        test_method&#39; matches those that don&#39;t contain
                        &#39;test_method&#39; in their names. -k &#39;not test_method
                        and not test_other&#39; will eliminate the matches.
                        Additionally keywords are matched to classes and
                        functions containing extra names in their
                        &#39;extra_keyword_matches&#39; set, as well as functions
                        which have names assigned directly to them. The
                        matching is case-insensitive.
    -m MARKEXPR           Only run tests matching given mark expression. For
                        example: -m &#39;mark1 and not mark2&#39;.
    --markers             show markers (builtin, plugin and per-project ones).
    -x, --exitfirst       Exit instantly on first error or failed test
    --fixtures, --funcargs
                        Show available fixtures, sorted by plugin appearance
                        (fixtures with leading &#39;_&#39; are only shown with &#39;-v&#39;)
    --fixtures-per-test   Show fixtures per test
    --pdb                 Start the interactive Python debugger on errors or
                        KeyboardInterrupt
    --pdbcls=modulename:classname
                        Specify a custom interactive Python debugger for use
                        with --pdb.For example:
                        --pdbcls=IPython.terminal.debugger:TerminalPdb
    --trace               Immediately break when running each test
    --capture=method      Per-test capturing method: one of fd|sys|no|tee-sys
    -s                    Shortcut for --capture=no
    --runxfail            Report the results of xfail tests as if they were
                        not marked
    --lf, --last-failed   Rerun only the tests that failed at the last run (or
                        all if none failed)
    --ff, --failed-first  Run all tests, but run the last failures first. This
                        may re-order tests and thus lead to repeated fixture
                        setup/teardown.
    --nf, --new-first     Run tests from new files first, then the rest of the
                        tests sorted by file mtime
    --cache-show=[CACHESHOW]
                        Show cache contents, don&#39;t perform collection or
                        tests. Optional argument: glob (default: &#39;*&#39;).
    --cache-clear         Remove all cache contents at start of test run
    --lfnf={all,none}, --last-failed-no-failures={all,none}
                        With ``--lf``, determines whether to execute tests
                        when there are no previously (known) failures or
                        when no cached ``lastfailed`` data was found.
                        ``all`` (the default) runs the full test suite
                        again. ``none`` just emits a message about no known
                        failures and exits successfully.
    --sw, --stepwise      Exit on test failure and continue from last failing
                        test next time
    --sw-skip, --stepwise-skip
                        Ignore the first failing test but stop on the next
                        failing test. Implicitly enables --stepwise.

Reporting:
    --durations=N         Show N slowest setup/test durations (N=0 for all)
    --durations-min=N     Minimal duration in seconds for inclusion in slowest
                        list. Default: 0.005.
    -v, --verbose         Increase verbosity
    --no-header           Disable header
    --no-summary          Disable summary
    --no-fold-skipped     Do not fold skipped tests in short summary.
    -q, --quiet           Decrease verbosity
    --verbosity=VERBOSE   Set verbosity. Default: 0.
    -r chars              Show extra test summary info as specified by chars:
                        (f)ailed, (E)rror, (s)kipped, (x)failed, (X)passed,
                        (p)assed, (P)assed with output, (a)ll except passed
                        (p/P), or (A)ll. (w)arnings are enabled by default
                        (see --disable-warnings), &#39;N&#39; can be used to reset
                        the list. (default: &#39;fE&#39;).
    --disable-warnings, --disable-pytest-warnings
                        Disable warnings summary
    -l, --showlocals      Show locals in tracebacks (disabled by default)
    --no-showlocals       Hide locals in tracebacks (negate --showlocals
                        passed through addopts)
    --tb=style            Traceback print mode
                        (auto/long/short/line/native/no)
    --xfail-tb            Show tracebacks for xfail (as long as --tb != no)
    --show-capture={no,stdout,stderr,log,all}
                        Controls how captured stdout/stderr/log is shown on
                        failed tests. Default: all.
    --full-trace          Don&#39;t cut any tracebacks (default is to cut)
    --color=color         Color terminal output (yes/no/auto)
    --code-highlight={yes,no}
                        Whether code should be highlighted (only if --color
                        is also enabled). Default: yes.
    --pastebin=mode       Send failed|all info to bpaste.net pastebin service
    --junit-xml=path      Create junit-xml style report file at given path
    --junit-prefix=str    Prepend prefix to classnames in junit-xml output

pytest-warnings:
    -W PYTHONWARNINGS, --pythonwarnings=PYTHONWARNINGS
                        Set which warnings to report, see -W option of
                        Python itself
    --maxfail=num         Exit after first num failures or errors
    --strict-config       Any warnings encountered while parsing the `pytest`
                        section of the configuration file raise errors
    --strict-markers      Markers not registered in the `markers` section of
                        the configuration file raise errors
    --strict              (Deprecated) alias to --strict-markers
    -c FILE, --config-file=FILE
                        Load configuration from `FILE` instead of trying to
                        locate one of the implicit configuration files.
    --continue-on-collection-errors
                        Force test execution even if collection errors occur
    --rootdir=ROOTDIR     Define root directory for tests. Can be relative
                        path: &#39;root_dir&#39;, &#39;./root_dir&#39;,
                        &#39;root_dir/another_dir/&#39;; absolute path:
                        &#39;/home/user/root_dir&#39;; path with variables:
                        &#39;$HOME/root_dir&#39;.

collection:
    --collect-only, --co  Only collect tests, don&#39;t execute them
    --pyargs              Try to interpret all arguments as Python packages
    --ignore=path         Ignore path during collection (multi-allowed)
    --ignore-glob=path    Ignore path pattern during collection (multi-
                        allowed)
    --deselect=nodeid_prefix
                        Deselect item (via node id prefix) during collection
                        (multi-allowed)
    --confcutdir=dir      Only load conftest.py&#39;s relative to specified dir
    --noconftest          Don&#39;t load any conftest.py files
    --keep-duplicates     Keep duplicate tests
    --collect-in-virtualenv
                        Don&#39;t ignore tests in a local virtualenv directory
    --import-mode={prepend,append,importlib}
                        Prepend/append to sys.path when importing test
                        modules and conftest files. Default: prepend.
    --doctest-modules     Run doctests in all .py modules
    --doctest-report={none,cdiff,ndiff,udiff,only_first_failure}
                        Choose another output format for diffs on doctest
                        failure
    --doctest-glob=pat    Doctests file matching pattern, default: test*.txt
    --doctest-ignore-import-errors
                        Ignore doctest collection errors
    --doctest-continue-on-failure
                        For a given doctest, continue to run after the first
                        failure

test session debugging and configuration:
    --basetemp=dir        Base temporary directory for this test run.
                        (Warning: this directory is removed if it exists.)
    -V, --version         Display pytest version and information about
                        plugins. When given twice, also display information
                        about plugins.
    -h, --help            Show help message and configuration info
    -p name               Early-load given plugin module name or entry point
                        (multi-allowed). To avoid loading of plugins, use
                        the `no:` prefix, e.g. `no:doctest`.
    --trace-config        Trace considerations of conftest.py files
    --debug=[DEBUG_FILE_NAME]
                        Store internal tracing debug information in this log
                        file. This file is opened with &#39;w&#39; and truncated as
                        a result, care advised. Default: pytestdebug.log.
    -o OVERRIDE_INI, --override-ini=OVERRIDE_INI
                        Override ini option with &quot;option=value&quot; style, e.g.
                        `-o xfail_strict=True -o cache_dir=cache`.
    --assert=MODE         Control assertion debugging tools.
                        &#39;plain&#39; performs no assertion debugging.
                        &#39;rewrite&#39; (the default) rewrites assert statements
                        in test modules on import to provide assert
                        expression information.
    --setup-only          Only setup fixtures, do not execute tests
    --setup-show          Show setup of fixtures while executing tests
    --setup-plan          Show what fixtures and tests would be executed but
                        don&#39;t execute anything

logging:
    --log-level=LEVEL     Level of messages to catch/display. Not set by
                        default, so it depends on the root/parent log
                        handler&#39;s effective level, where it is &quot;WARNING&quot; by
                        default.
    --log-format=LOG_FORMAT
                        Log format used by the logging module
    --log-date-format=LOG_DATE_FORMAT
                        Log date format used by the logging module
    --log-cli-level=LOG_CLI_LEVEL
                        CLI logging level
    --log-cli-format=LOG_CLI_FORMAT
                        Log format used by the logging module
    --log-cli-date-format=LOG_CLI_DATE_FORMAT
                        Log date format used by the logging module
    --log-file=LOG_FILE   Path to a file when logging will be written to
    --log-file-mode={w,a}
                        Log file open mode
    --log-file-level=LOG_FILE_LEVEL
                        Log file logging level
    --log-file-format=LOG_FILE_FORMAT
                        Log format used by the logging module
    --log-file-date-format=LOG_FILE_DATE_FORMAT
                        Log date format used by the logging module
    --log-auto-indent=LOG_AUTO_INDENT
                        Auto-indent multiline messages passed to the logging
                        module. Accepts true|on, false|off or an integer.
    --log-disable=LOGGER_DISABLE
                        Disable a logger by name. Can be passed multiple
                        times.

[pytest] ini-options in the first pytest.ini|tox.ini|setup.cfg|pyproject.toml file found:

    markers (linelist):   Register new markers for test functions
    empty_parameter_set_mark (string):
                        Default marker for empty parametersets
    norecursedirs (args): Directory patterns to avoid for recursion
    testpaths (args):     Directories to search for tests when no files or
                        directories are given on the command line
    filterwarnings (linelist):
                        Each line specifies a pattern for
                        warnings.filterwarnings. Processed after
                        -W/--pythonwarnings.
    consider_namespace_packages (bool):
                        Consider namespace packages when resolving module
                        names during import
    usefixtures (args):   List of default fixtures to be used with this
                        project
    python_files (args):  Glob-style file patterns for Python test module
                        discovery
    python_classes (args):
                        Prefixes or glob names for Python test class
                        discovery
    python_functions (args):
                        Prefixes or glob names for Python test function and
                        method discovery
    disable_test_id_escaping_and_forfeit_all_rights_to_community_support (bool):
                        Disable string escape non-ASCII characters, might
                        cause unwanted side effects(use at your own risk)
    console_output_style (string):
                        Console output: &quot;classic&quot;, or with additional
                        progress information (&quot;progress&quot; (percentage) |
                        &quot;count&quot; | &quot;progress-even-when-capture-no&quot; (forces
                        progress even when capture=no)
    verbosity_test_cases (string):
                        Specify a verbosity level for test case execution,
                        overriding the main level. Higher levels will
                        provide more detailed information about each test
                        case executed.
    xfail_strict (bool):  Default for the strict parameter of xfail markers
                        when not given explicitly (default: False)
    tmp_path_retention_count (string):
                        How many sessions should we keep the `tmp_path`
                        directories, according to
                        `tmp_path_retention_policy`.
    tmp_path_retention_policy (string):
                        Controls which directories created by the `tmp_path`
                        fixture are kept around, based on test outcome.
                        (all/failed/none)
    enable_assertion_pass_hook (bool):
                        Enables the pytest_assertion_pass hook. Make sure to
                        delete any previously generated pyc cache files.
    verbosity_assertions (string):
                        Specify a verbosity level for assertions, overriding
                        the main level. Higher levels will provide more
                        detailed explanation when an assertion fails.
    junit_suite_name (string):
                        Test suite name for JUnit report
    junit_logging (string):
                        Write captured log messages to JUnit report: one of
                        no|log|system-out|system-err|out-err|all
    junit_log_passing_tests (bool):
                        Capture log information for passing tests to JUnit
                        report:
    junit_duration_report (string):
                        Duration time to report: one of total|call
    junit_family (string):
                        Emit XML for schema: one of legacy|xunit1|xunit2
    doctest_optionflags (args):
                        Option flags for doctests
    doctest_encoding (string):
                        Encoding used for doctest files
    cache_dir (string):   Cache directory path
    log_level (string):   Default value for --log-level
    log_format (string):  Default value for --log-format
    log_date_format (string):
                        Default value for --log-date-format
    log_cli (bool):       Enable log display during test run (also known as
                        &quot;live logging&quot;)
    log_cli_level (string):
                        Default value for --log-cli-level
    log_cli_format (string):
                        Default value for --log-cli-format
    log_cli_date_format (string):
                        Default value for --log-cli-date-format
    log_file (string):    Default value for --log-file
    log_file_mode (string):
                        Default value for --log-file-mode
    log_file_level (string):
                        Default value for --log-file-level
    log_file_format (string):
                        Default value for --log-file-format
    log_file_date_format (string):
                        Default value for --log-file-date-format
    log_auto_indent (string):
                        Default value for --log-auto-indent
    pythonpath (paths):   Add paths to sys.path
    faulthandler_timeout (string):
                        Dump the traceback of all threads if a test takes
                        more than TIMEOUT seconds to finish
    addopts (args):       Extra command line options
    minversion (string):  Minimally required pytest version
    required_plugins (args):
                        Plugins that must be present for pytest to run

Environment variables:
    CI                       When set (regardless of value), pytest knows it is running in a CI process and does not truncate summary info
    BUILD_NUMBER             Equivalent to CI
    PYTEST_ADDOPTS           Extra command line options
    PYTEST_PLUGINS           Comma-separated plugins to load during startup
    PYTEST_DISABLE_PLUGIN_AUTOLOAD Set to disable plugin auto-loading
    PYTEST_DEBUG             Set to enable debug tracing of pytest&#39;s internals


to see available markers type: pytest --markers
to see available fixtures type: pytest --fixtures
(shown according to specified file_or_dir or current dir if not specified; fixtures with leading &#39;_&#39; are only shown with the &#39;-v&#39; option
</pre></div>
</div>
</div></div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="fixtures.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Fixtures 参考</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">参考指南</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2015, holger krekel and pytest-dev team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">API 参考</a><ul>
<li><a class="reference internal" href="#id1">常量</a><ul>
<li><a class="reference internal" href="#pytest-version">pytest.__version__</a></li>
<li><a class="reference internal" href="#pytest-version-tuple">pytest.version_tuple</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">函数</a><ul>
<li><a class="reference internal" href="#pytest-approx">pytest.approx</a></li>
<li><a class="reference internal" href="#pytest-fail">pytest.fail</a></li>
<li><a class="reference internal" href="#pytest-skip">pytest.skip</a></li>
<li><a class="reference internal" href="#pytest-importorskip">pytest.importorskip</a></li>
<li><a class="reference internal" href="#pytest-xfail">pytest.xfail</a></li>
<li><a class="reference internal" href="#pytest-exit">pytest.exit</a></li>
<li><a class="reference internal" href="#pytest-main">pytest.main</a></li>
<li><a class="reference internal" href="#pytest-param">pytest.param</a></li>
<li><a class="reference internal" href="#pytest-raises">pytest.raises</a></li>
<li><a class="reference internal" href="#pytest-deprecated-call">pytest.deprecated_call</a></li>
<li><a class="reference internal" href="#pytest-register-assert-rewrite">pytest.register_assert_rewrite</a></li>
<li><a class="reference internal" href="#pytest-warns">pytest.warns</a></li>
<li><a class="reference internal" href="#pytest-freeze-includes">pytest.freeze_includes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#marks">Marks</a><ul>
<li><a class="reference internal" href="#pytest-mark-filterwarnings">pytest.mark.filterwarnings</a></li>
<li><a class="reference internal" href="#pytest-mark-parametrize">pytest.mark.parametrize</a></li>
<li><a class="reference internal" href="#pytest-mark-skip">pytest.mark.skip</a></li>
<li><a class="reference internal" href="#pytest-mark-skipif">pytest.mark.skipif</a></li>
<li><a class="reference internal" href="#pytest-mark-usefixtures">pytest.mark.usefixtures</a></li>
<li><a class="reference internal" href="#pytest-mark-xfail">pytest.mark.xfail</a></li>
<li><a class="reference internal" href="#id9">自定义marks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fixtures">Fixtures</a><ul>
<li><a class="reference internal" href="#pytest-fixture">&#64;pytest.fixture</a></li>
<li><a class="reference internal" href="#capfd">capfd</a></li>
<li><a class="reference internal" href="#capfdbinary">capfdbinary</a></li>
<li><a class="reference internal" href="#caplog">caplog</a></li>
<li><a class="reference internal" href="#capsys">capsys</a></li>
<li><a class="reference internal" href="#capsysbinary">capsysbinary</a></li>
<li><a class="reference internal" href="#config-cache">config.cache</a></li>
<li><a class="reference internal" href="#doctest-namespace">doctest_namespace</a></li>
<li><a class="reference internal" href="#monkeypatch">monkeypatch</a></li>
<li><a class="reference internal" href="#pytestconfig">pytestconfig</a></li>
<li><a class="reference internal" href="#pytester">pytester</a></li>
<li><a class="reference internal" href="#record-property">record_property</a></li>
<li><a class="reference internal" href="#record-testsuite-property">record_testsuite_property</a></li>
<li><a class="reference internal" href="#recwarn">recwarn</a></li>
<li><a class="reference internal" href="#request">request</a></li>
<li><a class="reference internal" href="#testdir">testdir</a></li>
<li><a class="reference internal" href="#tmp-path">tmp_path</a></li>
<li><a class="reference internal" href="#tmp-path-factory">tmp_path_factory</a></li>
<li><a class="reference internal" href="#tmpdir">tmpdir</a></li>
<li><a class="reference internal" href="#tmpdir-factory">tmpdir_factory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hooks">Hooks</a><ul>
<li><a class="reference internal" href="#pytest-hookimpl">&#64;pytest.hookimpl</a></li>
<li><a class="reference internal" href="#pytest-hookspec">&#64;pytest.hookspec</a></li>
<li><a class="reference internal" href="#id95">引导钩子</a></li>
<li><a class="reference internal" href="#initialization-hooks">初始化钩子</a></li>
<li><a class="reference internal" href="#id126">收集钩子</a></li>
<li><a class="reference internal" href="#id160">测试运行钩子</a></li>
<li><a class="reference internal" href="#id186">报告钩子</a></li>
<li><a class="reference internal" href="#id238">调试/交互钩子</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id244">收集树对象</a><ul>
<li><a class="reference internal" href="#node">Node</a></li>
<li><a class="reference internal" href="#collector">Collector</a></li>
<li><a class="reference internal" href="#item">Item</a></li>
<li><a class="reference internal" href="#file">File</a></li>
<li><a class="reference internal" href="#fscollector">FSCollector</a></li>
<li><a class="reference internal" href="#session">Session</a></li>
<li><a class="reference internal" href="#package">Package</a></li>
<li><a class="reference internal" href="#module">Module</a></li>
<li><a class="reference internal" href="#class">Class</a></li>
<li><a class="reference internal" href="#function">Function</a></li>
<li><a class="reference internal" href="#functiondefinition">FunctionDefinition</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id245">对象</a><ul>
<li><a class="reference internal" href="#callinfo">CallInfo</a></li>
<li><a class="reference internal" href="#collectreport">CollectReport</a></li>
<li><a class="reference internal" href="#config">Config</a></li>
<li><a class="reference internal" href="#dir">Dir</a></li>
<li><a class="reference internal" href="#directory">Directory</a></li>
<li><a class="reference internal" href="#exceptioninfo">ExceptionInfo</a></li>
<li><a class="reference internal" href="#exitcode">ExitCode</a></li>
<li><a class="reference internal" href="#fixturedef">FixtureDef</a></li>
<li><a class="reference internal" href="#markdecorator">MarkDecorator</a></li>
<li><a class="reference internal" href="#markgenerator">MarkGenerator</a></li>
<li><a class="reference internal" href="#mark">Mark</a></li>
<li><a class="reference internal" href="#metafunc">Metafunc</a></li>
<li><a class="reference internal" href="#parser">Parser</a></li>
<li><a class="reference internal" href="#optiongroup">OptionGroup</a></li>
<li><a class="reference internal" href="#pytestpluginmanager">PytestPluginManager</a></li>
<li><a class="reference internal" href="#terminalreporter">TerminalReporter</a></li>
<li><a class="reference internal" href="#testreport">TestReport</a></li>
<li><a class="reference internal" href="#testshortlogreport">TestShortLogReport</a></li>
<li><a class="reference internal" href="#result">Result</a></li>
<li><a class="reference internal" href="#stash">Stash</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id246">全局变量</a></li>
<li><a class="reference internal" href="#id251">环境变量</a></li>
<li><a class="reference internal" href="#id253">异常</a><ul>
<li><a class="reference internal" href="#pytest.UsageError"><code class="docutils literal notranslate"><span class="pre">UsageError</span></code></a></li>
<li><a class="reference internal" href="#pytest.FixtureLookupError"><code class="docutils literal notranslate"><span class="pre">FixtureLookupError</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#warnings-ref">告警</a><ul>
<li><a class="reference internal" href="#pytest.PytestWarning"><code class="docutils literal notranslate"><span class="pre">PytestWarning</span></code></a></li>
<li><a class="reference internal" href="#pytest.PytestAssertRewriteWarning"><code class="docutils literal notranslate"><span class="pre">PytestAssertRewriteWarning</span></code></a></li>
<li><a class="reference internal" href="#pytest.PytestCacheWarning"><code class="docutils literal notranslate"><span class="pre">PytestCacheWarning</span></code></a></li>
<li><a class="reference internal" href="#pytest.PytestCollectionWarning"><code class="docutils literal notranslate"><span class="pre">PytestCollectionWarning</span></code></a></li>
<li><a class="reference internal" href="#pytest.PytestConfigWarning"><code class="docutils literal notranslate"><span class="pre">PytestConfigWarning</span></code></a></li>
<li><a class="reference internal" href="#pytest.PytestDeprecationWarning"><code class="docutils literal notranslate"><span class="pre">PytestDeprecationWarning</span></code></a></li>
<li><a class="reference internal" href="#pytest.PytestExperimentalApiWarning"><code class="docutils literal notranslate"><span class="pre">PytestExperimentalApiWarning</span></code></a></li>
<li><a class="reference internal" href="#pytest.PytestRemovedIn9Warning"><code class="docutils literal notranslate"><span class="pre">PytestRemovedIn9Warning</span></code></a></li>
<li><a class="reference internal" href="#pytest.PytestUnknownMarkWarning"><code class="docutils literal notranslate"><span class="pre">PytestUnknownMarkWarning</span></code></a></li>
<li><a class="reference internal" href="#pytest.PytestUnraisableExceptionWarning"><code class="docutils literal notranslate"><span class="pre">PytestUnraisableExceptionWarning</span></code></a></li>
<li><a class="reference internal" href="#pytest.PytestUnhandledThreadExceptionWarning"><code class="docutils literal notranslate"><span class="pre">PytestUnhandledThreadExceptionWarning</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#ini-options-ref">配置选项</a></li>
<li><a class="reference internal" href="#command-line-flags">命令行标志</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=7c91f8fd"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/tabs.js?v=3030b3cb"></script>
    </body>
</html>